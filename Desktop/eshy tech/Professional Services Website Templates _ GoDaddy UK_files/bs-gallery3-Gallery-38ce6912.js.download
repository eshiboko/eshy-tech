define("@widget/GALLERY/bs-gallery3-Gallery-38ce6912.js",["exports","@widget/GALLERY/c/bs-wrapWithLazyLoader","@widget/GALLERY/c/bs-wrapWithDeviceDetection","@widget/GALLERY/c/bs-CustomArrows","@widget/GALLERY/c/bs-directionalKeyHandlers","@widget/GALLERY/c/bs-util"],(function(e,t,a,o,l,r){"use strict";const{Carousel:n}=(global.Core||guac["@wsb/guac-widget-core"]).UX;var s=t.wrapWithLazyLoader(a.wrapWithDeviceDetection(class extends(global.React||guac.react).Component{constructor(e){super(e),this.state={arrows:!1,currentSlide:0,nextSlideIncremental:0,mouseOnCarousel:!1},this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.nextSlideDebounced=(global._||guac.lodash).debounce(e=>l.handleDirectionalKeys({keyCode:e.keyCode,context:this}),200)}static getDerivedStateFromProps(e,t){const{images:a=[]}=e,{currentSlide:o}=t;return o>=a.length?{currentSlide:0}:null}handleMouseLeave(){this.setState({mouseOnCarousel:!1,arrows:!1})}handleMouseEnter(){this.setState({mouseOnCarousel:!0}),this.handleMouseMove()}handleMouseMove(){this.state.arrows||this.setState({arrows:!0}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.setState({arrows:!1})},2e3)}handleSlideChange(e){this.setState({currentSlide:e})}static get propTypes(){return{autoplay:(global.PropTypes||guac["prop-types"]).bool,category:(global.PropTypes||guac["prop-types"]).string,className:(global.PropTypes||guac["prop-types"]).string,device:(global.PropTypes||guac["prop-types"]).string,images:(global.PropTypes||guac["prop-types"]).array,renderAsThumbnail:(global.PropTypes||guac["prop-types"]).bool,section:(global.PropTypes||guac["prop-types"]).string,showthumbnailsThirdLayout:(global.PropTypes||guac["prop-types"]).bool,size:(global.PropTypes||guac["prop-types"]).string,currentImageSelected:(global.PropTypes||guac["prop-types"]).string,autoplayDelay:(global.PropTypes||guac["prop-types"]).string,showSlideNum:(global.PropTypes||guac["prop-types"]).bool,fullBleed:(global.PropTypes||guac["prop-types"]).bool,transitionType:(global.PropTypes||guac["prop-types"]).string,showArrows:(global.PropTypes||guac["prop-types"]).bool}}static get defaultProps(){return{category:"neutral",images:[]}}render(){const{device:e,showthumbnailsThirdLayout:t,fullBleed:a,images:n,showArrows:s,transitionType:i}=this.props,{nextSlideIncremental:c,arrows:g}=this.state,u=(global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,d=this.renderImages(),p="mobile"===e,m="fade"===i&&p,h=n.length>1&&(s||m)?[{component:o.CustomArrows,props:{visible:g||m,triggerNextSlide:c},position:"bottom"}]:[];if(t&&n.length>1){const{width:e,height:t}=l.smallthumbImageDimensions,o=n.map(({imageData:a})=>({url:r.getImageUrl((global.Core||guac["@wsb/guac-widget-core"]).utils.generateBackgroundUrl(a),e,t,"background"),caption:a.caption,alt:a.alt})),s={position:"absolute",width:"100%",left:"50%",transform:"translateX(-50%)"};p||h.push({component:l.ThumbnailNavList,props:{images:o,overrideStyle:s,thumbHeight:t,renderContainer:a},position:"bottom"})}const b=p&&!m?{imageComponents:d}:{imageComponents:d,controls:h},y=d.length>0&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Carousel,{onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-route":"",children:this.renderCarouselComponents(b,p)});return y&&(a?y:(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,null,(global.React||guac.react).createElement(u,{size:1,bottom:!1},y)))}componentDidUpdate(e){const{currentImageSelected:t}=this.props;t!==e.currentImageSelected&&t>-1&&this.setState({currentSlide:parseInt(t,10)})}componentWillUnmount(){l.modifyKeyDownEventHandler(this.nextSlideDebounced)}renderCaptionOverlay(e){const{images:a,showSlideNum:o,fullBleed:l}=this.props,{currentSlide:r}=this.state,n=a.length>10&&r+1<10?0:"",s="".concat(n).concat(r+1,"/").concat(a.length),i=o&&a.length>1,c={overlayStyle:{zIndex:1},fullBleedBlockStyle:{width:"100%",paddingHorizontal:"0px !important"},containerStyle:{display:"flex",alignItems:"center",justifyContent:"flex-end"},captionStyle:{flexGrow:"1 !important",textAlign:i?"left":"center"},slideNumStyle:{flexGrow:0}};if(!e&&!i)return null;const g=(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,e&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":t.dataAids.GALLERY_CAPTION_RENDERED,children:e,style:c.captionStyle,richtext:!0}),i&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":t.dataAids.GALLERY_SLIDE_POSITION,children:s,style:c.slideNumStyle}));return l?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.FigCaption.Overlay,{style:c.overlayStyle},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:c.fullBleedBlockStyle},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,{style:c.containerStyle},g))):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.FigCaption.Overlay,{style:c.overlayStyle},g)}renderCarouselComponents(e,a){const{imageComponents:o,controls:r}=e,{autoplay:s,autoplayDelay:i,renderAsThumbnail:c,images:g,showthumbnailsThirdLayout:u,device:d,size:p,currentImageSelected:m,transitionType:h,fullBleed:b}=this.props,{currentSlide:y}=this.state,w=m>-1?parseInt(m,10):y,S={initialSlide:parseInt(w,10)},C=g[y].caption||"",E=c&&("mobile"===d||"xs"===p),v=1e3*(parseFloat(i)||3.5),f=this.renderCaptionOverlay(C),L={paddingBottom:"".concat(56.25,"%")};"fade"!==h&&(L.opacity=1,L.position="relative");const T=c?o[0]:(global.React||guac.react).createElement(n,t._extends({key:m,slideWidth:"100%",arrows:!1,autoplay:s,autoplaySpeed:v,dots:!1,draggable:g.length>1,afterChange:this.handleSlideChange.bind(this),controls:r||[],children:o,transition:h,pauseOnHover:!b,style:{slide:L,viewport:{paddingBottom:"fade"===h?"".concat(56.25,"%"):0},track:{lineHeight:0}}},S));let R,D;return c&&(R={height:650,width:900,marginLeft:"auto",marginRight:"auto"}),!u||a&&!c||(D="xxlarger"),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{...R,marginBottom:D,position:"relative"}},T,f,E&&u&&(global.React||guac.react).createElement(l.FakeThumbNav,{images:g,thumbImageDimensions:l.smallthumbImageDimensions,imageType:"background",baseStyle:{position:"absolute",bottom:-80,overflow:"hidden",width:"100%"}}))}renderImages(){const{images:e}=this.props;return e.map((e,a)=>{const{imageData:o,caption:r,position:n="center"}=e;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Background,{key:a,imageData:o,"data-route":"","data-aid":t.getGalleryDataAid(a),alt:r||"",style:{top:"0",left:"0",position:"absolute !important",overflow:"hidden",marginBottom:"0",height:"100%",width:"100%",backgroundPosition:n},onMouseEnter:l.modifyKeyDownEventHandler.bind(this,this.nextSlideDebounced,!0),onMouseLeave:l.modifyKeyDownEventHandler.bind(this,this.nextSlideDebounced),...t.getGalleryDataRouteProps(a,{isImage:!0,useImageField:!1})})})}}));e.default=s})),"undefined"!=typeof window&&(window.global=window);
