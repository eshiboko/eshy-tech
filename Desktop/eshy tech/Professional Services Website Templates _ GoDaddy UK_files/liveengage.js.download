!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=389)}([function(t,e,n){t.exports=n(192)},function(t,e,n){"use strict";n.d(e,"n",(function(){return O})),n.d(e,"a",(function(){return w})),n.d(e,"e",(function(){return x})),n.d(e,"c",(function(){return A})),n.d(e,"b",(function(){return k})),n.d(e,"k",(function(){return N})),n.d(e,"i",(function(){return j})),n.d(e,"s",(function(){return I})),n.d(e,"j",(function(){return C})),n.d(e,"l",(function(){return D})),n.d(e,"r",(function(){return L})),n.d(e,"q",(function(){return M})),n.d(e,"p",(function(){return P})),n.d(e,"o",(function(){return F})),n.d(e,"d",(function(){return G})),n.d(e,"g",(function(){return U})),n.d(e,"f",(function(){return K})),n.d(e,"m",(function(){return B})),n.d(e,"h",(function(){return H}));var r=n(13),i=n.n(r),o=n(17),a=n.n(o),c=n(12),s=n.n(c),u=n(0),l=n.n(u),f=n(87),p=n.n(f),h=n(49),v=n(120),d=n.n(v),g=n(7),m=n.n(g),y=n(26),b=n.n(y),S=n(3),T=n.n(S),E=n(59),_=n.n(E);function O(t,e){return!(!N(t)||!N(e))&&_()(t).call(t,0,e.length)===e}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!N(t)||!N(e))&&(n&&(t=t.toLowerCase(),e=e.toLowerCase()),_()(t).call(t,t.length-e.length)===e)}function x(t,e,n){var r=n;try{var i=e.split("."),o=t;T()(i).call(i,(function(t){return o=o[t]})),void 0!==o&&(r=o)}catch(t){}return r}function A(t,e){if(b()(t)&&"function"==typeof e)for(var n=0;n<t.length;n++)if(!0===e(t[n],n,t))return n;return-1}function k(t,e){var n;if(C(t))for(var r=m()(t),i=0;i<r.length&&!n;i++){var o=r[i];e(t[o],o,t)&&(n=t[o])}else if(b()(t))for(var a=0;a<t.length&&!n;a++){e(t[a],a,t)&&(n=t[a])}return n}function N(t){return"string"==typeof t||t instanceof String}function j(t){return"number"==typeof t?d()(t):t instanceof Number&&d()(t.valueOf())}var R=-1;function I(){return R++}function C(t){return t&&"object"===Object(h.a)(t)&&t.constructor===Object}function D(t,e){var n,r=t;C(e)&&T()(n=m()(e)).call(n,(function(t){var n=e[t];C(n)&&(n=r[t]&&C(r[t])?D({},r[t],n):D({},n)),void 0!==n&&(r[t]=n)}));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(o&&o.length){var c,s=p()(o).call(o,0,1)[0];r=D.apply(void 0,l()(c=[r,s]).call(c,o))}return r}function L(t){var e={};return s()(t).call(t,(function(t){return!Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=!0)}))}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a,n={};return s()(t).call(t,(function(t){var r=e(t);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}function P(t){if(null==t)return"";if("string"==typeof t)return t;if(b()(t))return i()(t).call(t,(function(t){return N(t)?t:""}))+"";var e=t+"";return"0"===e&&1/t===Number.NEGATIVE_INFINITY?"-0":e}function F(t){if("number"==typeof t)return t;if(C(t)&&"function"==typeof t.valueOf){var e=t.valueOf();t=C(e)?e+"":e}return"string"!=typeof t?0===t?t:+t:+(t=t.replace(/^\s+|\s+$/g,""))}function G(t,e){var n=m()(t);return T()(n).call(n,(function(n){return e(t[n],n,t)})),t}function U(t,e){var n={};if(b()(t)&&N(e))for(var r=0;r<t.length;r++){var i=t[r][e];N(i)&&(n[i]||(n[i]=[]),n[i].push(t[r]))}return n}function K(t){return t.name?t.name:(t.toString().match(/function (.+?)\(/)||["",""])[1]}function B(t){for(var e=m()(t),n={},r=0;r<e.length;r++)n[e[r]]=t[e[r]];return n}function H(t){return!0===t||!1===t}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var r=n(40),i=n(89),o=n(1),a=function(t){return!!Object(o.b)(r.a,(function(e){return t===e}))},c={showLevel:!0,displayAllErrors:!1},s=!1;void 0!==t&&void 0!==t.version&&t.version&&(s=!0);var u=String(s?t.env.SPLITIO_DEBUG:Object(i.a)()?localStorage.getItem("splitio_debug"):""),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new r.b(t,Object(o.l)(e,c))},f=l("splitio-utils:logger"),p={enable:function(){Object(r.c)(r.a.DEBUG)},setLogLevel:function(t){a(t)?Object(r.c)(t):f.error("Invalid Log Level - No changes to the logs will be applied.")},disable:function(){Object(r.c)(r.a.NONE)},LogLevel:r.a};/^(enabled?|on)/i.test(u)?p.enable(r.a.DEBUG):a(u)?p.setLogLevel(u):p.disable(),e.b=l}).call(this,n(266))},function(t,e,n){t.exports=n(258)},function(t,e,n){"use strict";var r=n(23),i=n(68).f,o=n(126),a=n(15),c=n(36),s=n(43),u=n(38),l=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var n,f,p,h,v,d,g,m,y=t.target,b=t.global,S=t.stat,T=t.proto,E=b?r:S?r[y]:(r[y]||{}).prototype,_=b?a:a[y]||(a[y]={}),O=_.prototype;for(p in e)n=!o(b?p:y+(S?".":"#")+p,t.forced)&&E&&u(E,p),v=_[p],n&&(d=t.noTargetGet?(m=i(E,p))&&m.value:E[p]),h=n&&d?d:e[p],n&&typeof v==typeof h||(g=t.bind&&n?c(h,r):t.wrap&&n?l(h):T&&"function"==typeof h?c(Function.call,h):h,(t.sham||h&&h.sham||v&&v.sham)&&s(g,"sham",!0),_[p]=g,T&&(u(a,f=y+"Prototype")||s(a,f,{}),a[f][p]=h,t.real&&O&&!O[p]&&s(O,p,h)))}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){t.exports=n(294)},function(t,e,n){t.exports=n(254)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(88),i=n.n(r);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}},function(t,e,n){t.exports=n(313)},function(t,e,n){t.exports=n(199)},function(t,e,n){t.exports=n(280)},function(t,e,n){t.exports=n(217)},function(t,e,n){t.exports=n(210)},function(t,e,n){t.exports=n(325)},function(t,e){t.exports={}},function(t,e,n){var r=n(31);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){t.exports=n(214)},function(t,e,n){t.exports=n(331)},function(t,e,n){t.exports=n(335)},function(t,e,n){t.exports=n(338)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=!0},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(195))},function(t,e,n){var r=n(23),i=n(101),o=n(38),a=n(82),c=n(102),s=n(128),u=i("wks"),l=r.Symbol,f=s?l:l&&l.withoutSetter||a;t.exports=function(t){return o(u,t)||(c&&o(l,t)?u[t]=l[t]:u[t]=f("Symbol."+t)),u[t]}},function(t,e,n){t.exports=n(203)},function(t,e,n){t.exports=n(256)},function(t,e,n){var r=n(15),i=n(38),o=n(114),a=n(41).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(16),i=n(150),o=n(52),a=n(36),c=n(113),s=n(151),u=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,n,l,f){var p,h,v,d,g,m,y,b=a(e,n,l?2:1);if(f)p=t;else{if("function"!=typeof(h=c(t)))throw TypeError("Target is not iterable");if(i(h)){for(v=0,d=o(t.length);d>v;v++)if((g=l?b(r(y=t[v])[0],y[1]):b(t[v]))&&g instanceof u)return g;return new u(!1)}p=h.call(t)}for(m=p.next;!(y=m.call(p)).done;)if("object"==typeof(g=s(p,b,y.value,l))&&g&&g instanceof u)return g;return new u(!1)}).stop=function(t){return new u(!0,t)}},function(t,e,n){var r=n(21);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=n(327)},function(t,e,n){t.exports=n(328)},function(t,e,n){var r=n(15);t.exports=function(t){return r[t+"Prototype"]}},function(t,e,n){t.exports=n(316)},function(t,e,n){var r=n(28);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){t.exports=n(197)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(15),i=n(23),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return m}));var r=n(42),i=n.n(r),o=n(7),a=n.n(o),c=n(13),s=n.n(c),u=n(10),l=n.n(u),f=n(5),p=n(8),h={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"},v=h.DEBUG,d=function(t){v=t},g={showLevel:!0,displayAllErrors:!1},m=function(){function t(e,n){Object(f.a)(this,t),this.category=e,this.options=l()({},g,n)}return Object(p.a)(t,[{key:"debug",value:function(t){this._shouldLog(h.DEBUG)&&this._log(h.DEBUG,t)}},{key:"info",value:function(t){this._shouldLog(h.INFO)&&this._log(h.INFO,t)}},{key:"warn",value:function(t){this._shouldLog(h.WARN)&&this._log(h.WARN,t)}},{key:"error",value:function(t){(this.options.displayAllErrors||this._shouldLog(h.ERROR))&&this._log(h.ERROR,t)}},{key:"_log",value:function(t,e){var n=this._generateLogMessage(t,e);console.log(n)}},{key:"_generateLogMessage",value:function(t,e){var n="";return this.options.showLevel&&(n+="["+t+"]"+(t===h.INFO||t===h.WARN?" ":"")+" "),this.category&&(n+=this.category+" => "),n+e}},{key:"_shouldLog",value:function(t){var e,n=v,r=s()(e=a()(h)).call(e,(function(t){return h[t]}));return i()(r).call(r,t)>=i()(r).call(r,n)}}]),t}()},function(t,e,n){var r=n(30),i=n(125),o=n(16),a=n(80),c=Object.defineProperty;e.f=r?c:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=n(267)},function(t,e,n){var r=n(30),i=n(41),o=n(69);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(70);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(22),i=n(138);t.exports=r?i:function(t){return Map.prototype.entries.call(t)}},function(t,e,n){var r=n(79),i=n(70);t.exports=function(t){return r(i(t))}},function(t,e,n){n(109);var r=n(208),i=n(23),o=n(57),a=n(43),c=n(55),s=n(24)("toStringTag");for(var u in r){var l=i[u],f=l&&l.prototype;f&&o(f)!==s&&a(f,s,u),c[u]=c.Array}},function(t,e,n){var r=n(30),i=n(21),o=n(38),a=Object.defineProperty,c={},s=function(t){throw t};t.exports=function(t,e){if(o(c,t))return c[t];e||(e={});var n=[][t],u=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:s,f=o(e,1)?e[1]:void 0;return c[t]=!!n&&!i((function(){if(u&&!r)return!0;var t={length:-1};u?a(t,1,{enumerable:!0,get:s}):t[1]=1,n.call(t,l,f)}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(166),i=n.n(r),o=n(50),a=n.n(o);function c(t){return(c="function"==typeof a.a&&"symbol"==typeof i.a?function(t){return typeof t}:function(t){return t&&"function"==typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":typeof t})(t)}},function(t,e,n){t.exports=n(227)},function(t,e,n){t.exports=n(277)},function(t,e,n){var r=n(81),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){t.exports=n(357)},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports={}},function(t,e,n){var r=n(112),i=n(41).f,o=n(43),a=n(38),c=n(206),s=n(24)("toStringTag");t.exports=function(t,e,n,u){if(t){var l=n?t:t.prototype;a(l,s)||i(l,s,{configurable:!0,value:e}),u&&!r&&o(l,"toString",c)}}},function(t,e,n){var r=n(112),i=n(54),o=n(24)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){"use strict";var r=n(209).charAt,i=n(61),o=n(110),a=i.set,c=i.getterFor("String Iterator");o(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=c(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){t.exports=n(263)},function(t,e,n){t.exports=n(348)},function(t,e,n){var r,i,o,a=n(204),c=n(23),s=n(31),u=n(43),l=n(38),f=n(84),p=n(75),h=c.WeakMap;if(a){var v=new h,d=v.get,g=v.has,m=v.set;r=function(t,e){return m.call(v,t,e),e},i=function(t){return d.call(v,t)||{}},o=function(t){return g.call(v,t)}}else{var y=f("state");p[y]=!0,r=function(t,e){return u(t,y,e),e},i=function(t){return l(t,y)?t[y]:{}},o=function(t){return l(t,y)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(36),i=n(79),o=n(44),a=n(52),c=n(100),s=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,f=6==t,p=5==t||f;return function(h,v,d,g){for(var m,y,b=o(h),S=i(b),T=r(v,d,3),E=a(S.length),_=0,O=g||c,w=e?O(h,E):n?O(h,0):void 0;E>_;_++)if((p||_ in S)&&(y=T(m=S[_],_,b),t))if(e)w[_]=y;else if(y)switch(t){case 3:return!0;case 5:return m;case 6:return _;case 2:s.call(w,m)}else if(l)return!1;return f?-1:u||l?l:w}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(t,e,n){t.exports=n(308)},function(t,e,n){t.exports=n(351)},function(t,e,n){t.exports=n(354)},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function c(){c.init.call(this)}t.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var s=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?c.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var i,o,a,c;if(u(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,c=s,console&&console.warn&&console.warn(c)}return t}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function v(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},c.prototype.getMaxListeners=function(){return l(this)},c.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var s=i[t];if(void 0===s)return!1;if("function"==typeof s)o(s,this,e);else{var u=s.length,l=g(s,u);for(n=0;n<u;++n)o(l[n],this,e)}return!0},c.prototype.addListener=function(t,e){return f(this,t,e,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(t,e){return f(this,t,e,!0)},c.prototype.once=function(t,e){return u(e),this.on(t,h(this,t,e)),this},c.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,h(this,t,e)),this},c.prototype.removeListener=function(t,e){var n,r,i,o,a;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},c.prototype.listeners=function(t){return v(this,t,!0)},c.prototype.rawListeners=function(t){return v(this,t,!1)},c.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},c.prototype.listenerCount=d,c.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){t.exports=n(387)},function(t,e,n){var r=n(30),i=n(98),o=n(69),a=n(46),c=n(80),s=n(38),u=n(125),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=c(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(54);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";var r=n(80),i=n(41),o=n(69);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){var r=n(21),i=n(24),o=n(103),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r,i=n(16),o=n(130),a=n(107),c=n(75),s=n(132),u=n(99),l=n(84),f=l("IE_PROTO"),p=function(){},h=function(t){return"<script>"+t+"<\/script>"},v=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;v=r?function(t){t.write(h("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=u("iframe")).style.display="none",s.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(h("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete v.prototype[a[n]];return v()};c[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p.prototype=i(t),n=new p,p.prototype=null,n[f]=t):n=v(),void 0===e?n:o(n,e)}},function(t,e){t.exports={}},function(t,e,n){var r=n(43);t.exports=function(t,e,n,i){i&&i.enumerable?t[e]=n:r(t,e,n)}},function(t,e,n){var r=n(16),i=n(28),o=n(24)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){"use strict";const{idTypes:r,PARAMETER_LABEL:i}=n(97),{validateApp:o,updateCohortAllocationsWithEid:a,generateDefaultAllocations:c,groupEligibleExperimentsById:s}=n(181),{getSubjectKey:u,getCohortId:l,getSubjectIdType:f,treatmentsToCohortAllocations:p,transformSplitToExperiment:h}=n(182),v=n(186);t.exports={hivemindConstants:{idTypes:r,PARAMETER_LABEL:i},MockWrapper:v,validateApp:o,updateCohortAllocationsWithEid:a,generateDefaultAllocations:c,groupEligibleExperimentsById:s,getSubjectKey:u,getCohortId:l,getSubjectIdType:f,treatmentsToCohortAllocations:p,transformSplitToExperiment:h}},function(t,e,n){var r=n(21),i=n(54),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(31);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(131),i=n(107);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(101),i=n(82),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){},function(t,e,n){"use strict";var r=n(21);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){t.exports=n(221)},function(t,e,n){t.exports=n(270)},function(t,e,n){"use strict";function r(){var t="__SPLITSOFTWARE__";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}n.d(e,"a",(function(){return r}))},function(t,e,n){t.exports=n(272)},function(t,e,n){t.exports=n(286)},function(t,e,n){t.exports=n(287)},function(t,e,n){t.exports=n(291)},function(t,e,n){t.exports=n(318)},function(t,e,n){t.exports=n(319)},function(t,e,n){t.exports=n(361)},function(t,e){t.exports={idTypes:{SHOPPER_ID:"shopperId",VISITOR_GUID:"visitorGuid"},DEFAULT_COHORT:"ineligible",PARAMETER_LABEL:"parameter"}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(23),i=n(31),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(31),i=n(71),o=n(24)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(22),i=n(127);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(21);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r,i,o=n(23),a=n(104),c=o.process,s=c&&c.versions,u=s&&s.v8;u?i=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){var r=n(39);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(46),i=n(52),o=n(106),a=function(t){return function(e,n,a){var c,s=r(e),u=i(s.length),l=o(a,u);if(t&&n!=n){for(;u>l;)if((c=s[l++])!=c)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(81),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var r=n(46),i=n(133),o=n(55),a=n(61),c=n(110),s=a.set,u=a.getterFor("Array Iterator");t.exports=c(Array,"Array",(function(t,e){s(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";var r=n(4),i=n(205),o=n(111),a=n(137),c=n(56),s=n(43),u=n(76),l=n(24),f=n(22),p=n(55),h=n(135),v=h.IteratorPrototype,d=h.BUGGY_SAFARI_ITERATORS,g=l("iterator"),m=function(){return this};t.exports=function(t,e,n,l,h,y,b){i(n,e,l);var S,T,E,_=function(t){if(t===h&&k)return k;if(!d&&t in x)return x[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",w=!1,x=t.prototype,A=x[g]||x["@@iterator"]||h&&x[h],k=!d&&A||_(h),N="Array"==e&&x.entries||A;if(N&&(S=o(N.call(new t)),v!==Object.prototype&&S.next&&(f||o(S)===v||(a?a(S,v):"function"!=typeof S[g]&&s(S,g,m)),c(S,O,!0,!0),f&&(p[O]=m))),"values"==h&&A&&"values"!==A.name&&(w=!0,k=function(){return A.call(this)}),f&&!b||x[g]===k||s(x,g,k),p[e]=k,h)if(T={values:_("values"),keys:y?k:_("keys"),entries:_("entries")},b)for(E in T)(d||w||!(E in x))&&u(x,E,T[E]);else r({target:e,proto:!0,forced:d||w},T);return T}},function(t,e,n){var r=n(38),i=n(44),o=n(84),a=n(136),c=o("IE_PROTO"),s=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,c)?t[c]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r={};r[n(24)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(57),i=n(55),o=n(24)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(24);e.f=r},function(t,e,n){var r=n(131),i=n(107).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){"use strict";var r=n(28),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"hivemindConstants",{enumerable:!0,get:function(){return i.hivemindConstants}}),e.default=void 0;var r,i=n(78);var o=((r=n(187))&&r.__esModule?r:{default:r}).default;e.default=o},function(t,e,n){t.exports=n(250)},function(t,e,n){t.exports=n(322)},function(t,e,n){t.exports=n(352)},function(t,e,n){t.exports=n(362)},function(t,e,n){"use strict";var r=n(4),i=n(21),o=n(71),a=n(31),c=n(44),s=n(52),u=n(72),l=n(100),f=n(73),p=n(24),h=n(103),v=p("isConcatSpreadable"),d=h>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),g=f("concat"),m=function(t){if(!a(t))return!1;var e=t[v];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!d||!g},{concat:function(t){var e,n,r,i,o,a=c(this),f=l(a,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],m(o)){if(p+(i=s(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,p++)n in o&&u(f,p,o[n])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(f,p++,o)}return f.length=p,f}})},function(t,e,n){var r=n(30),i=n(21),o=n(99);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(21),i=/#|\.prototype\./,o=function(t,e){var n=c[a(t)];return n==u||n!=s&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=o.data={},s=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(23),i=n(196),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(102);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){n(198);var r=n(15).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(30),i=n(41),o=n(16),a=n(83);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),c=r.length,s=0;c>s;)i.f(t,n=r[s++],e[n]);return t}},function(t,e,n){var r=n(38),i=n(46),o=n(105).indexOf,a=n(75);t.exports=function(t,e){var n,c=i(t),s=0,u=[];for(n in c)!r(a,n)&&r(c,n)&&u.push(n);for(;e.length>s;)r(c,n=e[s++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var r=n(39);t.exports=r("document","documentElement")},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(127),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){"use strict";var r,i,o,a=n(111),c=n(43),s=n(38),u=n(24),l=n(22),f=u("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):p=!0),null==r&&(r={}),l||s(r,f)||c(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(t,e,n){var r=n(21);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(16),i=n(207);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){var r=n(16),i=n(113);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e,n){n(27)("iterator")},function(t,e,n){"use strict";var r=n(4),i=n(23),o=n(39),a=n(22),c=n(30),s=n(102),u=n(128),l=n(21),f=n(38),p=n(71),h=n(31),v=n(16),d=n(44),g=n(46),m=n(80),y=n(69),b=n(74),S=n(83),T=n(115),E=n(229),_=n(108),O=n(68),w=n(41),x=n(98),A=n(43),k=n(76),N=n(101),j=n(84),R=n(75),I=n(82),C=n(24),D=n(114),L=n(27),M=n(56),P=n(61),F=n(62).forEach,G=j("hidden"),U=C("toPrimitive"),K=P.set,B=P.getterFor("Symbol"),H=Object.prototype,W=i.Symbol,z=o("JSON","stringify"),Y=O.f,q=w.f,V=E.f,Q=x.f,J=N("symbols"),$=N("op-symbols"),X=N("string-to-symbol-registry"),Z=N("symbol-to-string-registry"),tt=N("wks"),et=i.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=c&&l((function(){return 7!=b(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(H,e);r&&delete H[e],q(t,e,n),r&&t!==H&&q(H,e,r)}:q,it=function(t,e){var n=J[t]=b(W.prototype);return K(n,{type:"Symbol",tag:t,description:e}),c||(n.description=e),n},ot=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},at=function(t,e,n){t===H&&at($,e,n),v(t);var r=m(e,!0);return v(n),f(J,r)?(n.enumerable?(f(t,G)&&t[G][r]&&(t[G][r]=!1),n=b(n,{enumerable:y(0,!1)})):(f(t,G)||q(t,G,y(1,{})),t[G][r]=!0),rt(t,r,n)):q(t,r,n)},ct=function(t,e){v(t);var n=g(e),r=S(n).concat(ft(n));return F(r,(function(e){c&&!st.call(n,e)||at(t,e,n[e])})),t},st=function(t){var e=m(t,!0),n=Q.call(this,e);return!(this===H&&f(J,e)&&!f($,e))&&(!(n||!f(this,e)||!f(J,e)||f(this,G)&&this[G][e])||n)},ut=function(t,e){var n=g(t),r=m(e,!0);if(n!==H||!f(J,r)||f($,r)){var i=Y(n,r);return!i||!f(J,r)||f(n,G)&&n[G][r]||(i.enumerable=!0),i}},lt=function(t){var e=V(g(t)),n=[];return F(e,(function(t){f(J,t)||f(R,t)||n.push(t)})),n},ft=function(t){var e=t===H,n=V(e?$:g(t)),r=[];return F(n,(function(t){!f(J,t)||e&&!f(H,t)||r.push(J[t])})),r};(s||(k((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=I(t),n=function(t){this===H&&n.call($,t),f(this,G)&&f(this[G],e)&&(this[G][e]=!1),rt(this,e,y(1,t))};return c&&nt&&rt(H,e,{configurable:!0,set:n}),it(e,t)}).prototype,"toString",(function(){return B(this).tag})),k(W,"withoutSetter",(function(t){return it(I(t),t)})),x.f=st,w.f=at,O.f=ut,T.f=E.f=lt,_.f=ft,D.f=function(t){return it(C(t),t)},c&&(q(W.prototype,"description",{configurable:!0,get:function(){return B(this).description}}),a||k(H,"propertyIsEnumerable",st,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:W}),F(S(tt),(function(t){L(t)})),r({target:"Symbol",stat:!0,forced:!s},{for:function(t){var e=String(t);if(f(X,e))return X[e];var n=W(e);return X[e]=n,Z[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(f(Z,t))return Z[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!c},{create:function(t,e){return void 0===e?b(t):ct(b(t),e)},defineProperty:at,defineProperties:ct,getOwnPropertyDescriptor:ut}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:lt,getOwnPropertySymbols:ft}),r({target:"Object",stat:!0,forced:l((function(){_.f(1)}))},{getOwnPropertySymbols:function(t){return _.f(d(t))}}),z)&&r({target:"JSON",stat:!0,forced:!s||l((function(){var t=W();return"[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(h(e)||void 0!==t)&&!ot(t))return p(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),i[1]=e,z.apply(null,i)}});W.prototype[U]||A(W.prototype,U,W.prototype.valueOf),M(W,"Symbol"),R[G]=!0},function(t,e,n){n(255);var r=n(15);t.exports=r.Object.keys},function(t,e,n){n(257);var r=n(15);t.exports=r.Array.isArray},function(t,e,n){var r=n(264),i=Array.prototype;t.exports=function(t){var e=t.slice;return t===i||t instanceof Array&&e===i.slice?r:e}},function(t,e,n){var r=n(268),i=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===i||t instanceof Array&&e===i.indexOf?r:e}},function(t,e,n){n(271);var r=n(15).Object,i=t.exports=function(t,e,n){return r.defineProperty(t,e,n)};r.defineProperty.sham&&(i.sham=!0)},function(t,e,n){var r=n(70),i="["+n(116)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),c=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},function(t,e,n){n(278),n(85),n(58),n(47);var r=n(15);t.exports=r.Map},function(t,e,n){"use strict";var r=n(4),i=n(23),o=n(149),a=n(21),c=n(43),s=n(29),u=n(117),l=n(31),f=n(56),p=n(41).f,h=n(62).forEach,v=n(30),d=n(61),g=d.set,m=d.getterFor;t.exports=function(t,e,n){var d,y=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),S=y?"set":"add",T=i[t],E=T&&T.prototype,_={};if(v&&"function"==typeof T&&(b||E.forEach&&!a((function(){(new T).entries().next()})))){d=e((function(e,n){g(u(e,d,t),{type:t,collection:new T}),null!=n&&s(n,e[S],e,y)}));var O=m(t);h(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"==t||"set"==t;!(t in E)||b&&"clear"==t||c(d.prototype,t,(function(n,r){var i=O(this).collection;if(!e&&b&&!l(n))return"get"==t&&void 0;var o=i[t](0===n?0:n,r);return e?this:o}))})),b||p(d.prototype,"size",{configurable:!0,get:function(){return O(this).collection.size}})}else d=n.getConstructor(e,t,y,S),o.REQUIRED=!0;return f(d,t,!1,!0),_[t]=d,r({global:!0,forced:!0},_),b||n.setStrong(d,t,y),d}},function(t,e,n){var r=n(75),i=n(31),o=n(38),a=n(41).f,c=n(82),s=n(279),u=c("meta"),l=0,f=Object.isExtensible||function(){return!0},p=function(t){a(t,u,{value:{objectID:"O"+ ++l,weakData:{}}})},h=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,u)){if(!f(t))return"F";if(!e)return"E";p(t)}return t[u].objectID},getWeakData:function(t,e){if(!o(t,u)){if(!f(t))return!0;if(!e)return!1;p(t)}return t[u].weakData},onFreeze:function(t){return s&&h.REQUIRED&&f(t)&&!o(t,u)&&p(t),t}};r[u]=!0},function(t,e,n){var r=n(24),i=n(55),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){var r=n(16);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){"use strict";var r=n(41).f,i=n(74),o=n(153),a=n(36),c=n(117),s=n(29),u=n(110),l=n(154),f=n(30),p=n(149).fastKey,h=n(61),v=h.set,d=h.getterFor;t.exports={getConstructor:function(t,e,n,u){var l=t((function(t,r){c(t,l,e),v(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=r&&s(r,t[u],t,n)})),h=d(e),g=function(t,e,n){var r,i,o=h(t),a=m(t,e);return a?a.value=n:(o.last=a={index:i=p(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),f?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},m=function(t,e){var n,r=h(t),i=p(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(l.prototype,{clear:function(){for(var t=h(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=h(this),n=m(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),f?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=h(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!m(this,t)}}),o(l.prototype,n?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),f&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",i=d(e),o=d(r);u(t,e,(function(t,e){v(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},function(t,e,n){var r=n(76);t.exports=function(t,e,n){for(var i in e)n&&n.unsafe&&t[i]?t[i]=e[i]:r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(39),i=n(41),o=n(24),a=n(30),c=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[c]&&n(e,c,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(24)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var r=n(23);t.exports=r.Promise},function(t,e,n){var r,i,o,a=n(23),c=n(21),s=n(54),u=n(36),l=n(132),f=n(99),p=n(158),h=a.location,v=a.setImmediate,d=a.clearImmediate,g=a.process,m=a.MessageChannel,y=a.Dispatch,b=0,S={},T=function(t){if(S.hasOwnProperty(t)){var e=S[t];delete S[t],e()}},E=function(t){return function(){T(t)}},_=function(t){T(t.data)},O=function(t){a.postMessage(t+"",h.protocol+"//"+h.host)};v&&d||(v=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return S[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},d=function(t){delete S[t]},"process"==s(g)?r=function(t){g.nextTick(E(t))}:y&&y.now?r=function(t){y.now(E(t))}:m&&!p?(o=(i=new m).port2,i.port1.onmessage=_,r=u(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||c(O)||"file:"===h.protocol?r="onreadystatechange"in f("script")?function(t){l.appendChild(f("script")).onreadystatechange=function(){l.removeChild(this),T(t)}}:function(t){setTimeout(E(t),0)}:(r=O,a.addEventListener("message",_,!1))),t.exports={set:v,clear:d}},function(t,e,n){var r=n(104);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r=n(16),i=n(31),o=n(118);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){var r=n(314),i=Function.prototype;t.exports=function(t){var e=t.bind;return t===i||t instanceof Function&&e===i.bind?r:e}},function(t,e,n){"use strict";var r=n(28),i=n(31),o=[].slice,a={},c=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?c(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){n(317);var r=n(15);t.exports=r.Reflect.construct},function(t,e,n){n(140);var r=n(15);t.exports=r.Object.getOwnPropertySymbols},function(t,e,n){"use strict";var r=n(16);t.exports=function(t,e){var n,i=r(this),o=arguments.length>2?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(n=i.get(t),"function"==typeof e&&(n=e(n),i.set(t,n))):"function"==typeof o&&(n=o(),i.set(t,n)),n}},function(t,e,n){t.exports=n(225)},function(t,e,n){t.exports=n(283)},function(t,e,n){t.exports=n(293)},function(t,e,n){t.exports=n(301)},function(t,e,n){t.exports=n(304)},function(t,e,n){t.exports=n(339)},function(t){t.exports=JSON.parse('{"a":"10.13.0"}')},function(t,e,n){t.exports=n(353)},function(t,e,n){t.exports=n(386)},function(t,e){t.exports='<div id=gdchat-tray-button-dynamic class="gdchat-tray-button m-b-1"> </div> <div id=gdchat-tray-button-native class="gdchat-tray-button m-b-1"> </div>'},function(t,e,n){var r=n(177);"string"==typeof r&&(r=[[t.i,r,""]]);var i={transform:void 0};n(179)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(178)(!1)).push([t.i,'/*==============================*/\n/*  Helper Styles               */\n/*==============================*/\n\n/* Box Sizing */\n.liveEngage__bz-Border-Box, .liveEngage__bz-Border-Box * { box-sizing: border-box; }\n.liveEngage__bz-Content-Box, .liveEngage__bz-Content-Box * { box-sizing: content-box; }\n\n/* Display */\n.liveEngage__ds-Block { display: block; }\n.liveEngage__ds-Flex { display: flex; }\n.liveEngage__ds-Table { display: table; }\n.liveEngage__ds-Table-Cell { display: table-cell; }\n.liveEngage__ds-Inline-Block { display: inline-block; }\n\n/* Background Colors */\n.liveEngage__bg-White { background-color: #fff; }\n.liveEngage__bg-Gray-Light { background-color: #e8e8e8; }\n.liveEngage__bg-Purple { background-color: #7a0087; }\n.liveEngage__bg-Green { background-color: #00ab55; }\n\n/* Font Colors */\n.liveEngage__fc-White { color: #fff; }\n.liveEngage__fc-Gray-Medium-Dark { color: #7a7a7a; }\n.liveEngage__fc-Purple { color: #7a0087; }\n\n/* Hover States */\n.liveEngage__hv-Opacity { transition: opacity 150ms; }\n.liveEngage__hv-Opacity:hover { opacity: 0.66; }\n.liveEngage__hv-Purple-White { transition: background-color 150ms, color 150ms; }\n.liveEngage__hv-Purple-White:hover { background-color: #7a0087; color: #fff; }\n\n/* Font Families */\n.liveEngage__ff-Boing-Bold { font-family: Boing-Bold, "Arial Black", sans-serif; }\n.liveEngage__ff-Sans-Serif { font-family: Arial, "Helvetica Neue", Helvetica, sans-serif; }\n\n/* Text Alignment */\n.liveEngage__ta-Left { text-align: left; }\n.liveEngage__ta-Center { text-align: center; }\n.liveEngage__ta-Right { text-align: right; }\n\n/* Borders */\n.liveEngage__bd-TRBL { border: solid 1px; }\n.liveEngage__bd-RBL { border: solid 1px; border-top: none; }\n.liveEngage__bd-TRL { border: solid 1px; border-bottom: none; }\n.liveEngage__bdc-Gray-Medium { border-color: #a1a1a1; }\n.liveEngage__bdr-3px { border-radius: 3px; }\n.liveEngage__bdr-5px { border-radius: 5px; }\n\n/* Cursor */\n.liveEngage__crs-Default { cursor: default; }\n.liveEngage__crs-Pointer { cursor: pointer; }\n.liveEngage__crs-Help { cursor: help; }\n\n/* Box Shadows */\n.liveEngage__bs-Dialog { box-shadow: rgba(0, 0, 0, 0.08) 0 4px 12px,\n                         rgba(0, 0, 0, 0.14) 0 2px 8px,\n                         rgba(0, 0, 0, 0.20) 0 1px 3px;\n}\n\n/* Overflow */\n.liveEngage__ov-Hidden { overflow: hidden; }\n.liveEngage__ov-ScrollX { overflow-x: scroll; overflow-y: hidden; }\n.liveEngage__ov-ScrollY { overflow-x: hidden; overflow-y: scroll; }\n.liveEngage__ov-Visible { overflow: visible; }\n\n/* Padding */\n.liveEngage__pd-10px { padding: 10px; }\n.liveEngage__pd-20px { padding: 20px; }\n\n/* SVG */\n.liveEngage__svg-Fill-White { fill: #fff; }\n.liveEngage__svg-Fill-Purple { fill: #7a0087; }\n.liveEngage__svg-Fill-Green { fill: #00ab55; }\n.liveEngage__svg-Fill-Gray-Light { fill: #e8e8e8; }\n.liveEngage__svg-Fill-Gray-Medium { fill: #a1a1a1; }\n.liveEngage__svg-Fill-Gray-Medium-Dark { fill: #7a7a7a; }\n\n/* Transforms */\n.liveEngage__tf-Origin-Center { transform-origin: 50% 50%; }\n\n/* User Select */\n.liveEngage__us-None { user-select: none; }\n.liveEngage__us-Text { user-select: text; }\n\n/* Animations */\n@keyframes liveEngage__fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes liveEngage__ballBlink {\n  0% {\n    opacity: 0.7;\n  }\n  33.33% {\n    opacity: 0.55;\n  }\n  66.67% {\n    opacity: 0.4;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes liveEngage__hide {\n  100% {\n    opacity: 0;\n    margin-left: -9999em;\n  }\n}\n\n.liveEngage__anim-Fade-In { animation: liveEngage__fade 150ms ease-in 0s 1 forwards; }\n.liveEngage__anim-Ball-Blink { animation: liveEngage__ballBlink 1.1s 0s infinite cubic-bezier(0.445, 0.050, 0.550, 0.950); }\n.liveEngage__anim-Hide { animation: liveEngage__hide 300ms 0s 1 forwards; }\n.liveEngage__anim-Delay-300ms { animation-delay: 300ms; }\n.liveEngage__anim-Delay-500ms { animation-delay: 500ms; }\n.liveEngage__anim-Delay-600ms { animation-delay: 600ms; }\n.liveEngage__anim-Delay-4900ms { animation-delay: 4900ms; }\n.liveEngage__anim-Delay-3s { animation-delay: 3s; }\n.liveEngage__anim-Delay-4s { animation-delay: 4s; }\n.liveEngage__anim-Delay-5s { animation-delay: 5s; }\n.liveEngage__anim-Delay-6s { animation-delay: 6s; }\n\n/* Tip Offset and Alignment */\n.liveEngage__offset-Left {\n  margin-right: 10px;\n  margin-bottom: 80px;\n}\n@media screen and (min-width: 480px) {\n  .liveEngage__offset-Left {\n    margin-right: 90px;\n    margin-bottom: 10px;\n  }\n}\n\n\n\n/*==============================*/\n/*  GD Chat Styles              */\n/*==============================*/\n\n.gdchat-fixed-bottom-right {\n  position: fixed;\n  bottom: 0px;\n  right: 0px;\n  z-index: 108000;\n  margin: 0.6em;\n}\n\n.gdchat-fixed-bottom-left {\n  position: fixed;\n  bottom: 0px;\n  left: 0px;\n  z-index: 108000;\n  margin: 0.6em;\n}\n\n.gdchat-fixed-bottom-right > div {\n  pointer-events: none;\n}\n\n.gdchat-fixed-bottom-left > div {\n  pointer-events: none;\n}\n\n.gdchat-fixed-bottom-right > div * {\n  pointer-events: auto;\n}\n\n.gdchat-fixed-bottom-left > div * {\n  pointer-events: auto;\n}\n\n.gdchat-fixed-bottom-right .chat-image-circle {\n  background-color: #7a0087;\n  border: 1px solid #7a0087;\n  cursor: pointer;\n  min-width: 0;\n}\n\n.gdchat-fixed-bottom-left .chat-image-circle {\n  background-color: #7a0087;\n  border: 1px solid #7a0087;\n  cursor: pointer;\n  min-width: 0;\n}\n\n.chat-image-circle {\n  display: block;\n  border-radius: 50% !important;\n  padding: 0.7em !important;\n  margin: 0 auto;\n  min-width: 0;\n}\n\n.chat-image-circle img {\n  display: block;\n}\n\n.gdchat-proactive .chat-image-circle {\n  background-color: #e8e8e8;\n  border: 1px solid #e8e8e8;\n  padding: 0.3em;\n  margin-bottom: 0.3em;\n}\n',""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),o=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(o).concat([i]).join("\n")}var a,c,s;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);r&&i[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},function(t,e,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),c=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t.call(this,n)),e[n]}}((function(t){return document.querySelector(t)})),s=null,u=0,l=[],f=n(180);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(y(r.parts[a],e))}else{var c=[];for(a=0;a<r.parts.length;a++)c.push(y(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:c}}}}function h(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],c={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}function v(t,e){var n=c(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function d(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function g(t){var e=document.createElement("style");return t.attrs.type="text/css",m(e,t.attrs),v(t,e),e}function m(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function y(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var a=u++;n=s||(s=g(e)),r=T.bind(null,n,a,!1),i=T.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",m(e,t.attrs),v(t,e),e}(e),r=_.bind(null,n,e),i=function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(e),r=E.bind(null,n),i=function(){d(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return p(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(c=o[a.id]).refs--,r.push(c)}t&&p(h(t,e),e);for(i=0;i<r.length;i++){var c;if(0===(c=r[i]).refs){for(var s=0;s<c.parts.length;s++)c.parts[s]();delete o[c.id]}}}};var b,S=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function T(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=S(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function E(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function _(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=f(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),c=t.href;t.href=URL.createObjectURL(a),c&&URL.revokeObjectURL(c)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(t,e,n){"use strict";const{DEFAULT_COHORT:r}=n(97);t.exports={validateApp:function(t=""){if(!t.match(/^[a-z0-9_-]+$/))throw new Error("Parameter 'app' must match regex '/^[a-z0-9_-]+$/'")},updateCohortAllocationsWithEid:function(t,e){return Object.keys(t).forEach(n=>{const r=t[n].error?"error":t[n].cohortId;t[n].eid=`hivemind.${e}.experiment.${n}.${r}.impression`}),t},generateDefaultAllocations:function(t){return t.reduce((t,e)=>Object.assign(t,{[e]:{cohortId:r,data:{}}}),{})},groupEligibleExperimentsById:function({subject:t,experiments:e,experimentsMetadata:n}){const r=e.filter(t=>!(t in n));return{experimentsByIdType:Object.entries(n).reduce((e,[n,i])=>(t[i.subjectIdType]?(e[i.subjectIdType]||(e[i.subjectIdType]=[]),e[i.subjectIdType].push(n)):r.push(n),e),{}),ineligibleExperiments:r}}}},function(t,e,n){"use strict";const{unflatten:r}=n(183),{idTypes:i,DEFAULT_COHORT:o}=n(97),{sha256:a}=n(185);function c(t){return"control"===t?o:t}function s(t){switch(t){case"shopper":return i.SHOPPER_ID;case"visitor":return i.VISITOR_GUID;default:return t}}t.exports={getCohortId:c,getSubjectKey:function({id:t,idType:e}){switch(e){case i.SHOPPER_ID:return a(t);case i.VISITOR_GUID:return t;default:throw new Error("Invalid subject idType")}},getSubjectIdType:s,treatmentsToCohortAllocations:function(t){const e={};return Object.keys(t).forEach(n=>{const{treatment:i,config:o}=t[n];e[n]={cohortId:c(i),error:"control"===i,data:r(JSON.parse(o)||{})}}),e},transformSplitToExperiment:function(t){const e={experimentId:t.name,subjectIdType:s(t.trafficType),killed:t.killed,cohorts:t.treatments,cohortData:Object.keys(t.configs).reduce((e,n)=>(e[n]=r(JSON.parse(t.configs[n])||{}),e),{})},n=Object.values(e.cohortData).find(t=>t.labels);return e.labels=n?n.labels:[],e}}},function(t,e,n){var r=n(184);function i(t){return t}function o(t,e){const n=(e=e||{}).delimiter||".",o=e.maxDepth,a=e.transformKey||i,c={};return function t(i,s,u){u=u||1,Object.keys(i).forEach((function(l){const f=i[l],p=e.safe&&Array.isArray(f),h=Object.prototype.toString.call(f),v=r(f),d="[object Object]"===h||"[object Array]"===h,g=s?s+n+a(l):a(l);if(!p&&!v&&d&&Object.keys(f).length&&(!e.maxDepth||u<o))return t(f,g,u+1);c[g]=f}))}(t),c}t.exports=o,o.flatten=o,o.unflatten=function t(e,n){const a=(n=n||{}).delimiter||".",c=n.overwrite||!1,s=n.transformKey||i,u={};if(r(e)||"[object Object]"!==Object.prototype.toString.call(e))return e;function l(t){const e=Number(t);return isNaN(e)||-1!==t.indexOf(".")||n.object?t:e}return e=Object.keys(e).reduce((t,r)=>{const i=Object.prototype.toString.call(e[r]);return!("[object Object]"===i||"[object Array]"===i)||function(t){const e=Object.prototype.toString.call(t),n="[object Array]"===e,r="[object Object]"===e;if(!t)return!0;if(n)return!t.length;if(r)return!Object.keys(t).length}(e[r])?(t[r]=e[r],t):function(t,e,n){return Object.keys(n).reduce((function(e,r){return e[t+a+r]=n[r],e}),e)}(r,t,o(e[r],n))},{}),Object.keys(e).forEach((function(r){const i=r.split(a).map(s);let o=l(i.shift()),f=l(i[0]),p=u;for(;void 0!==f;){const t=Object.prototype.toString.call(p[o]),e="[object Object]"===t||"[object Array]"===t;if(!c&&!e&&void 0!==p[o])return;(c&&!e||!c&&null==p[o])&&(p[o]="number"!=typeof f||n.object?{}:[]),p=p[o],i.length>0&&(o=l(i.shift()),f=l(i[0]))}p[o]=t(e[r],n)})),u}},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e){t.exports={sha256:t=>{const e=(t,e)=>{const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},n=(t,e)=>t>>>e|t<<32-e,r=(t,e)=>t>>>e,i=(t,e,n)=>t&e^~t&n,o=(t,e,n)=>t&e^t&n^e&n,a=t=>n(t,2)^n(t,13)^n(t,22),c=t=>n(t,6)^n(t,11)^n(t,25),s=t=>n(t,7)^n(t,18)^r(t,3);return(t=>{const e="0123456789abcdef";let n="";for(let r=0;r<4*t.length;r++)n+=e.charAt(t[r>>2]>>8*(3-r%4)+4&15)+e.charAt(t[r>>2]>>8*(3-r%4)&15);return n})(((t,u)=>{const l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],p=new Array(64);let h,v,d,g,m,y,b,S,T,E,_,O;for(t[u>>5]|=128<<24-u%32,t[15+(u+64>>9<<4)]=u,T=0;T<t.length;T+=16){for(h=f[0],v=f[1],d=f[2],g=f[3],m=f[4],y=f[5],b=f[6],S=f[7],E=0;E<64;E++)p[E]=E<16?t[E+T]:e(e(e((w=p[E-2],n(w,17)^n(w,19)^r(w,10)),p[E-7]),s(p[E-15])),p[E-16]),_=e(e(e(e(S,c(m)),i(m,y,b)),l[E]),p[E]),O=e(a(h),o(h,v,d)),S=b,b=y,y=m,m=e(g,_),g=d,d=v,v=h,h=e(_,O);f[0]=e(h,f[0]),f[1]=e(v,f[1]),f[2]=e(d,f[2]),f[3]=e(g,f[3]),f[4]=e(m,f[4]),f[5]=e(y,f[5]),f[6]=e(b,f[6]),f[7]=e(S,f[7])}var w;return f})((t=>{const e=[];for(let n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<24-n%32;return e})(t=(t=>{t=t.replace(/\r\n/g,"\n");let e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e})(t)),8*t.length))}}},function(t,e,n){"use strict";t.exports=class{constructor({mockData:t}){this._mockData=t}get ready(){return Promise.resolve()}getCohortAllocations({experiments:t}){const{cohorts:e}=this._mockData;return Object.entries(e).reduce((e,[n,r])=>{if(t.includes(n)){const{data:t,cohortId:i}=r;e[n]={data:t,cohortId:i}}return e},{})}getExperimentsById(t){const{cohorts:e}=this._mockData;return Object.keys(e).reduce((e,n)=>(t.includes(n)&&Object.assign(e,this._getExperimentById(n)),e),{})}getExperiments(){const{cohorts:t}=this._mockData;return Object.keys(t).reduce((t,e)=>Object.assign(t,this._getExperimentById(e)),{})}_getExperimentById(t){const{cohorts:e}=this._mockData,n=e[t].cohortId,r=e[t].data||{};return{[t]:{experimentId:t,subjectIdType:e[t].subjectType,killed:!1,cohorts:[n],cohortData:{[n]:r},labels:r.labels||[]}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSubjectKeys=h,e.logCohorts=v,e.default=void 0;var r=n(78),i=a(n(188)),o=a(n(191));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e){var n=this,a=e.app,c=e.splitioWrappers,s=e.splitioOptions,u=e.subject,f=e.loadLocalStorage,p=void 0===f?i.default:f,h=e.readyTimeout,v=void 0===h?3e3:h,d=e.mockData,g=e.preloadLocation,m=e.usePreload,y=void 0===m||m;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,r.validateApp)(a),this._app=a,this._readyTimeout=v;var b=!1;y&&Object.entries(u).forEach((function(t){var e=l(t,2),r=e[0],i=e[1];b=p({app:n._app,idType:r,id:i,preloadLocation:g})})),this._subject=u,d&&(c=this._getMockWrappers(d,u)),this._splitioWrappers=c||Object.entries(u).reduce((function(t,e){var r=l(e,2),i=r[0],a=r[1];return t[i]=new o.default({app:n._app,idType:i,id:a,splitioOptions:s,preloadExists:b}),t}),{}),this._defaultSplitioWrapper=Object.values(this._splitioWrappers)[0],this._ready=new Promise((function(t){return Promise.race([Promise.all(Object.values(n._splitioWrappers).map((function(t){return t.ready}))),new Promise((function(t,e){return setTimeout((function(){return e(new Error("timeout"))}),n._readyTimeout)}))]).then(t).catch((function(e){console.log("Hivemind Client not ready from cache. Will return default values.",e),t("timeout")}))}))}var e,n,a;return e=t,(n=[{key:"setMockData",value:function(t){this._splitioWrappers=this._getMockWrappers(t,this._subject),this._defaultSplitioWrapper=Object.values(this._splitioWrappers)[0]}},{key:"_getMockWrappers",value:function(t,e){return Object.entries(e).reduce((function(e,n){var i=l(n,2),o=i[0];return i[1],e[o]=new r.MockWrapper({mockData:t}),e}),{})}},{key:"getCohorts",value:function(t){var e=t.experiments,n=void 0===e?[]:e,r=t.labels,i=void 0===r?[]:r,o=t.attributes,a=void 0===o?{}:o,c=t.windowOverride,s=void 0===c?window:c;if(n.length){var u=this._defaultSplitioWrapper.getExperimentsById(n);return this._getCohorts({experimentsMetadata:u,experiments:n,attributes:a,windowOverride:s})}if(i.length){var l=this._getExperimentsByLabel(i),f=Object.keys(l);return this._getCohorts({experimentsMetadata:l,experiments:f,attributes:a,windowOverride:s})}return console.log("No experiments or labels provided"),this._getCohorts({attributes:a,windowOverride:s})}},{key:"_getCohorts",value:function(t){var e=this,n=t.experimentsMetadata,i=void 0===n?{}:n,o=t.experiments,a=void 0===o?[]:o,c=t.attributes,u=void 0===c?{}:c,f=t.windowOverride,p=void 0===f?window:f,d=(0,r.groupEligibleExperimentsById)({subject:this._subject,experiments:a,experimentsMetadata:i}),g=d.experimentsByIdType,m=d.ineligibleExperiments,y={};Object.entries(g).map((function(t){var n=l(t,2),r=n[0],i=n[1],o=e._splitioWrappers[r].getCohortAllocations({experiments:i,attributes:u});y=s({},y,{},o)})),y=(0,r.updateCohortAllocationsWithEid)(y,this._app);var b=h(this._subject);v(y,b,p),Object.keys(y).forEach((function(t){return delete y[t].error}));var S=(0,r.generateDefaultAllocations)(m);return{cohorts:y=s({},y,{},S)}}},{key:"getExperiments",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.labels,n=void 0===e?[]:e,r=n.length?this._getExperimentsByLabel(n):this._defaultSplitioWrapper.getExperiments();return Object.values(r)}},{key:"_getExperimentsByLabel",value:function(t){var e=this._defaultSplitioWrapper.getExperiments();return Object.entries(e).reduce((function(e,n){var r=l(n,2),i=r[0],o=r[1];return t.every((function(t){return o.labels.includes(t)}))&&(e[i]=o),e}),{})}},{key:"getParameterValue",value:function(t){var e=t.parameter,n=t.defaultValue,i=t.attributes,o=void 0===i?{}:i,a=t.windowOverride,c=void 0===a?window:a,s=this._getExperimentsByLabel([this._app,r.hivemindConstants.PARAMETER_LABEL]),u=Object.entries(s).reduce((function(t,n){var r=l(n,2),i=r[0],o=r[1];return Object.values(o.cohortData).some((function(t){return e in t}))&&(t[i]=o),t}),{}),f=Object.keys(u),p=f.length;if(1===p){var h=this._getCohorts({experimentsMetadata:u,experiments:f,attributes:o,windowOverride:c}).cohorts[f[0]].data;return{parameterValue:e in h?h[e]:n}}return p>1&&console.log("Multiple experiments containing the same parameter definition."),{parameterValue:n}}},{key:"ready",get:function(){return this._ready}}])&&f(e.prototype,n),a&&f(e,a),t}();function h(t){var e={};return Object.entries(t).forEach((function(t){var n=l(t,2),i=n[0],o=n[1];e[i]=(0,r.getSubjectKey)({idType:i,id:o})})),e}function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;for(var i in n._expDataLayer=n._expDataLayer||[],t)n._expDataLayer.push({schema:"add_experiment_assignment",type:"abn",version:"v1",data:{experiment_id:i,variant_id:t[i].error?"error":t[i].cohortId}}),n._expDataLayer.push({schema:"add_impression",version:"v1",data:{eid:t[i].eid,properties:{hashedShopperId:e[r.hivemindConstants.idTypes.SHOPPER_ID],visitorGuid:e[r.hivemindConstants.idTypes.VISITOR_GUID]}}})}e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.app,n=t.idType,r=t.id,a=t.preloadLocation,c=void 0===a?"__splitCachePreload":a,s=t.windowOverride,u=void 0===s?window:s,l=t.loadData;return(l===void 0?i["default"]:l)({serializedData:u[c],userId:(0,o.getSubjectKey)({idType:n,id:r}),storagePrefix:"".concat(e,".").concat(n)}),!!u[c]};var r,i=(r=n(189))&&r.__esModule?r:{default:r},o=n(78)},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=((r=n(190))&&r.__esModule?r:{default:r}).default;e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.serializedData,n=void 0===e?{}:e,r=t.userId,i=void 0===r?"":r,o=t.storagePrefix,a=void 0===o?"":o,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage,s=a?"".concat(a,".").concat("SPLITIO"):"SPLITIO",u="".concat(s,".splits.till");if(0===Object.keys(n).length)return;var l=n.segmentsData,f=void 0===l?{}:l,p=n.since,h=void 0===p?0:p,v=n.splitsData,d=void 0===v?{}:v,g=n.usingSegmentsCount,m=void 0===g?0:g;if(h<=c.getItem(u))return;Object.keys(c).forEach((function(t){t.includes(s)&&c.removeItem(t)})),c.setItem(u,h),Object.keys(d).forEach((function(t){c.setItem("".concat(s,".split.").concat(t),d[t])})),c.setItem("".concat(s,".splits.usingSegments"),m),Object.keys(f).forEach((function(t){var e="".concat(i,".").concat(s,".segment.").concat(t);JSON.parse(f[t]).added.includes(i)&&"1"!==c.getItem(e)&&c.setItem(e,"1")}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(388),i=n(78);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e){var n,o=this,a=e.splitioOptions,c=e.app,s=e.id,u=e.idType,l=e.splitioClient,f=e.splitioManager,p=e.preloadExists;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a.core.key=(0,i.getSubjectKey)({id:s,idType:u}),a.storage={type:"LOCALSTORAGE",prefix:"".concat(c,".").concat(u)},l&&f||(n=(0,r.SplitFactory)(a)),l||(l=n.client()),f||(f=n.manager()),this._splitioClient=l,this._splitioManager=f,this._clientReady=new Promise((function(t){return o._splitioClient.on(p?o._splitioClient.Event.SDK_READY_FROM_CACHE:o._splitioClient.Event.SDK_READY,t)})),this._managerReady=new Promise((function(t){return o._splitioManager.on(p?o._splitioManager.Event.SDK_READY_FROM_CACHE:o._splitioManager.Event.SDK_READY,t)})),this._allReady=Promise.all([this._clientReady,this._managerReady])}var e,n,a;return e=t,(n=[{key:"getCohortAllocations",value:function(t){var e=t.experiments,n=void 0===e?[]:e,r=t.attributes,o=void 0===r?{}:r,a=this._splitioClient.getTreatmentsWithConfig(n,o);return(0,i.treatmentsToCohortAllocations)(a)}},{key:"getExperimentsById",value:function(t){var e=this,n=t.map((function(t){return e._splitioManager.split(t)}));return t.reduce((function(t,e,r){var o=n[r];return null!==o&&(t[e]=(0,i.transformSplitToExperiment)(o)),t}),{})}},{key:"getExperiments",value:function(){return this._splitioManager.splits().reduce((function(t,e){return t[e.name]=(0,i.transformSplitToExperiment)(e),t}),{})}},{key:"destroy",value:function(){var t=this;return this._splitioClient.destroy().then((function(){delete t._splitioClient}))}},{key:"ready",get:function(){return this._allReady}}])&&o(e.prototype,n),a&&o(e,a),t}();e.default=a},function(t,e,n){var r=n(193);t.exports=r},function(t,e,n){var r=n(194),i=Array.prototype;t.exports=function(t){var e=t.concat;return t===i||t instanceof Array&&e===i.concat?r:e}},function(t,e,n){n(124);var r=n(34);t.exports=r("Array").concat},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(23),i=n(43);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(129);t.exports=r},function(t,e,n){n(4)({target:"Object",stat:!0,sham:!n(30)},{create:n(74)})},function(t,e,n){var r=n(200);t.exports=r},function(t,e,n){n(201);var r=n(15);t.exports=r.Object.assign},function(t,e,n){var r=n(4),i=n(202);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,n){"use strict";var r=n(30),i=n(21),o=n(83),a=n(108),c=n(98),s=n(44),u=n(79),l=Object.assign,f=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||"abcdefghijklmnopqrst"!=o(l({},e)).join("")}))?function(t,e){for(var n=s(t),i=arguments.length,l=1,f=a.f,p=c.f;i>l;)for(var h,v=u(arguments[l++]),d=f?o(v).concat(f(v)):o(v),g=d.length,m=0;g>m;)h=d[m++],r&&!p.call(v,h)||(n[h]=v[h]);return n}:l},function(t,e,n){n(47),n(58);var r=n(138);t.exports=r},function(t,e,n){var r=n(23),i=n(134),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){"use strict";var r=n(135).IteratorPrototype,i=n(74),o=n(69),a=n(56),c=n(55),s=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,u,!1,!0),c[u]=s,t}},function(t,e,n){"use strict";var r=n(112),i=n(57);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){var r=n(31);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(81),i=n(70),o=function(t){return function(e,n){var o,a,c=String(i(e)),s=r(n),u=c.length;return s<0||s>=u?t?"":void 0:(o=c.charCodeAt(s))<55296||o>56319||s+1===u||(a=c.charCodeAt(s+1))<56320||a>57343?t?c.charAt(s):o:t?c.slice(s,s+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){var r=n(211);t.exports=r},function(t,e,n){var r=n(212),i=Array.prototype;t.exports=function(t){var e=t.map;return t===i||t instanceof Array&&e===i.map?r:e}},function(t,e,n){n(213);var r=n(34);t.exports=r("Array").map},function(t,e,n){"use strict";var r=n(4),i=n(62).map,o=n(73),a=n(48),c=o("map"),s=a("map");r({target:"Array",proto:!0,forced:!c||!s},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(215);t.exports=r},function(t,e,n){n(216);var r=n(15);r.JSON||(r.JSON={stringify:JSON.stringify}),t.exports=function(t,e,n){return r.JSON.stringify.apply(null,arguments)}},function(t,e,n){var r=n(4),i=n(39),o=n(21),a=i("JSON","stringify"),c=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,l=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return s.test(t)&&!u.test(i)||u.test(t)&&!s.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},f=o((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&r({target:"JSON",stat:!0,forced:f},{stringify:function(t,e,n){var r=a.apply(null,arguments);return"string"==typeof r?r.replace(c,l):r}})},function(t,e,n){var r=n(218);t.exports=r},function(t,e,n){var r=n(219),i=Array.prototype;t.exports=function(t){var e=t.filter;return t===i||t instanceof Array&&e===i.filter?r:e}},function(t,e,n){n(220);var r=n(34);t.exports=r("Array").filter},function(t,e,n){"use strict";var r=n(4),i=n(62).filter,o=n(73),a=n(48),c=o("filter"),s=a("filter");r({target:"Array",proto:!0,forced:!c||!s},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(222);t.exports=r},function(t,e,n){var r=n(223),i=Array.prototype;t.exports=function(t){var e=t.splice;return t===i||t instanceof Array&&e===i.splice?r:e}},function(t,e,n){n(224);var r=n(34);t.exports=r("Array").splice},function(t,e,n){"use strict";var r=n(4),i=n(106),o=n(81),a=n(52),c=n(44),s=n(100),u=n(72),l=n(73),f=n(48),p=l("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,d=Math.min;r({target:"Array",proto:!0,forced:!p||!h},{splice:function(t,e){var n,r,l,f,p,h,g=c(this),m=a(g.length),y=i(t,m),b=arguments.length;if(0===b?n=r=0:1===b?(n=0,r=m-y):(n=b-2,r=d(v(o(e),0),m-y)),m+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=s(g,r),f=0;f<r;f++)(p=y+f)in g&&u(l,f,g[p]);if(l.length=r,n<r){for(f=y;f<m-r;f++)h=f+n,(p=f+r)in g?g[h]=g[p]:delete g[h];for(f=m;f>m-r+n;f--)delete g[f-1]}else if(n>r)for(f=m-r;f>y;f--)h=f+n-1,(p=f+r-1)in g?g[h]=g[p]:delete g[h];for(f=0;f<n;f++)g[f+y]=arguments[f+2];return g.length=m-r+n,l}})},function(t,e,n){var r=n(226);t.exports=r},function(t,e,n){n(139),n(58),n(47);var r=n(114);t.exports=r.f("iterator")},function(t,e,n){var r=n(228);n(245),n(246),n(247),n(248),n(249),t.exports=r},function(t,e,n){n(124),n(85),n(140),n(230),n(231),n(232),n(233),n(139),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244);var r=n(15);t.exports=r.Symbol},function(t,e,n){var r=n(46),i=n(115).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){n(27)("asyncIterator")},function(t,e){},function(t,e,n){n(27)("hasInstance")},function(t,e,n){n(27)("isConcatSpreadable")},function(t,e,n){n(27)("match")},function(t,e,n){n(27)("matchAll")},function(t,e,n){n(27)("replace")},function(t,e,n){n(27)("search")},function(t,e,n){n(27)("species")},function(t,e,n){n(27)("split")},function(t,e,n){n(27)("toPrimitive")},function(t,e,n){n(27)("toStringTag")},function(t,e,n){n(27)("unscopables")},function(t,e,n){n(56)(Math,"Math",!0)},function(t,e,n){var r=n(23);n(56)(r.JSON,"JSON",!0)},function(t,e,n){n(27)("asyncDispose")},function(t,e,n){n(27)("dispose")},function(t,e,n){n(27)("observable")},function(t,e,n){n(27)("patternMatch")},function(t,e,n){n(27)("replaceAll")},function(t,e,n){var r=n(251);t.exports=r},function(t,e,n){n(252);var r=n(15);t.exports=r.Number.isFinite},function(t,e,n){n(4)({target:"Number",stat:!0},{isFinite:n(253)})},function(t,e,n){var r=n(23).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},function(t,e,n){var r=n(141);t.exports=r},function(t,e,n){var r=n(4),i=n(44),o=n(83);r({target:"Object",stat:!0,forced:n(21)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},function(t,e,n){var r=n(142);t.exports=r},function(t,e,n){n(4)({target:"Array",stat:!0},{isArray:n(71)})},function(t,e,n){n(47);var r=n(259),i=n(57),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===o||t instanceof Array&&e===o.forEach||a.hasOwnProperty(i(t))?r:e}},function(t,e,n){var r=n(260);t.exports=r},function(t,e,n){n(261);var r=n(34);t.exports=r("Array").forEach},function(t,e,n){"use strict";var r=n(4),i=n(262);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(t,e,n){"use strict";var r=n(62).forEach,i=n(86),o=n(48),a=i("forEach"),c=o("forEach");t.exports=a&&c?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){var r=n(143);t.exports=r},function(t,e,n){n(265);var r=n(34);t.exports=r("Array").slice},function(t,e,n){"use strict";var r=n(4),i=n(31),o=n(71),a=n(106),c=n(52),s=n(46),u=n(72),l=n(24),f=n(73),p=n(48),h=f("slice"),v=p("slice",{ACCESSORS:!0,0:0,1:2}),d=l("species"),g=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!h||!v},{slice:function(t,e){var n,r,l,f=s(this),p=c(f.length),h=a(t,p),v=a(void 0===e?p:e,p);if(o(f)&&("function"!=typeof(n=f.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[d])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(f,h,v);for(r=new(void 0===n?Array:n)(m(v-h,0)),l=0;h<v;h++,l++)h in f&&u(r,l,f[h]);return r.length=l,r}})},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,u=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&h())}function h(){if(!l){var t=c(p);l=!0;for(var e=u.length;e;){for(s=u,u=[];++f<e;)s&&s[f].run();f=-1,e=u.length}s=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function d(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new v(t,e)),1!==u.length||l||c(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(144);t.exports=r},function(t,e,n){n(269);var r=n(34);t.exports=r("Array").indexOf},function(t,e,n){"use strict";var r=n(4),i=n(105).indexOf,o=n(86),a=n(48),c=[].indexOf,s=!!c&&1/[1].indexOf(1,-0)<0,u=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:s||!u||!l},{indexOf:function(t){return s?c.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(145);t.exports=r},function(t,e,n){var r=n(4),i=n(30);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(41).f})},function(t,e,n){var r=n(273);t.exports=r},function(t,e,n){var r=n(274),i=String.prototype;t.exports=function(t){var e=t.trim;return"string"==typeof t||t===i||t instanceof String&&e===i.trim?r:e}},function(t,e,n){n(275);var r=n(34);t.exports=r("String").trim},function(t,e,n){"use strict";var r=n(4),i=n(146).trim;r({target:"String",proto:!0,forced:n(276)("trim")},{trim:function(){return i(this)}})},function(t,e,n){var r=n(21),i=n(116);t.exports=function(t){return r((function(){return!!i[t]()||"​᠎"!="​᠎"[t]()||i[t].name!==t}))}},function(t,e,n){var r=n(147);t.exports=r},function(t,e,n){"use strict";var r=n(148),i=n(152);t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},function(t,e,n){var r=n(21);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,n){n(47);var r=n(281),i=n(57),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.keys;return t===o||t instanceof Array&&e===o.keys||a.hasOwnProperty(i(t))?r:e}},function(t,e,n){var r=n(282);t.exports=r},function(t,e,n){n(109);var r=n(34);t.exports=r("Array").keys},function(t,e,n){n(47);var r=n(284),i=n(57),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.values;return t===o||t instanceof Array&&e===o.values||a.hasOwnProperty(i(t))?r:e}},function(t,e,n){var r=n(285);t.exports=r},function(t,e,n){n(109);var r=n(34);t.exports=r("Array").values},function(t,e,n){var r=n(142);t.exports=r},function(t,e,n){var r=n(288);t.exports=r},function(t,e,n){n(58),n(289);var r=n(15);t.exports=r.Array.from},function(t,e,n){var r=n(4),i=n(290);r({target:"Array",stat:!0,forced:!n(155)((function(t){Array.from(t)}))},{from:i})},function(t,e,n){"use strict";var r=n(36),i=n(44),o=n(151),a=n(150),c=n(52),s=n(72),u=n(113);t.exports=function(t){var e,n,l,f,p,h,v=i(t),d="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,y=void 0!==m,b=u(v),S=0;if(y&&(m=r(m,g>2?arguments[2]:void 0,2)),null==b||d==Array&&a(b))for(n=new d(e=c(v.length));e>S;S++)h=y?m(v[S],S):v[S],s(n,S,h);else for(p=(f=b.call(v)).next,n=new d;!(l=p.call(f)).done;S++)h=y?o(f,m,[l.value,S],!0):l.value,s(n,S,h);return n.length=S,n}},function(t,e,n){n(47),n(58);var r=n(292);t.exports=r},function(t,e,n){var r=n(57),i=n(24),o=n(55),a=i("iterator");t.exports=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){var r=n(143);t.exports=r},function(t,e,n){var r=n(295);t.exports=r},function(t,e,n){n(85),n(58),n(47),n(296),n(299),n(300);var r=n(15);t.exports=r.Promise},function(t,e,n){"use strict";var r,i,o,a,c=n(4),s=n(22),u=n(23),l=n(39),f=n(156),p=n(76),h=n(153),v=n(56),d=n(154),g=n(31),m=n(28),y=n(117),b=n(54),S=n(134),T=n(29),E=n(155),_=n(77),O=n(157).set,w=n(297),x=n(159),A=n(298),k=n(118),N=n(160),j=n(61),R=n(126),I=n(24),C=n(103),D=I("species"),L="Promise",M=j.get,P=j.set,F=j.getterFor(L),G=f,U=u.TypeError,K=u.document,B=u.process,H=l("fetch"),W=k.f,z=W,Y="process"==b(B),q=!!(K&&K.createEvent&&u.dispatchEvent),V=R(L,(function(){if(!(S(G)!==String(G))){if(66===C)return!0;if(!Y&&"function"!=typeof PromiseRejectionEvent)return!0}if(s&&!G.prototype.finally)return!0;if(C>=51&&/native code/.test(G))return!1;var t=G.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[D]=e,!(t.then((function(){}))instanceof e)})),Q=V||!E((function(t){G.all(t).catch((function(){}))})),J=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},$=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;w((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var c,s,u,l=r[a++],f=o?l.ok:l.fail,p=l.resolve,h=l.reject,v=l.domain;try{f?(o||(2===e.rejection&&et(t,e),e.rejection=1),!0===f?c=i:(v&&v.enter(),c=f(i),v&&(v.exit(),u=!0)),c===l.promise?h(U("Promise-chain cycle")):(s=J(c))?s.call(c,p,h):p(c)):h(i)}catch(t){v&&!u&&v.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Z(t,e)}))}},X=function(t,e,n){var r,i;q?((r=K.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},(i=u["on"+t])?i(r):"unhandledrejection"===t&&A("Unhandled promise rejection",n)},Z=function(t,e){O.call(u,(function(){var n,r=e.value;if(tt(e)&&(n=N((function(){Y?B.emit("unhandledRejection",r,t):X("unhandledrejection",t,r)})),e.rejection=Y||tt(e)?2:1,n.error))throw n.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){O.call(u,(function(){Y?B.emit("rejectionHandled",t):X("rejectionhandled",t,e.value)}))},nt=function(t,e,n,r){return function(i){t(e,n,i,r)}},rt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,$(t,e,!0))},it=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw U("Promise can't be resolved itself");var i=J(n);i?w((function(){var r={done:!1};try{i.call(n,nt(it,t,r,e),nt(rt,t,r,e))}catch(n){rt(t,r,n,e)}})):(e.value=n,e.state=1,$(t,e,!1))}catch(n){rt(t,{done:!1},n,e)}}};V&&(G=function(t){y(this,G,L),m(t),r.call(this);var e=M(this);try{t(nt(it,this,e),nt(rt,this,e))}catch(t){rt(this,e,t)}},(r=function(t){P(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(G.prototype,{then:function(t,e){var n=F(this),r=W(_(this,G));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Y?B.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&$(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=M(t);this.promise=t,this.resolve=nt(it,t,e),this.reject=nt(rt,t,e)},k.f=W=function(t){return t===G||t===o?new i(t):z(t)},s||"function"!=typeof f||(a=f.prototype.then,p(f.prototype,"then",(function(t,e){var n=this;return new G((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof H&&c({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return x(G,H.apply(u,arguments))}}))),c({global:!0,wrap:!0,forced:V},{Promise:G}),v(G,L,!1,!0),d(L),o=l(L),c({target:L,stat:!0,forced:V},{reject:function(t){var e=W(this);return e.reject.call(void 0,t),e.promise}}),c({target:L,stat:!0,forced:s||V},{resolve:function(t){return x(s&&this===o?G:this,t)}}),c({target:L,stat:!0,forced:Q},{all:function(t){var e=this,n=W(e),r=n.resolve,i=n.reject,o=N((function(){var n=m(e.resolve),o=[],a=0,c=1;T(t,(function(t){var s=a++,u=!1;o.push(void 0),c++,n.call(e,t).then((function(t){u||(u=!0,o[s]=t,--c||r(o))}),i)})),--c||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=W(e),r=n.reject,i=N((function(){var i=m(e.resolve);T(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(t,e,n){var r,i,o,a,c,s,u,l,f=n(23),p=n(68).f,h=n(54),v=n(157).set,d=n(158),g=f.MutationObserver||f.WebKitMutationObserver,m=f.process,y=f.Promise,b="process"==h(m),S=p(f,"queueMicrotask"),T=S&&S.value;T||(r=function(){var t,e;for(b&&(t=m.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},b?a=function(){m.nextTick(r)}:g&&!d?(c=!0,s=document.createTextNode(""),new g(r).observe(s,{characterData:!0}),a=function(){s.data=c=!c}):y&&y.resolve?(u=y.resolve(void 0),l=u.then,a=function(){l.call(u,r)}):a=function(){v.call(f,r)}),t.exports=T||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,n){var r=n(23);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e,n){"use strict";var r=n(4),i=n(28),o=n(118),a=n(160),c=n(29);r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=o.f(e),r=n.resolve,s=n.reject,u=a((function(){var n=i(e.resolve),o=[],a=0,s=1;c(t,(function(t){var i=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[i]={status:"fulfilled",value:t},--s||r(o))}),(function(t){c||(c=!0,o[i]={status:"rejected",reason:t},--s||r(o))}))})),--s||r(o)}));return u.error&&s(u.value),n.promise}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(156),a=n(21),c=n(39),s=n(77),u=n(159),l=n(76);r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=s(this,c("Promise")),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then((function(){return n}))}:t,n?function(n){return u(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype.finally||l(o.prototype,"finally",c("Promise").prototype.finally)},function(t,e,n){var r=n(302);t.exports=r},function(t,e,n){n(303);var r=n(15);t.exports=r.Number.isNaN},function(t,e,n){n(4)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(305);t.exports=r},function(t,e,n){n(306);var r=n(15);t.exports=r.parseInt},function(t,e,n){var r=n(4),i=n(307);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(t,e,n){var r=n(23),i=n(146).trim,o=n(116),a=r.parseInt,c=/^[+-]?0[Xx]/,s=8!==a(o+"08")||22!==a(o+"0x16");t.exports=s?function(t,e){var n=i(String(t));return a(n,e>>>0||(c.test(n)?16:10))}:a},function(t,e,n){var r=n(309);t.exports=r},function(t,e,n){var r=n(310),i=Array.prototype;t.exports=function(t){var e=t.reduce;return t===i||t instanceof Array&&e===i.reduce?r:e}},function(t,e,n){n(311);var r=n(34);t.exports=r("Array").reduce},function(t,e,n){"use strict";var r=n(4),i=n(312).left,o=n(86),a=n(48),c=o("reduce"),s=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!c||!s},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(28),i=n(44),o=n(79),a=n(52),c=function(t){return function(e,n,c,s){r(n);var u=i(e),l=o(u),f=a(u.length),p=t?f-1:0,h=t?-1:1;if(c<2)for(;;){if(p in l){s=l[p],p+=h;break}if(p+=h,t?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:f>p;p+=h)p in l&&(s=n(s,l[p],p,u));return s}};t.exports={left:c(!1),right:c(!0)}},function(t,e,n){var r=n(161);t.exports=r},function(t,e,n){n(315);var r=n(34);t.exports=r("Function").bind},function(t,e,n){n(4)({target:"Function",proto:!0},{bind:n(162)})},function(t,e,n){var r=n(163);t.exports=r},function(t,e,n){var r=n(4),i=n(39),o=n(28),a=n(16),c=n(31),s=n(74),u=n(162),l=n(21),f=i("Reflect","construct"),p=l((function(){function t(){}return!(f((function(){}),[],t)instanceof t)})),h=!l((function(){f((function(){}))})),v=p||h;r({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!p)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(t,r))}var i=n.prototype,l=s(c(i)?i:Object.prototype),v=Function.apply.call(t,l,e);return c(v)?v:l}})},function(t,e,n){var r=n(129);t.exports=r},function(t,e,n){var r=n(320);t.exports=r},function(t,e,n){n(321);var r=n(15);t.exports=r.Object.setPrototypeOf},function(t,e,n){n(4)({target:"Object",stat:!0},{setPrototypeOf:n(137)})},function(t,e,n){var r=n(323);t.exports=r},function(t,e,n){n(324);var r=n(15);t.exports=r.Object.getPrototypeOf},function(t,e,n){var r=n(4),i=n(21),o=n(44),a=n(111),c=n(136);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!c},{getPrototypeOf:function(t){return a(o(t))}})},function(t,e,n){n(326);var r=n(15);t.exports=r.setTimeout},function(t,e,n){var r=n(4),i=n(23),o=n(104),a=[].slice,c=function(t){return function(e,n){var r=arguments.length>2,i=r?a.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:c(i.setTimeout),setInterval:c(i.setInterval)})},function(t,e,n){var r=n(145);t.exports=r},function(t,e,n){var r=n(329);t.exports=r},function(t,e,n){n(330);var r=n(15).Object,i=t.exports=function(t,e){return r.defineProperties(t,e)};r.defineProperties.sham&&(i.sham=!0)},function(t,e,n){var r=n(4),i=n(30);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(130)})},function(t,e,n){var r=n(332);t.exports=r},function(t,e,n){n(333);var r=n(15);t.exports=r.Object.getOwnPropertyDescriptors},function(t,e,n){var r=n(4),i=n(30),o=n(334),a=n(46),c=n(68),s=n(72);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),i=c.f,u=o(r),l={},f=0;u.length>f;)void 0!==(n=i(r,e=u[f++]))&&s(l,e,n);return l}})},function(t,e,n){var r=n(39),i=n(115),o=n(108),a=n(16);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(336);t.exports=r},function(t,e,n){n(337);var r=n(15).Object,i=t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)};r.getOwnPropertyDescriptor.sham&&(i.sham=!0)},function(t,e,n){var r=n(4),i=n(21),o=n(46),a=n(68).f,c=n(30),s=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!c||s,sham:!c},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},function(t,e,n){var r=n(164);t.exports=r},function(t,e,n){var r=n(340);t.exports=r},function(t,e,n){var r=n(341),i=n(343),o=Array.prototype,a=String.prototype;t.exports=function(t){var e=t.includes;return t===o||t instanceof Array&&e===o.includes?r:"string"==typeof t||t===a||t instanceof String&&e===a.includes?i:e}},function(t,e,n){n(342);var r=n(34);t.exports=r("Array").includes},function(t,e,n){"use strict";var r=n(4),i=n(105).includes,o=n(133);r({target:"Array",proto:!0,forced:!n(48)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){n(344);var r=n(34);t.exports=r("String").includes},function(t,e,n){"use strict";var r=n(4),i=n(345),o=n(70);r({target:"String",proto:!0,forced:!n(347)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(346);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(31),i=n(54),o=n(24)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(24)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){var r=n(349);t.exports=r},function(t,e,n){n(350);var r=n(15);t.exports=r.Date.now},function(t,e,n){n(4)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(t,e,n){var r=n(144);t.exports=r},function(t,e,n){var r=n(164);t.exports=r},function(t,e,n){var r=n(141);t.exports=r},function(t,e,n){var r=n(355);t.exports=r},function(t,e,n){n(356),n(85),n(58),n(47);var r=n(15);t.exports=r.Set},function(t,e,n){"use strict";var r=n(148),i=n(152);t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},function(t,e,n){var r=n(358);t.exports=r},function(t,e,n){var r=n(359),i=Array.prototype;t.exports=function(t){var e=t.some;return t===i||t instanceof Array&&e===i.some?r:e}},function(t,e,n){n(360);var r=n(34);t.exports=r("Array").some},function(t,e,n){"use strict";var r=n(4),i=n(62).some,o=n(86),a=n(48),c=o("some"),s=a("some");r({target:"Array",proto:!0,forced:!c||!s},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r,i;
/**
 * @license utfx (c) 2014 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/utfx for details
 */void 0===(i="function"==typeof(r=function(){"use strict";Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var t={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<128?e(127&n):n<2048?(e(n>>6&31|192),e(63&n|128)):n<65536?(e(n>>12&15|224),e(n>>6&63|128),e(63&n|128)):(e(n>>18&7|240),e(n>>12&63|128),e(n>>6&63|128),e(63&n|128)),n=null},decodeUTF8:function(t,e){for(var n,r,i,o,a=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(n=t());)if(0==(128&n))e(n);else if(192==(224&n))null===(r=t())&&a([n,r]),e((31&n)<<6|63&r);else if(224==(240&n))(null===(r=t())||null===(i=t()))&&a([n,r,i]),e((15&n)<<12|(63&r)<<6|63&i);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=t())||null===(i=t())||null===(o=t()))&&a([n,r,i,o]),e((7&n)<<18|(63&r)<<12|(63&i)<<6|63&o)}},UTF16toUTF8:function(t,e){for(var n,r=null;null!==(n=null!==r?r:t());)n>=55296&&n<=57343&&null!==(r=t())&&r>=56320&&r<=57343?(e(1024*(n-55296)+r-56320+65536),r=null):e(n);null!==r&&e(r)},UTF8toUTF16:function(t,e){var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<=65535?e(n):(e(55296+((n-=65536)>>10)),e(n%1024+56320)),n=null},encodeUTF16toUTF8:function(e,n){t.UTF16toUTF8(e,(function(e){t.encodeUTF8(e,n)}))},decodeUTF8toUTF16:function(e,n){t.decodeUTF8(e,(function(e){t.UTF8toUTF16(e,n)}))},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(t){for(var e,n=0;null!==(e=t());)n+=e<128?1:e<2048?2:e<65536?3:4;return n},calculateUTF16asUTF8:function(e){var n=0,r=0;return t.UTF16toUTF8(e,(function(t){++n,r+=t<128?1:t<2048?2:t<65536?3:4})),[n,r]}},e=String.fromCharCode;return t.arraySource=function(t){if(!Array.isArray(t))throw TypeError("Illegal argument: "+typeof t);var e=0;return function(){return e>=t.length?null:t[e++]}},t.arrayDestination=function(t){if(!Array.isArray(t))throw TypeError("Illegal argument: "+typeof t);return Array.prototype.push.bind(t)},t.stringSource=function(t){if("string"!=typeof t)throw TypeError("Illegal argument: "+typeof t);var e=0;return function(){return e>=t.length?null:t.charCodeAt(e++)}},t.stringDestination=function(){var t=[],n=[];return function(){if(0===arguments.length)return n.join("")+e.apply(String,t);t.length+arguments.length>1024&&(n.push(e.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}},t.assertCharCode=function(t){if("number"!=typeof t||t!=t)throw TypeError("Illegal char code: "+typeof t);if(t<0||t>65535)throw RangeError("Illegal char code: "+t);return t},t.assertCodePoint=function(e){if("number"!=typeof e||e!=e)throw TypeError("Illegal code point: "+typeof e);if(e<0||e>t.MAX_CODEPOINT)throw RangeError("Illegal code point: "+e);return e},t.fromCodePoint=function(e){var n,r=0,i=arguments,o=i.length;return t.UTF8toUTF16((function(){return r<o?t.assertCodePoint(i[r++]):null}),n=t.stringDestination()),n()},t.codePointAt=function(e,n){if("string"!=typeof e&&!(e&&e instanceof String)||"number"!=typeof n)throw TypeError("Illegal arguments: "+typeof e+", "+typeof n);var r,i;if(!(n<0||n>=(r=e.length)))return t.UTF16toUTF8((function(){return void 0===i&&n<r?e.charCodeAt(n++):null}),(function(t){i=t})),i},t.polyfill=function(e){return String.fromCodePoint&&!e||(String.fromCodePoint=t.fromCodePoint),String.prototype.codePointAt&&!e||(String.prototype.codePointAt=function(e){return t.codePointAt(this,e)}),t},t})?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){var r=n(147);n(363),n(365),n(367),n(369),n(370),n(371),n(372),n(373),n(374),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),t.exports=r},function(t,e,n){n(4)({target:"Map",stat:!0},{from:n(364)})},function(t,e,n){"use strict";var r=n(28),i=n(36),o=n(29);t.exports=function(t){var e,n,a,c,s=arguments.length,u=s>1?arguments[1]:void 0;return r(this),(e=void 0!==u)&&r(u),null==t?new this:(n=[],e?(a=0,c=i(u,s>2?arguments[2]:void 0,2),o(t,(function(t){n.push(c(t,a++))}))):o(t,n.push,n),new this(n))}},function(t,e,n){n(4)({target:"Map",stat:!0},{of:n(366)})},function(t,e,n){"use strict";t.exports=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(368);r({target:"Map",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},function(t,e,n){"use strict";var r=n(16),i=n(28);t.exports=function(){for(var t,e=r(this),n=i(e.delete),o=!0,a=0,c=arguments.length;a<c;a++)t=n.call(e,arguments[a]),o=o&&t;return!!o}},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(36),c=n(45),s=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{every:function(t){var e=o(this),n=c(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return!s(n,(function(t,n){if(!r(n,t,e))return s.stop()}),void 0,!0,!0).stopped}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(39),a=n(16),c=n(28),s=n(36),u=n(77),l=n(45),f=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{filter:function(t){var e=a(this),n=l(e),r=s(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),p=c(i.set);return f(n,(function(t,n){r(n,t,e)&&p.call(i,t,n)}),void 0,!0,!0),i}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(36),c=n(45),s=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{find:function(t){var e=o(this),n=c(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return s(n,(function(t,n){if(r(n,t,e))return s.stop(n)}),void 0,!0,!0).result}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(36),c=n(45),s=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{findKey:function(t){var e=o(this),n=c(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return s(n,(function(t,n){if(r(n,t,e))return s.stop(t)}),void 0,!0,!0).result}})},function(t,e,n){"use strict";var r=n(4),i=n(29),o=n(28);r({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;o(e);var r=o(n.has),a=o(n.get),c=o(n.set);return i(t,(function(t){var i=e(t);r.call(n,i)?a.call(n,i).push(t):c.call(n,i,[t])})),n}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(45),c=n(375),s=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{includes:function(t){return s(a(o(this)),(function(e,n){if(c(n,t))return s.stop()}),void 0,!0,!0).stopped}})},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(4),i=n(29),o=n(28);r({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;o(e);var r=o(n.set);return i(t,(function(t){r.call(n,e(t),t)})),n}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(45),c=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{keyOf:function(t){return c(a(o(this)),(function(e,n){if(n===t)return c.stop(e)}),void 0,!0,!0).result}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(39),a=n(16),c=n(28),s=n(36),u=n(77),l=n(45),f=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{mapKeys:function(t){var e=a(this),n=l(e),r=s(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),p=c(i.set);return f(n,(function(t,n){p.call(i,r(n,t,e),n)}),void 0,!0,!0),i}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(39),a=n(16),c=n(28),s=n(36),u=n(77),l=n(45),f=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{mapValues:function(t){var e=a(this),n=l(e),r=s(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),p=c(i.set);return f(n,(function(t,n){p.call(i,t,r(n,t,e))}),void 0,!0,!0),i}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(28),c=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{merge:function(t){for(var e=o(this),n=a(e.set),r=0;r<arguments.length;)c(arguments[r++],n,e,!0);return e}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(28),c=n(45),s=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{reduce:function(t){var e=o(this),n=c(e),r=arguments.length<2,i=r?void 0:arguments[1];if(a(t),s(n,(function(n,o){r?(r=!1,i=o):i=t(i,o,n,e)}),void 0,!0,!0),r)throw TypeError("Reduce of empty map with no initial value");return i}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(36),c=n(45),s=n(29);r({target:"Map",proto:!0,real:!0,forced:i},{some:function(t){var e=o(this),n=c(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return s(n,(function(t,n){if(r(n,t,e))return s.stop()}),void 0,!0,!0).stopped}})},function(t,e,n){"use strict";var r=n(4),i=n(22),o=n(16),a=n(28);r({target:"Map",proto:!0,real:!0,forced:i},{update:function(t,e){var n=o(this),r=arguments.length;a(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");var c=i?n.get(t):a(r>2?arguments[2]:void 0)(t,n);return n.set(t,e(c,t,n)),n}})},function(t,e,n){"use strict";n(4)({target:"Map",proto:!0,real:!0,forced:n(22)},{upsert:n(165)})},function(t,e,n){"use strict";n(4)({target:"Map",proto:!0,real:!0,forced:n(22)},{updateOrInsert:n(165)})},function(t,e,n){var r=n(161);t.exports=r},function(t,e,n){var r=n(163);t.exports=r},function(t,e,n){"use strict";n.r(e),n.d(e,"SplitFactory",(function(){return ic}));var r=n(0),i=n.n(r),o=n(37),a=n.n(o),c=n(10),s=n.n(c),u=n(25),l=n.n(u),f=n(13),p=n.n(f),h=function(t){return null!=t&&"function"==typeof t.then},v=n(1),d=n(7),g=n.n(d),m=n(2),y=Object(m.b)("",{displayAllErrors:!0}),b={};function S(t){b[t]&&b[t]--,0===b[t]&&delete b[t]}var T=Object(m.b)("");var E=Object(m.b)(""),_=/^[a-zA-Z0-9][-_.:a-zA-Z0-9]{0,79}$/;function O(t,e){if(null==t)E.error("".concat(e,": you passed a null or undefined event_type, event_type must be a non-empty string."));else if(Object(v.k)(t))if(0===t.length)E.error("".concat(e,": you passed an empty event_type, event_type must be a non-empty string."));else{if(_.test(t))return t;var n;E.error(i()(n="".concat(e,': you passed "')).call(n,t,'", event_type must adhere to the regular expression /^[a-zA-Z0-9][-_.:a-zA-Z0-9]{0,79}$/g. This means an event_type must be alphanumeric, cannot be more than 80 characters long, and can only include a dash, underscore, period, or colon as separators of alphanumeric characters.'))}else E.error("".concat(e,": you passed an invalid event_type, event_type must be a non-empty string."));return!1}var w=Object(m.b)("");function x(t,e){return Object(v.i)(t)||null==t?t:(w.error("".concat(e,": value must be a finite number.")),!1)}var A=Object(m.b)(""),k=0,N=2,j=4,R=8;function I(t,e){if(null==t)return{properties:null,size:1024};if(!Object(v.j)(t))return A.error("".concat(e,": properties must be a plain object.")),{properties:!1,size:1024};var n=g()(t),r=Object(v.m)(t),o={properties:r,size:1024};n.length>300&&A.warn("".concat(e,": Event has more than 300 properties. Some of them will be trimmed when processed."));for(var a=0;a<n.length;a++){o.size+=n[a].length*N;var c,s=r[n[a]],u=Object(v.k)(s),l=Object(v.i)(s),f=Object(v.h)(s),p=null===s;if(!(u||l||f||p))r[n[a]]=null,s=null,p=!0,A.warn(i()(c="".concat(e,": Property ")).call(c,n[a]," is of invalid type. Setting value to null."));if(p?o.size+=k:l?o.size+=R:f?o.size+=j:u&&(o.size+=s.length*N),o.size>32768){A.error("".concat(e,": The maximum size allowed for the properties is 32768 bytes, which was exceeded. Event not queued.")),o.properties=!1;break}}return o}var C=n(90),D=n.n(C),L=Object(m.b)("");function M(t,e,n){var r,o;if(null==t)L.error(i()(r=i()(o="".concat(e,": you passed a null or undefined ")).call(o,n,", ")).call(r,n," must be a non-empty string."));else if(Object(v.i)(t)||Object(v.k)(t)){var a,c,s;if(Object(v.i)(t))return L.warn(i()(a=i()(c="".concat(e,": ")).call(c,n,' "')).call(a,t,'" is not of type string, converting.')),Object(v.p)(t);if((t=D()(t).call(t)).length>0&&t.length<=250)return t;if(0===t.length)L.error(i()(s="".concat(e,": you passed an empty string, ")).call(s,n," must be a non-empty string."));else if(t.length>250){var u,l;L.error(i()(u=i()(l="".concat(e,": ")).call(l,n," too long, ")).call(u,n," must be 250 characters or less."))}}else{var f,p;L.error(i()(f=i()(p="".concat(e,": you passed an invalid ")).call(p,n," type, ")).call(f,n," must be a non-empty string."))}return!1}function P(t,e){if(Object(v.j)(t)){var n=M(t.matchingKey,e,"matchingKey"),r=M(t.bucketingKey,e,"bucketingKey");return n&&r?{matchingKey:n,bucketingKey:r}:(L.error("".concat(e,": Key must be an object with bucketingKey and matchingKey with valid string properties.")),!1)}return M(t,e,"key")}var F=Object(m.b)(""),G=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/;function U(t,e){if(null==t)F.error("".concat(e,": you passed a null or undefined split name, split name must be a non-empty string."));else if(Object(v.k)(t)){var n;if(G.test(t))F.warn(i()(n="".concat(e,': split name "')).call(n,t,'" has extra whitespace, trimming.')),t=D()(t).call(t);if(t.length>0)return t;F.error("".concat(e,": you passed an empty split name, split name must be a non-empty string."))}else F.error("".concat(e,": you passed an invalid split name, split name must be a non-empty string."));return!1}function K(t,e,n,r){var o;if(t.get(t.constants.READY,!0)&&("definition not found"===n||null==n))return F.warn(i()(o="".concat(r,': you passed "')).call(o,e,'" that does not exist in this environment, please double check what Splits exist in the web console.')),!1;return!0}var B=n(3),H=n.n(B),W=n(26),z=n.n(W),Y=Object(m.b)("");var q="control",V={treatment:q,config:null},Q=Object(m.b)(""),J=/[A-Z]/;function $(t,e){if(null==t)Q.error("".concat(e,": you passed a null or undefined traffic_type_name, traffic_type_name must be a non-empty string."));else if(Object(v.k)(t)){if(0!==t.length)return J.test(t)&&(Q.warn("".concat(e,": traffic_type_name should be all lowercase - converting string to lowercase.")),t=t.toLowerCase()),t;Q.error("".concat(e,": you passed an empty traffic_type_name, traffic_type_name must be a non-empty string."))}else Q.error("".concat(e,": you passed an invalid traffic_type_name, traffic_type_name must be a non-empty string."));return!1}function X(t,e){var n;Q.warn(i()(n="".concat(t,": Traffic Type ")).call(n,e," does not have any corresponding Splits in this environment, make sure you're tracking your events to a valid traffic type defined in the Split console."))}function Z(t,e,n){var r=e.get(e.constants.READY,!0),i=e.get(e.constants.SETTINGS),o=e.get(e.constants.STORAGE).splits;if(!r||"localhost"===i.mode)return!0;var a=o.trafficTypeExists(t);return h(a)?a.then((function(e){return e||X(n,t),e})):a||X(n,t),a}var tt=Object(m.b)("",{displayAllErrors:!0});function et(t){return!t.get(t.constants.DESTROYED,!0)||(tt.error("Client has already been destroyed - no calls possible."),!1)}function nt(t,e){return!(!t.get(t.constants.READY,!0)&&!t.get(t.constants.READY_FROM_CACHE,!0))||(tt.warn("".concat(e,": the SDK is not ready, results may be incorrect. Make sure to wait for SDK readiness before using this method.")),!1)}var rt=function(t){var e,n=t.conditions,r=Object(v.b)(n,(function(t){return"ROLLOUT"===t.conditionType}));return r||(r=n[0]),r?p()(e=r.partitions).call(e,(function(t){return t.treatment})):[]},it=function(t){var e;try{e=JSON.parse(t)}catch(t){return null}return null==e?null:{name:e.name,trafficType:e.trafficTypeName||null,killed:e.killed,changeNumber:e.changeNumber||0,treatments:rt(e),configs:e.configurations||{}}},ot=function(t){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=l()(t);!(n=(o=a.next()).done);n=!0){var c=o.value,s=it(c);null!=s&&e.push(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e};var at=function(t,e){var n=e.get(e.constants.STATUS_MANAGER);return s()(a()(n),{split:function(n){var r=U(n,"split");if(!et(e)||!nt(e,"split")||!r)return null;var i=t.getSplit(r);return h(i)?i.then((function(t){return K(e,r,t,"split"),it(t)})):(K(e,r,i,"split"),it(i))},splits:function(){if(!et(e)||!nt(e,"splits"))return[];var n=t.getAll();return h(n)?n.then(ot):ot(n)},names:function(){return et(e)&&nt(e,"names")?t.getKeys():[]}})},ct=n(51),st=n.n(ct),ut=n(11),lt=n.n(ut),ft=n(167),pt=n.n(ft),ht=n(91),vt=n.n(ht);function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gt=n(92),mt=n.n(gt),yt=n(93),bt=n.n(yt),St=n(50),Tt=n.n(St);var Et=n(168),_t=n.n(Et);function Ot(t,e){var n;if(t){if("string"==typeof t)return dt(t,e);var r=_t()(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?mt()(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(t,e):void 0}}function wt(t){return function(t){if(vt()(t))return dt(t)}(t)||function(t){if(void 0!==Tt.a&&bt()(Object(t)))return mt()(t)}(t)||Ot(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(t,e){return function(t){if(vt()(t))return t}(t)||function(t,e){if(void 0!==Tt.a&&bt()(Object(t))){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=l()(t);!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(t,e)||Ot(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var At=n(5),kt=n(8);var Nt=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;e<t.length;e++)for(var n=t[e].matcherGroup.matchers,r=0;r<n.length;r++)if("IN_SEGMENT"===n[r].matcherType)return!0;return!1},jt=n(17),Rt=n.n(jt),It=n(6),Ct=n.n(It);function Dt(t,e,n){var r=this,i=this.getSplit(t);return(h(i)?i:Ct.a.resolve(i)).then((function(i){if(i){var o=JSON.parse(i);if(!o.changeNumber||o.changeNumber<n){o.killed=!0,o.defaultTreatment=e,o.changeNumber=n;var a=Rt()(o);return r.addSplit(t,a)}}return!1}))}var Lt=function(){function t(){Object(At.a)(this,t),this.flush()}return Object(kt.a)(t,[{key:"addSplit",value:function(t,e){var n=this.getSplit(t);if(n){var r=JSON.parse(n);if(r.trafficTypeName){var i=r.trafficTypeName;this.ttCache[i]--,this.ttCache[i]||delete this.ttCache[i]}Nt(r.conditions)&&this.splitsWithSegmentsCount--}var o=JSON.parse(e);if(o){this.splitCache.set(t,e);var a=o.trafficTypeName;return a&&(this.ttCache[a]||(this.ttCache[a]=0),this.ttCache[a]++),Nt(o.conditions)&&this.splitsWithSegmentsCount++,!0}return!1}},{key:"addSplits",value:function(t){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=l()(t);!(n=(o=a.next()).done);n=!0){var c=xt(o.value,2),s=c[0],u=c[1];e.push(this.addSplit(s,u))}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}},{key:"removeSplit",value:function(t){var e=this.getSplit(t);if(e){this.splitCache.delete(t);var n=JSON.parse(e),r=n.trafficTypeName;return r&&(this.ttCache[r]--,this.ttCache[r]||delete this.ttCache[r]),Nt(n.conditions)&&this.splitsWithSegmentsCount--,1}return 0}},{key:"removeSplits",value:function(t){var e=this;return H()(t).call(t,(function(t){return e.removeSplit(t)})),t.length}},{key:"getSplit",value:function(t){return this.splitCache.get(t)}},{key:"setChangeNumber",value:function(t){return this.changeNumber=t,!0}},{key:"getChangeNumber",value:function(){return this.changeNumber}},{key:"getAll",value:function(){var t;return wt(pt()(t=this.splitCache).call(t))}},{key:"getKeys",value:function(){var t;return wt(lt()(t=this.splitCache).call(t))}},{key:"trafficTypeExists",value:function(t){return Object(v.i)(this.ttCache[t])&&this.ttCache[t]>0}},{key:"usesSegments",value:function(){return-1===this.getChangeNumber()||this.splitsWithSegmentsCount>0}},{key:"flush",value:function(){this.splitCache=new st.a,this.ttCache={},this.changeNumber=-1,this.splitsWithSegmentsCount=0}},{key:"fetchMany",value:function(t){var e=this,n=new st.a;return H()(t).call(t,(function(t){n.set(t,e.splitCache.get(t)||null)})),n}},{key:"checkCache",value:function(){return!1}}]),t}();Lt.prototype.killLocally=Dt;var Mt=Lt,Pt=n(169),Ft=n.n(Pt),Gt=n(170),Ut=n.n(Gt),Kt=Object(m.b)("splitio-storage:localstorage"),Bt=function(){function t(e){Object(At.a)(this,t),this.keys=e}return Object(kt.a)(t,[{key:"decrementCount",value:function(t){var e=Object(v.o)(localStorage.getItem(t))-1;e>0?localStorage.setItem(t,e):localStorage.removeItem(t)}},{key:"decrementCounts",value:function(t){try{if(t){if(t.trafficTypeName){var e=lt()(this).buildTrafficTypeKey(t.trafficTypeName);this.decrementCount(e)}if(Nt(t.conditions)){var n=lt()(this).buildSplitsWithSegmentCountKey();this.decrementCount(n)}}}catch(t){Kt.error(t)}}},{key:"incrementCounts",value:function(t){try{if(t){if(t.trafficTypeName){var e=lt()(this).buildTrafficTypeKey(t.trafficTypeName);localStorage.setItem(e,Object(v.o)(localStorage.getItem(e))+1)}if(Nt(t.conditions)){var n=lt()(this).buildSplitsWithSegmentCountKey();localStorage.setItem(n,Object(v.o)(localStorage.getItem(n))+1)}}}catch(t){Kt.error(t)}}},{key:"addSplit",value:function(t,e){try{var n=lt()(this).buildSplitKey(t),r=localStorage.getItem(n),i=r?JSON.parse(r):null;this.decrementCounts(i),localStorage.setItem(n,e);var o=e?JSON.parse(e):null;return this.incrementCounts(o),!0}catch(t){return Kt.error(t),!1}}},{key:"addSplits",value:function(t){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=l()(t);!(n=(o=a.next()).done);n=!0){var c=xt(o.value,2),s=c[0],u=c[1];e.push(this.addSplit(s,u))}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}},{key:"removeSplit",value:function(t){try{var e=this.getSplit(t);localStorage.removeItem(lt()(this).buildSplitKey(t));var n=JSON.parse(e);return this.decrementCounts(n),1}catch(t){return Kt.error(t),0}}},{key:"removeSplits",value:function(t){for(var e=0,n=t.length,r=0;e<n;e++)r+=this.removeSplit(t[e]);return r}},{key:"getSplit",value:function(t){return localStorage.getItem(lt()(this).buildSplitKey(t))}},{key:"setChangeNumber",value:function(t){try{return localStorage.setItem(lt()(this).buildSplitsTillKey(),t+""),this.hasSync=!0,!0}catch(t){return Kt.error(t),!1}}},{key:"getChangeNumber",value:function(){var t=localStorage.getItem(lt()(this).buildSplitsTillKey());return null!==t?(t=Ut()(t,10),Ft()(t)?-1:t):-1}},{key:"getAll",value:function(){for(var t=localStorage.length,e=[],n=0;n<t;){var r=localStorage.key(n),i=r&&localStorage.getItem(r);null!=r&&lt()(this).isSplitKey(r)&&i&&e.push(i),n++}return e}},{key:"getKeys",value:function(){for(var t=localStorage.length,e=[],n=0;n<t;){var r=localStorage.key(n);null!=r&&lt()(this).isSplitKey(r)&&e.push(lt()(this).extractKey(r)),n++}return e}},{key:"trafficTypeExists",value:function(t){var e=Object(v.o)(localStorage.getItem(lt()(this).buildTrafficTypeKey(t)));return Object(v.i)(e)&&e>0}},{key:"usesSegments",value:function(){if(!this.hasSync)return!0;var t=localStorage.getItem(lt()(this).buildSplitsWithSegmentCountKey()),e=null===t?0:Object(v.o)(t);return!Object(v.i)(e)||e>0}},{key:"flush",value:function(){Kt.info("Flushing localStorage"),localStorage.clear(),this.hasSync=!1}},{key:"fetchMany",value:function(t){var e=this,n=new st.a;return H()(t).call(t,(function(t){n.set(t,localStorage.getItem(lt()(e).buildSplitKey(t)))})),n}},{key:"checkCache",value:function(){return this.getChangeNumber()>-1}}]),t}();Bt.prototype.killLocally=Dt;var Ht=Bt,Wt=function(){function t(e){Object(At.a)(this,t),this.keys=e,this.flush()}return Object(kt.a)(t,[{key:"flush",value:function(){this.segmentCache=new st.a}},{key:"addToSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);return this.segmentCache.set(e,!0),!0}},{key:"removeFromSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);return this.segmentCache.delete(e),!0}},{key:"resetSegments",value:function(t){var e,n,r=!1;if(0===t.length&&this.segmentCache.size===t.length)return r;if(this.segmentCache.size!==t.length){r=!0,this.segmentCache=new st.a;var i=!0,o=!1,a=void 0;try{for(var c,s=l()(t);!(i=(c=s.next()).done);i=!0)n=c.value,this.addToSegment(n)}catch(t){o=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{for(e=0;e<t.length&&this.isInSegment(t[e]);e++);if(e<t.length){r=!0,this.segmentCache=new st.a;var u=!0,f=!1,p=void 0;try{for(var h,v=l()(t);!(u=(h=v.next()).done);u=!0)n=h.value,this.addToSegment(n)}catch(t){f=!0,p=t}finally{try{u||null==v.return||v.return()}finally{if(f)throw p}}}}return r}},{key:"isInSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);return!0===this.segmentCache.get(e)}},{key:"setChangeNumber",value:function(){return!0}},{key:"getChangeNumber",value:function(){return-1}},{key:"registerSegment",value:function(){return!1}},{key:"registerSegments",value:function(){return!1}},{key:"getRegisteredSegments",value:function(){return[]}}]),t}(),zt=n(42),Yt=n.n(zt),qt=n(63),Vt=n.n(qt),Qt=Object(m.b)("splitio-storage:localstorage"),Jt=function(){function t(e){Object(At.a)(this,t),this.keys=e}return Object(kt.a)(t,[{key:"addToSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);try{return localStorage.setItem(e,"1"),!0}catch(t){return Qt.error(t),!1}}},{key:"removeFromSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);try{return localStorage.removeItem(e),!0}catch(t){return Qt.error(t),!1}}},{key:"resetSegments",value:function(t){var e,n,r=this,i=!1,o=Vt()(e=g()(localStorage)).call(e,(function(t,e){var n=lt()(r).extractSegmentName(e);return n&&t.push(n),t}),[]);if(0===t.length&&o.length===t.length)return i;if(o.length!==t.length)i=!0,H()(o).call(o,(function(t){return r.removeFromSegment(t)})),H()(t).call(t,(function(t){return r.addToSegment(t)}));else{for(n=0;n<t.length&&-1!==Yt()(o).call(o,t[n]);n++);n<t.length&&(i=!0,H()(o).call(o,(function(t){return r.removeFromSegment(t)})),H()(t).call(t,(function(t){return r.addToSegment(t)})))}return i}},{key:"isInSegment",value:function(t){return"1"===localStorage.getItem(lt()(this).buildSegmentNameKey(t))}},{key:"setChangeNumber",value:function(){return!0}},{key:"getChangeNumber",value:function(){return-1}},{key:"registerSegment",value:function(){return!1}},{key:"registerSegments",value:function(){return!1}},{key:"getRegisteredSegments",value:function(){return[]}},{key:"flush",value:function(){Qt.info("Flushing localStorage"),localStorage.clear()}}]),t}(),$t=function(){function t(){Object(At.a)(this,t),this.queue=[]}return Object(kt.a)(t,[{key:"state",value:function(){return this.queue}},{key:"track",value:function(t){var e;return(e=this.queue).push.apply(e,wt(t)),this}},{key:"clear",value:function(){return this.queue.length=0,this}},{key:"toJSON",value:function(){return this.queue}},{key:"isEmpty",value:function(){return 0===this.queue.length}}]),t}(),Xt=n(9),Zt=n.n(Xt);var te=function(t,e){for(var n=0,r=t.length-1,i=Math.floor((r+n)/2),o=n,a=r;t[i]!==e&&n<r;)e<t[i]?r=i-1:e>t[i]&&(n=i+1),i=Math.floor((r+n)/2);return i<o?i=o:i>a&&(i=a),e<t[i]&&i>o?i-1:i},ee=Zt()(te).call(te,null,[1,1.5,2.25,3.38,5.06,7.59,11.39,17.09,25.63,38.44,57.67,86.5,129.75,194.62,291.93,437.89,656.84,985.26,1477.89,2216.84,3325.26,4987.89,77481.83]),ne=function(){function t(){Object(At.a)(this,t),this.clear()}return Object(kt.a)(t,[{key:"clear",value:function(){return this.counters={},this}},{key:"state",value:function(){return this.counters}},{key:"track",value:function(t,e){return void 0===this.counters[t]&&(this.counters[t]=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.counters[t][ee(e)]++,this}},{key:"isEmpty",value:function(){return 0===g()(this.counters).length}},{key:"toJSON",value:function(){return this.counters}}]),t}(),re=function(){function t(){Object(At.a)(this,t),this.clear()}return Object(kt.a)(t,[{key:"clear",value:function(){return this.counters={},this}},{key:"state",value:function(){return this.counters}},{key:"track",value:function(t){return void 0===this.counters[t]?this.counters[t]=1:this.counters[t]++,this.counters[t]}},{key:"isEmpty",value:function(){return 0===g()(this.counters).length}},{key:"toJSON",value:function(){return this.counters}}]),t}(),ie=function(){function t(e){var n=this;Object(At.a)(this,t);var r=e.get(e.constants.SETTINGS),i=e.get(e.constants.EVENTS);this.onFullQueue=!1,this.maxQueue=r.scheduler.eventsQueueSize,this.queue=[],this.queueByteSize=0,h(i)?i.then((function(t){n.onFullQueue=t.flushAndResetTimer,n._checkForFlush()})):"function"==typeof i.flushAndResetTimer&&(this.onFullQueue=i.flushAndResetTimer)}return Object(kt.a)(t,[{key:"state",value:function(){return this.queue}},{key:"track",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.queueByteSize+=e,this.queue.push(t),this._checkForFlush(),!0}},{key:"clear",value:function(){return this.queue=[],this.queueByteSize=0,this}},{key:"toJSON",value:function(){return this.queue}},{key:"isEmpty",value:function(){return 0===this.queue.length}},{key:"_checkForFlush",value:function(){(this.queueByteSize>5242880||this.maxQueue>0&&this.queue.length>=this.maxQueue)&&this.onFullQueue&&this.onFullQueue()}}]),t}(),oe=/[^.]+$/,ae=/count\.([^/]+)$/,ce=/latency\.([^/]+)\.bucket\.([0-9]+)$/,se=function(){function t(e){Object(At.a)(this,t),this.settings=e}return Object(kt.a)(t,[{key:"buildSplitKey",value:function(t){var e;return i()(e="".concat(this.settings.storage.prefix,".split.")).call(e,t)}},{key:"buildTrafficTypeKey",value:function(t){var e;return i()(e="".concat(this.settings.storage.prefix,".trafficType.")).call(e,t)}},{key:"buildSplitsTillKey",value:function(){return"".concat(this.settings.storage.prefix,".splits.till")}},{key:"buildSplitsReady",value:function(){return"".concat(this.settings.storage.prefix,".splits.ready")}},{key:"isSplitKey",value:function(t){return Object(v.n)(t,"".concat(this.settings.storage.prefix,".split."))}},{key:"buildSegmentNameKey",value:function(t){var e;return i()(e="".concat(this.settings.storage.prefix,".segment.")).call(e,t)}},{key:"buildSegmentTillKey",value:function(t){var e;return i()(e="".concat(this.settings.storage.prefix,".segment.")).call(e,t,".till")}},{key:"buildRegisteredSegmentsKey",value:function(){return"".concat(this.settings.storage.prefix,".segments.registered")}},{key:"buildSegmentsReady",value:function(){return"".concat(this.settings.storage.prefix,".segments.ready")}},{key:"buildVersionablePrefix",value:function(){var t,e;return i()(t=i()(e="".concat(this.settings.storage.prefix,"/")).call(e,this.settings.version,"/")).call(t,this.settings.runtime.ip)}},{key:"buildImpressionsKey",value:function(){return"".concat(this.settings.storage.prefix,".impressions")}},{key:"buildEventsKey",value:function(){return"".concat(this.settings.storage.prefix,".events")}},{key:"buildLatencyKeyPrefix",value:function(){return"".concat(this.buildVersionablePrefix(),"/latency")}},{key:"buildLatencyKey",value:function(t,e){var n,r;return i()(n=i()(r="".concat(this.buildLatencyKeyPrefix(),".")).call(r,t,".bucket.")).call(n,e)}},{key:"buildCountKey",value:function(t){var e;return i()(e="".concat(this.buildVersionablePrefix(),"/count.")).call(e,t)}},{key:"buildGaugeKey",value:function(t){var e;return i()(e="".concat(this.buildVersionablePrefix(),"/gauge.")).call(e,t)}},{key:"searchPatternForCountKeys",value:function(){return"".concat(this.buildVersionablePrefix(),"/count.*")}},{key:"searchPatternForSplitKeys",value:function(){return"".concat(this.settings.storage.prefix,".split.*")}},{key:"searchPatternForLatency",value:function(){return"".concat(this.buildLatencyKeyPrefix(),".*")}},{key:"extractKey",value:function(t){var e=t.match(oe);if(e&&e.length)return e[0];throw"Invalid latency key provided"}},{key:"extractCounterName",value:function(t){var e=t.match(ae);if(e&&e.length)return e[1];throw"Invalid counter key provided"}},{key:"extractLatencyMetricNameAndBucket",value:function(t){var e=t.match(ce);if(e&&e.length>2)return{metricName:e[1],bucketNumber:e[2]};throw"Invalid counter key provided"}}]),t}(),ue=n(35),le=n.n(ue),fe=n(94),pe=n.n(fe),he=n(95),ve=n.n(he);function de(t,e){return(de=ve.a||function(t,e){return t.__proto__=e,t})(t,e)}function ge(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=pe()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}var me=n(49);function ye(t,e){return!e||"object"!==Object(me.a)(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var be=n(121),Se=n.n(be);function Te(t){return(Te=ve.a?Se.a:function(t){return t.__proto__||Se()(t)})(t)}function Ee(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return Object(v.j)(n)?n[t]:e?void 0:n}}var _e=Ee("matchingKey"),Oe=Ee("bucketingKey",!0);var we=function(t){ge(n,t);var e=function(t){function e(){if("undefined"==typeof Reflect||!le.a)return!1;if(le.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(le()(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=Te(t);if(e()){var i=Te(this).constructor;n=le()(r,arguments,i)}else n=r.apply(this,arguments);return ye(this,n)}}(n);function n(){return Object(At.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"buildSegmentNameKey",value:function(t){var e,n;return i()(e=i()(n="".concat(_e(this.settings.core.key),".")).call(n,this.settings.storage.prefix,".segment.")).call(e,t)}},{key:"extractSegmentName",value:function(t){var e,n=i()(e="".concat(_e(this.settings.core.key),".")).call(e,this.settings.storage.prefix,".segment.");if(Object(v.n)(t,n))return t.substr(n.length)}},{key:"buildSplitsWithSegmentCountKey",value:function(){return"".concat(this.settings.storage.prefix,".splits.usingSegments")}}]),n}(se),xe=function(t){var e=t.get(t.constants.SETTINGS);switch(e.storage.type){case"MEMORY":var n=new se(e);return{splits:new Mt,segments:new Wt(n),impressions:new $t,metrics:new ne,count:new re,events:new ie(t),shared:function(t){var e=new se(t);return{splits:this.splits,segments:new Wt(e),impressions:this.impressions,metrics:this.metrics,count:this.count,events:this.events,destroy:function(){this.splits=new Mt,this.segments.flush()}}},destroy:function(){this.splits.flush(),this.segments.flush(),this.impressions.clear(),this.metrics.clear(),this.count.clear(),this.events.clear()}};case"LOCALSTORAGE":var r=new we(e);return{splits:new Ht(r),segments:new Jt(r),impressions:new $t,metrics:new ne,count:new re,events:new ie(t),shared:function(t){var e=new we(t);return{splits:this.splits,segments:new Jt(e),impressions:this.impressions,metrics:this.metrics,count:this.count,events:this.events,destroy:function(){this.splits=new Mt,this.segments=new Wt(e)}}},destroy:function(){this.splits=new Mt,this.segments=new Wt(new se(e)),this.impressions.clear(),this.metrics.clear(),this.count.clear(),this.events.clear()}};default:throw new Error("Unsupported storage type")}},Ae=n(14),ke=n.n(Ae),Ne=n(66),je=n.n(Ne),Re="init::timeout",Ie="init::ready",Ce="init::cache-ready",De="state::splits-arrived",Le="state::segments-arrived",Me="state::splits-cache-loaded",Pe="state::update",Fe="state::check";var Ge=function(){var t=0,e=new je.a;e.SDK_SPLITS_CACHE_LOADED=Me,e.SDK_SPLITS_ARRIVED=De;var n=0;function r(e,n){var r=new je.a,i=0,o=0;return r.on(Fe,(function(){14!==o&&t+i===6?(o=14,r.emit(Ie)):14===o&&r.emit(Pe)})),e.on(De,(function(e){e||(t=2),r.emit(Fe)})),e.once(Me,(function(){ke()((function(){return r.emit(Ce)}),0)})),n.on(Le,(function(){i=4,r.emit(Fe)})),r}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=0,o=new je.a;o.SDK_SEGMENTS_ARRIVED=Le;var a=r(e,o);return t>0&&(i=ke()((function(){a.emit(Re,"Split SDK emitted SDK_READY_TIMED_OUT event.")}),t),a.once(Ie,(function(){return clearTimeout(i)}))),a.SDK_READY=Ie,a.SDK_READY_FROM_CACHE=Ce,a.SDK_UPDATE=Pe,a.SDK_READY_TIMED_OUT=Re,n++,{splits:e,segments:o,gate:a,destroy:function(){o.removeAllListeners(),a.removeAllListeners(),clearTimeout(i),n>0&&n--,0===n&&e.removeAllListeners()}}}},Ue=n(32),Ke=n.n(Ue),Be=n(33),He=n.n(Be),We=n(18),ze=n.n(We),Ye=n(19),qe=n.n(Ye),Ve=n(12),Qe=n.n(Ve),Je=n(20),$e=n.n(Je),Xe=n(88),Ze=n.n(Xe);function tn(t,e,n){return e in t?Ze()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var en={startup:{requestTimeoutBeforeReady:5,retriesOnFailureBeforeReady:1,readyTimeout:10,eventsFirstPushWindow:10}},nn=n(89),rn=Object(m.b)("splitio-settings"),on=function(t){var e=t.mode,n=t.storage,r=n.type,i=void 0===r?"MEMORY":r,o=n.options,a=void 0===o?{}:o,c=n.prefix;return c?c+=".SPLITIO":c="SPLITIO","localhost"===e?{type:"MEMORY",prefix:c}:(("MEMORY"!==i&&"LOCALSTORAGE"!==i||"LOCALSTORAGE"===i&&!Object(nn.a)())&&(i="MEMORY",rn.warn("Invalid or unavailable storage. Fallbacking into MEMORY storage")),{type:i,options:a,prefix:c})},an=n(171),cn=n.n(an),sn=Object(m.b)("splitio-settings"),un=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=t.integrations;if(!z()(o)||0===o.length)return[];var a=Qe()(o).call(o,(function(t){return t&&Object(v.k)(t.type)&&cn()(r).call(r,t.type)})),c=o.length-a.length;return c&&sn.warn(i()(e=i()(n="".concat(c," integration ")).call(n,1===c?"item":"items"," at settings ")).call(e,1===c?"is":"are"," invalid: integration items must have a valid 'type' value")),a},ln=function(t){return un(t,["GOOGLE_ANALYTICS_TO_SPLIT","SPLIT_TO_GOOGLE_ANALYTICS"])};var fn,pn=function(t,e){var n;if("localhost"===t)return"localhost";if(-1===Yt()(n=["standalone","producer","consumer"]).call(n,e))throw Error("Invalid mode provided");return e},hn=n(172);function vn(t,e){var n=g()(t);if($e.a){var r=$e()(t);e&&(r=Qe()(r).call(r,(function(e){return qe()(t,e).enumerable}))),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)H()(n=vn(Object(r),!0)).call(n,(function(e){tn(t,e,r[e])}));else if(ze.a)He()(t,ze()(r));else{var i;H()(i=vn(Object(r))).call(i,(function(e){Ke()(t,e,qe()(r,e))}))}}return t}var gn=/^\/(testImpressions|metrics|events)/,mn=/^\/auth/,yn=/^\/(sse|event-stream)/,bn={mode:"standalone",core:{authorizationKey:void 0,key:void 0,trafficType:void 0,labelsEnabled:!0,IPAddressesEnabled:void 0},scheduler:{featuresRefreshRate:30,segmentsRefreshRate:60,metricsRefreshRate:120,impressionsRefreshRate:60,offlineRefreshRate:15,eventsPushRate:60,eventsQueueSize:500,authRetryBackoffBase:1,streamingReconnectBackoffBase:1},urls:{sdk:"https://sdk.split.io/api",events:"https://events.split.io/api",auth:"https://auth.split.io/api",streaming:"https://streaming.split.io"},storage:{type:"MEMORY"},debug:void 0,impressionListener:void 0,version:i()(fn="".concat("javascript","-")).call(fn,hn.a),integrations:void 0,streamingEnabled:!0};function Sn(t){return Math.round(1e3*t)}function Tn(t){var e,n=Object(v.l)({},bn,en,t);return n.scheduler.featuresRefreshRate=Sn(n.scheduler.featuresRefreshRate),n.scheduler.segmentsRefreshRate=Sn(n.scheduler.segmentsRefreshRate),n.scheduler.metricsRefreshRate=Sn(n.scheduler.metricsRefreshRate),n.scheduler.impressionsRefreshRate=Sn(n.scheduler.impressionsRefreshRate),n.scheduler.offlineRefreshRate=Sn(n.scheduler.offlineRefreshRate),n.scheduler.eventsPushRate=Sn(n.scheduler.eventsPushRate),n.startup.requestTimeoutBeforeReady=Sn(n.startup.requestTimeoutBeforeReady),n.startup.readyTimeout=Sn(n.startup.readyTimeout),n.startup.eventsFirstPushWindow=Sn(n.startup.eventsFirstPushWindow),n.mode=pn(n.core.authorizationKey,n.mode),n.storage=on(n),"boolean"==typeof(e=n.debug)?e?m.a.enable():m.a.disable():"string"==typeof e&&m.a.setLogLevel(e),n.runtime=(n.core.IPAddressesEnabled,n.mode,{ip:!1,hostname:!1}),n.integrations=ln(n),!1!==n.streamingEnabled&&(n.streamingEnabled=!0),n.streamingEnabled&&(n.scheduler.authRetryBackoffBase=Sn(n.scheduler.authRetryBackoffBase),n.scheduler.streamingReconnectBackoffBase=Sn(n.scheduler.streamingReconnectBackoffBase)),n}var En={url:function(t){var e,n,r,o;return gn.test(t)?i()(n="".concat(this.urls.events)).call(n,t):mn.test(t)?i()(r="".concat(this.urls.auth)).call(r,t):yn.test(t)?i()(o="".concat(this.urls.streaming)).call(o,t):i()(e="".concat(this.urls.sdk)).call(e,t)},overrideKeyAndTT:function(t,e){return s()(a()(En),dn(dn({},this),{},{core:dn(dn({},this.core),{},{key:t,trafficType:e})}))}},_n=function(t){return s()(a()(En),Tn(t))},On={COLLECTORS:"metrics_collectors",DESTROYED:"is_destroyed",EVENTS:"events_publisher",HAS_TIMEDOUT:"has_timedout",INTEGRATIONS_MANAGER:"integrations_manager",MY_SEGMENTS_CHANGE_WORKER:"my_segments_change_worker",PRODUCER:"producer",READINESS:"readiness_gate",READY:"is_ready",READY_FROM_CACHE:"is_ready_from_cache",SETTINGS:"settings",STATUS_MANAGER:"status_manager",STORAGE:"storage"},wn=function(){function t(){Object(At.a)(this,t),this._map={},this.constants=On}return Object(kt.a)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof t&&("string"!=typeof t||t.length)){var n=this._map[t];if(void 0!==n)return n;if(!e){var r,i=new Ct.a((function(t){return r=t}));return i.manualResolve=r,this._map[t]=i,i}}}},{key:"getAll",value:function(){return s()({},this._map)}},{key:"put",value:function(t,e){var n=this;if("string"!=typeof t||"string"==typeof t&&!t.length||void 0===e)return!1;var r=this._map[t];return(void 0===r||"function"==typeof r.manualResolve)&&(h(r)&&r.manualResolve&&r.manualResolve(e),h(e)&&e.then((function(e){return n._map[t]=e,e})).catch((function(e){return n._map[t]=void 0,e})),this._map[t]=e,!0)}}]),t}(),xn=function(t){return Object(v.j)(t)?{matchingKey:t.matchingKey,bucketingKey:t.bucketingKey}:{matchingKey:t,bucketingKey:t}},An=n(40),kn=n(60),Nn=n.n(kn);var jn,Rn="object"===("undefined"==typeof performance?"undefined":Object(me.a)(performance))&&"function"==typeof performance.now?Zt()(jn=performance.now).call(jn,performance):Nn.a;var In,Cn=function(){var t=Rn();return function(){return Math.round(Rn()-t)}},Dn=new An.b("[TIME TRACKER]",{showLevel:!1}),Ln={},Mn={SDK_READY:"Getting ready - Split SDK",SDK_GET_TREATMENT:"SDK - Get Treatment",SDK_GET_TREATMENTS:"SDK - Get Treatments",SDK_GET_TREATMENT_WITH_CONFIG:"SDK - Get Treatment with config",SDK_GET_TREATMENTS_WITH_CONFIG:"SDK - Get Treatments with config",SPLITS_READY:"Getting ready - Splits",SEGMENTS_READY:"Getting ready - Segments",METRICS_PUSH:"Pushing - Metrics",IMPRESSIONS_PUSH:"Pushing - Impressions",EVENTS_PUSH:"Pushing - Events",MY_SEGMENTS_FETCH:"Fetching - My Segments",SEGMENTS_FETCH:"Fetching - Segments",SPLITS_FETCH:"Fetching - Splits"},Pn=(tn(In={},Mn.SDK_READY,{collector:"client",method:"ready"}),tn(In,Mn.SDK_GET_TREATMENT,{collector:"client",method:"getTreatment"}),tn(In,Mn.SDK_GET_TREATMENTS,{collector:"client",method:"getTreatments"}),tn(In,Mn.SDK_GET_TREATMENT_WITH_CONFIG,{collector:"client",method:"getTreatmentWithConfig"}),tn(In,Mn.SDK_GET_TREATMENTS_WITH_CONFIG,{collector:"client",method:"getTreatmentsWithConfig"}),tn(In,Mn.MY_SEGMENTS_FETCH,{collector:"mySegments",method:"latency"}),tn(In,Mn.SEGMENTS_FETCH,{collector:"segmentChanges",method:"latency"}),tn(In,Mn.SPLITS_FETCH,{collector:"splitChanges",method:"latency"}),In),Fn=function(t,e){return"string"==typeof e?t+e:t},Gn=function(t,e){var n=Pn[t];return!(!n||!e)&&e[n.collector]},Un=function(t,e){var n=Pn[t];return!(!n||!e)&&e[n.method]},Kn={__attachToPromise:function(t,e,n,r){var i=this;return t.then((function(t){return i.stop(e,r),n&&n.count&&n.count(t.status),t})).catch((function(t){throw i.stop(e,r),n&&n.countException&&n.countException(),t}))},start:function(t,e,n){var r,i,o,a=Object(v.s)(),c=Gn(t,e);h(n)?r=this.__attachToPromise(n,t,c,a):(r=Zt()(i=this.stop).call(i,this,t,a),Pn[t]&&!c&&(r.setCollectorForTask=Zt()(o=this.setCollectorForTask).call(o,this,t,a)));var s=Fn(t,a),u=Un(t,c);return Ln[s]={cb:u,timer:Cn()},r},setCollectorForTask:function(t,e,n){var r=Gn(t,n);if(r){var i=Fn(t,e);Ln[i].cb=Un(t,r)}},stop:function(t,e){var n=Fn(t,e),r=Ln[n];if(r){var o,a=r.timer();return Dn.debug(i()(o="[".concat(t,"] took ")).call(o,a,"ms to finish.")),r.cb&&r.cb(a),delete Ln[n],a}},TaskNames:Mn},Bn=n(64),Hn=n.n(Bn),Wn=n(122),zn=n.n(Wn),Yn=n(173),qn=n.n(Yn);function Vn(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=qn()(t);for(r=0;r<o.length;r++)n=o[r],Hn()(e).call(e,n)>=0||(i[n]=t[n]);return i}(t,e);if(zn.a){var o=zn()(t);for(r=0;r<o.length;r++)n=o[r],Hn()(e).call(e,n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Qn={ALL:1,SEGMENT:2,WHITELIST:3,EQUAL_TO:4,GREATER_THAN_OR_EQUAL_TO:5,LESS_THAN_OR_EQUAL_TO:6,BETWEEN:7,UNDEFINED:8,EQUAL_TO_SET:9,CONTAINS_ANY_OF_SET:10,CONTAINS_ALL_OF_SET:11,PART_OF_SET:12,ENDS_WITH:13,STARTS_WITH:14,CONTAINS_STRING:15,IN_SPLIT_TREATMENT:16,EQUAL_TO_BOOLEAN:17,MATCHES_STRING:18},Jn={BOOLEAN:"BOOLEAN",STRING:"STRING",NUMBER:"NUMBER",SET:"SET",DATETIME:"DATETIME",NOT_SPECIFIED:"NOT_SPECIFIED"};var $n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.segmentName},Xn=n(65),Zn=n.n(Xn);var tr=function(t){return new Zn.a(t.whitelist)};var er=function(t){return t.whitelist};var nr=function(t){return t.value};function rr(t){return new Date(t).setUTCHours(0,0,0,0)}function ir(t){return new Date(t).setUTCSeconds(0,0)}var or=function(t){var e=p()(t).call(t,(function(t){var e=t.matcherType,n=t.negate,r=t.keySelector,i=t.userDefinedSegmentMatcherData,o=t.whitelistMatcherData,a=t.unaryNumericMatcherData,c=t.betweenMatcherData,s=t.dependencyMatcherData,u=t.booleanMatcherData,l=t.stringMatcherData,f=r&&r.attribute,p=function(t){switch(t){case"ALL_KEYS":return Qn.ALL;case"IN_SEGMENT":return Qn.SEGMENT;case"WHITELIST":return Qn.WHITELIST;case"EQUAL_TO":return Qn.EQUAL_TO;case"GREATER_THAN_OR_EQUAL_TO":return Qn.GREATER_THAN_OR_EQUAL_TO;case"LESS_THAN_OR_EQUAL_TO":return Qn.LESS_THAN_OR_EQUAL_TO;case"BETWEEN":return Qn.BETWEEN;case"EQUAL_TO_SET":return Qn.EQUAL_TO_SET;case"CONTAINS_ANY_OF_SET":return Qn.CONTAINS_ANY_OF_SET;case"CONTAINS_ALL_OF_SET":return Qn.CONTAINS_ALL_OF_SET;case"PART_OF_SET":return Qn.PART_OF_SET;case"ENDS_WITH":return Qn.ENDS_WITH;case"STARTS_WITH":return Qn.STARTS_WITH;case"CONTAINS_STRING":return Qn.CONTAINS_STRING;case"IN_SPLIT_TREATMENT":return Qn.IN_SPLIT_TREATMENT;case"EQUAL_TO_BOOLEAN":return Qn.EQUAL_TO_BOOLEAN;case"MATCHES_STRING":return Qn.MATCHES_STRING;default:return Qn.UNDEFINED}}(e),h=Jn.STRING,v=void 0;return p===Qn.SEGMENT?v=$n(i):p===Qn.WHITELIST?v=tr(o):p===Qn.EQUAL_TO?(v=nr(a),h=Jn.NUMBER,"DATETIME"===a.dataType&&(v=rr(v),h=Jn.DATETIME)):p===Qn.GREATER_THAN_OR_EQUAL_TO||p===Qn.LESS_THAN_OR_EQUAL_TO?(v=nr(a),h=Jn.NUMBER,"DATETIME"===a.dataType&&(v=ir(v),h=Jn.DATETIME)):p===Qn.BETWEEN?(v=c,h=Jn.NUMBER,"DATETIME"===c.dataType&&(v.start=ir(v.start),v.end=ir(v.end),h=Jn.DATETIME)):p===Qn.EQUAL_TO_SET||p===Qn.CONTAINS_ANY_OF_SET||p===Qn.CONTAINS_ALL_OF_SET||p===Qn.PART_OF_SET?(v=er(o),h=Jn.SET):p===Qn.STARTS_WITH||p===Qn.ENDS_WITH||p===Qn.CONTAINS_STRING?v=er(o):p===Qn.IN_SPLIT_TREATMENT?(v=s,h=Jn.NOT_SPECIFIED):p===Qn.EQUAL_TO_BOOLEAN?(h=Jn.BOOLEAN,v=u):p===Qn.MATCHES_STRING&&(v=l),{attribute:f,negate:n,type:p,value:v,dataType:h}}));return-1===Object(v.c)(e,(function(t){return t.type===Qn.UNDEFINED}))?e:[]};function ar(t,e){if(!(this instanceof ar))return new ar(t,e);if(100!==t[t.length-1])throw new RangeError("Provided invalid dataset as input");this._ranges=t,this._treatments=e}ar.parse=function(t){var e=Vt()(t).call(t,(function(t,e){var n=e.size,r=e.treatment;return t.ranges.push(t.inc+=n),t.treatments.push(r),t}),{inc:0,ranges:[],treatments:[]});return new ar(e.ranges,e.treatments)},ar.prototype.getTreatmentFor=function(t){if(t<0||t>100)throw new RangeError("Please provide a value between 0 and 100");var e=Object(v.c)(this._ranges,(function(e){return t<=e}));return this._treatments[e]};var cr=ar,sr=Object(m.b)("splitio-engine:matcher");function ur(t){return sr.debug("[allMatcher] is always true"),null!=t}var lr=function(){return ur},fr=Object(m.b)("splitio-engine:matcher");var pr=function(t,e){return function(n){var r,o,a=e.segments.isInSegment(t,n);return h(a)?a.then((function(e){var r,o;return fr.debug(i()(r=i()(o="[asyncSegmentMatcher] evaluated ".concat(t," / ")).call(o,n," => ")).call(r,a)),e})):fr.debug(i()(r=i()(o="[segmentMatcher] evaluated ".concat(t," / ")).call(o,n," => ")).call(r,a)),a}},hr=Object(m.b)("splitio-engine:matcher");var vr=function(t){return function(e){var n,r,o=t.has(e);return hr.debug(i()(n=i()(r="[whitelistMatcher] evaluated ".concat(e," in [")).call(r,wt(t).join(","),"] => ")).call(n,o)),o}},dr=Object(m.b)("splitio-engine:matcher");var gr=function(t){return function(e){var n,r,o=e===t;return dr.debug(i()(n=i()(r="[equalToMatcher] is ".concat(e," equal to ")).call(r,t,"? ")).call(n,o)),o}},mr=Object(m.b)("splitio-engine:matcher");var yr=function(t){return function(e){var n,r,o=e>=t;return mr.debug(i()(n=i()(r="[greaterThanEqualMatcher] is ".concat(e," greater than ")).call(r,t,"? ")).call(n,o)),o}},br=Object(m.b)("splitio-engine:matcher");var Sr=function(t){return function(e){var n,r,o=e<=t;return br.debug(i()(n=i()(r="[lessThanEqualMatcher] is ".concat(e," less than ")).call(r,t,"? ")).call(n,o)),o}},Tr=Object(m.b)("splitio-engine:matcher");var Er=function(t){return function(e){var n,r,o,a=e>=t.start&&e<=t.end;return Tr.debug(i()(n=i()(r=i()(o="[betweenMatcher] is ".concat(e," between ")).call(o,t.start," and ")).call(r,t.end,"? ")).call(n,a)),a}},_r=Object(m.b)("splitio-engine:matcher");var Or=function(t){return function(e){for(var n,r,o=e.length===t.length,a=function(n){Object(v.c)(t,(function(t){return t===e[n]}))<0&&(o=!1)},c=0;c<e.length&&o;c++)a(c);return _r.debug(i()(n=i()(r="[equalToSetMatcher] is ".concat(e," equal to set ")).call(r,t,"? ")).call(n,o)),o}},wr=Object(m.b)("splitio-engine:matcher");var xr=function(t){return function(e){var n,r,o=!0;if(e.length<t.length)o=!1;else for(var a=function(n){Object(v.c)(e,(function(e){return e===t[n]}))<0&&(o=!1)},c=0;c<t.length&&o;c++)a(c);return wr.debug(i()(n=i()(r="[containsAllMatcher] ".concat(e," contains all elements of ")).call(r,t,"? ")).call(n,o)),o}},Ar=Object(m.b)("splitio-engine:matcher");var kr=function(t){return function(e){for(var n,r,o=!1,a=function(n){Object(v.c)(e,(function(e){return e===t[n]}))>=0&&(o=!0)},c=0;c<t.length&&!o;c++)a(c);return Ar.debug(i()(n=i()(r="[containsAnyMatcher] ".concat(e," contains at least an element of ")).call(r,t,"? ")).call(n,o)),o}},Nr=Object(m.b)("splitio-engine:matcher");var jr=function(t){return function(e){for(var n,r,o=e.length<=t.length,a=function(n){Object(v.c)(t,(function(t){return t===e[n]}))<0&&(o=!1)},c=0;c<e.length&&o;c++)a(c);return Nr.debug(i()(n=i()(r="[partOfMatcher] ".concat(e," is part of ")).call(r,t,"? ")).call(n,o)),o}},Rr=n(53),Ir=n.n(Rr),Cr=Object(m.b)("splitio-engine:matcher");var Dr=function(t){return function(e){var n,r,o=Ir()(t).call(t,(function(t){return Object(v.n)(e,t)}));return Cr.debug(i()(n=i()(r="[startsWithMatcher] ".concat(e," starts with ")).call(r,t,"? ")).call(n,o)),o}},Lr=Object(m.b)("splitio-engine:matcher");var Mr=function(t){return function(e){var n,r,o=Ir()(t).call(t,(function(t){return Object(v.a)(e,t)}));return Lr.debug(i()(n=i()(r="[endsWithMatcher] ".concat(e," ends with ")).call(r,t,"? ")).call(n,o)),o}},Pr=Object(m.b)("splitio-engine:matcher");var Fr=function(t){return function(e){var n,r,o=Ir()(t).call(t,(function(t){return Object(v.k)(e)&&Yt()(e).call(e,t)>-1}));return Pr.debug(i()(n=i()(r="[containsStringMatcher] ".concat(e," contains ")).call(r,t,"? ")).call(n,o)),o}},Gr=Object(m.b)("splitio-engine:matcher");function Ur(t,e,n){var r,o,a,c,s,u=!1;return z()(e)&&(u=-1!==Yt()(e).call(e,t.treatment)),Gr.debug(i()(r=i()(o=i()(a=i()(c=i()(s='[dependencyMatcher] Parent split "'.concat(n,'" evaluated to "')).call(s,t.treatment,'" with label "')).call(c,t.label,'". ')).call(a,n," evaluated treatment is part of [")).call(o,e,"] ? ")).call(r,u,".")),u}var Kr=function(t,e){var n=t.split,r=t.treatments;return function(t,o){var a,c,s=t.key,u=t.attributes;Gr.debug(i()(a=i()(c='[dependencyMatcher] will evaluate parent split: "'.concat(n,'" with key: ')).call(c,Rt()(s)," ")).call(a,u?"\n attributes: ".concat(Rt()(u)):""));var l=o(s,n,u,e);return h(l)?l.then((function(t){return Ur(t,r,n)})):Ur(l,r,n)}},Br=Object(m.b)("splitio-engine:matcher");var Hr=function(t){return function(e){var n,r=t===e;return Br.debug(i()(n="[booleanMatcher] ".concat(t," === ")).call(n,e)),r}},Wr=Object(m.b)("splitio-engine:matcher");var zr=function(t){return function(e){var n,r,o;try{o=new RegExp(t)}catch(e){return Wr.debug("[stringMatcher] ".concat(t," is an invalid regex")),!1}var a=o.test(e);return Wr.debug(i()(n=i()(r="[stringMatcher] does ".concat(e," matches with ")).call(r,t,"? ")).call(n,a?"yes":"no")),a}};var Yr=function(t,e){var n,r=t.type,i=t.value;return r===Qn.ALL?n=lr(i):r===Qn.SEGMENT?n=pr(i,e):r===Qn.WHITELIST?n=vr(i):r===Qn.EQUAL_TO?n=gr(i):r===Qn.GREATER_THAN_OR_EQUAL_TO?n=yr(i):r===Qn.LESS_THAN_OR_EQUAL_TO?n=Sr(i):r===Qn.BETWEEN?n=Er(i):r===Qn.EQUAL_TO_SET?n=Or(i):r===Qn.CONTAINS_ANY_OF_SET?n=kr(i):r===Qn.CONTAINS_ALL_OF_SET?n=xr(i):r===Qn.PART_OF_SET?n=jr(i):r===Qn.STARTS_WITH?n=Dr(i):r===Qn.ENDS_WITH?n=Mr(i):r===Qn.CONTAINS_STRING?n=Fr(i):r===Qn.IN_SPLIT_TREATMENT?n=Kr(i,e):r===Qn.EQUAL_TO_BOOLEAN?n=Hr(i):r===Qn.MATCHES_STRING&&(n=zr(i)),n},qr=Object(m.b)("splitio-engine:sanitize"),Vr=Qn,Qr=Jn;function Jr(t,e){return{key:t,attributes:e}}var $r=function(t,e,n,r){var o,a,c,s,u,l=function(t,e){switch(t){case Vr.EQUAL_TO:return"DATETIME"===e?rr:void 0;case Vr.GREATER_THAN_OR_EQUAL_TO:case Vr.LESS_THAN_OR_EQUAL_TO:case Vr.BETWEEN:return"DATETIME"===e?ir:void 0;case Vr.IN_SPLIT_TREATMENT:return Jr;default:return}}(t,n);switch(n){case Qr.NUMBER:case Qr.DATETIME:s=e,u=Object(v.o)(s),c=isNaN(u)?void 0:u;break;case Qr.STRING:c=function(t){var e=t;Object(v.j)(t)&&(e=t.matchingKey?t.matchingKey:void 0);var n=Object(v.p)(e);return n||void 0}(e);break;case Qr.SET:c=function(t){var e=z()(t)?Object(v.r)(p()(t).call(t,(function(t){return t+""}))):[];return e.length?e:void 0}(e);break;case Qr.BOOLEAN:c=function(t){if(!0===t||!1===t)return t;if("string"==typeof t){var e=t.toLocaleLowerCase();if("true"===e)return!0;if("false"===e)return!1}}(e);break;case Qr.NOT_SPECIFIED:c=e;break;default:c=void 0}return l&&(c=l(c,r)),qr.debug(i()(o=i()(a="Attempted to sanitize [".concat(e,"] which should be of type [")).call(a,n,"]. \n Sanitized and processed value => [")).call(o,c instanceof Object?Rt()(c):c,"]")),c},Xr=Object(m.b)("splitio-engine:value");var Zr=function(t,e,n){var r,o=e.attribute,a=function(t,e,n){var r,o=void 0;return e?n?(o=n[e],Xr.debug(i()(r="Extracted attribute [".concat(e,"], [")).call(r,o,"] will be used for matching."))):Xr.warn("Defined attribute [".concat(e,"], no attributes received.")):o=t,o}(t,o,n),c=$r(e.type,a,e.dataType,n);return void 0!==c?c:void Xr.warn(i()(r="Value ".concat(a," ")).call(r,o?"for attribute ".concat(o," "):0,"doesn't match with expected type."))};function ti(t){return e=function(t){return(t=Number(t))<0?Math.ceil(t):Math.floor(t)}(t),n=Math.pow(2,32),e-Math.floor(e/n)*n;var e,n}function ei(t){var e=ti(t);return e>=Math.pow(2,31)?e-Math.pow(2,32):e}function ni(t,e){var n=0,r=!0,i=!1,o=void 0;try{for(var a,c=l()(t);!(r=(a=c.next()).done);r=!0){var s=a.value;n=ei(ei(31*n)+s.charCodeAt(0))}}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return ei(n^e)}var ri=function(t,e){return Math.abs(ni(t,e)%100)+1},ii=n(96),oi=n.n(ii),ai=oi.a.stringSource,ci=oi.a.stringDestination,si=oi.a.encodeUTF16toUTF8;function ui(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function li(t,e){return t<<e|t>>>32-e}function fi(t,e){e=e||0;for(var n,r=(t=t||"").length%4,i=t.length-r,o=e,a=0,c=3432918353,s=461845907,u=0;u<i;u+=4)a=ui(a=255&t.charCodeAt(u)|(255&t.charCodeAt(u+1))<<8|(255&t.charCodeAt(u+2))<<16|(255&t.charCodeAt(u+3))<<24,c),a=ui(a=li(a,15),s),o=ui(o=li(o^=a,13),5)+3864292196;switch(a=0,r){case 3:a^=(255&t.charCodeAt(u+2))<<16;case 2:a^=(255&t.charCodeAt(u+1))<<8;case 1:a=ui(a^=255&t.charCodeAt(u),c),o^=a=ui(a=li(a,15),s)}return o^=t.length,n=o,n=ui(n^=n>>>16,2246822507),n=ui(n^=n>>>13,3266489909),(o=n^=n>>>16)>>>0}function pi(t,e){return fi((si(ai(t),n=ci()),n()),e>>>0);var n}var hi={hash:pi,bucket:function(t,e){return Math.abs(pi(t,e)%100)+1}},vi=Object(m.b)("splitio-engine");function di(t){return 2===t?hi.bucket:ri}var gi={getTreatment:function(t,e,n,r){var o,a,c,s,u=di(r)(t,e),l=n.getTreatmentFor(u);return vi.debug(i()(o=i()(a=i()(c=i()(s="[engine] using algo ".concat(2!==r?"legacy":"murmur"," bucket ")).call(s,u," for key ")).call(c,t," using seed ")).call(a,e," - treatment ")).call(o,l)),l},shouldApplyRollout:function(t,e,n,r){if(t<100&&di(r)(e,n)>t)return!1;return!0}};function mi(t,e,n,r,i,o){if(t)return{treatment:gi.getTreatment(e,n,r,o),label:i}}var yi=function(t,e,n,r){return function(i,o,a,c,s,u,l){if("ROLLOUT"===r&&!gi.shouldApplyRollout(a,i.bucketingKey,c,l))return{treatment:void 0,label:"not in split"};var f=t(i,u,s);return h(f)?f.then((function(t){return mi(t,i.bucketingKey,o,e,n,l)})):mi(f,i.bucketingKey,o,e,n,l)}},bi=Object(m.b)("splitio-engine:combiner");function Si(){return bi.error("Invalid Split provided, no valid conditions found"),{treatment:q,label:"exception"}}function Ti(t){for(var e=t.length,n=0;n<e;n++){var r=t[n];if(void 0!==r)return bi.debug("Treatment found: ".concat(r.treatment)),r}bi.debug("All predicates evaluated, no treatment found.")}var Ei=function(t){return!z()(t)||z()(t)&&0===t.length?Si:function(e,n,r,i,o,a,c){var s=p()(t).call(t,(function(t){return t(e,n,r,i,c,o,a)}));return-1!==Object(v.c)(s,h)?Ct.a.all(s).then((function(t){return Ti(t)})):Ti(s)}},_i=Object(m.b)("splitio-engine:combiner");function Oi(t){for(var e,n=0,r=t.length;n<r&&t[n];n++);return e=n===r,_i.debug("[andCombiner] evaluates to ".concat(e)),e}var wi=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=p()(t).call(t,(function(t){return t.apply(void 0,n)}));return-1!==Object(v.c)(i,h)?Ct.a.all(i).then(Oi):Oi(i)}};var xi=function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=l()(t);!(r=(a=c.next()).done);r=!0){var s=a.value,u=s.matcherGroup.matchers,f=s.partitions,v=s.label,d=s.conditionType;u=or(u);var g=p()(u).call(u,(function(t){var n=Yr(t,e);return function(e,r,i){var o=Zr(e,t,r),a=void 0!==o&&n(o,i);return h(a)?a.then((function(e){return Boolean(e^t.negate)})):Boolean(a^t.negate)}}));if(0===g.length){n=[];break}n.push(yi(wi(g),cr.parse(f),v,d))}}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Ei(n)};function Ai(t,e){return{treatment:Object(v.e)(t,"treatment",e),label:Object(v.e)(t,"label","default rule")}}function ki(t,e){if(!(this instanceof ki))return new ki(t,e);var n;this.baseInfo=t,this.evaluator=e,"string"!=typeof(n=this).baseInfo.defaultTreatment&&(n.baseInfo.defaultTreatment=q)}ki.parse=function(t,e){var n=t.conditions;return new ki(Vn(t,["conditions"]),xi(n,e))},ki.prototype.getKey=function(){return this.baseInfo.name},ki.prototype.getTreatment=function(t,e,n){var r,i,o,a=this.baseInfo,c=a.killed,s=a.seed,u=a.defaultTreatment,l=a.trafficAllocation,f=a.trafficAllocationSeed,p=a.algo;try{r=xn(t)}catch(t){return{treatment:q,label:"exception"}}if(this.isGarbage())i=q,o="archived";else{if(!c){var v=this.evaluator(r,s,l,f,e,p,n);return h(v)?v.then((function(t){return Ai(t,u)})):Ai(v,u)}i=u,o="killed"}return{treatment:i,label:o}},ki.prototype.isGarbage=function(){return"ARCHIVED"===this.baseInfo.status},ki.prototype.getChangeNumber=function(){return this.baseInfo.changeNumber};var Ni=ki,ji={treatment:q,label:"exception",config:null};function Ri(t,e,n,r){var i;try{i=r.splits.getSplit(e)}catch(t){return Ct.a.resolve(ji)}return h(i)?i.then((function(e){return Ci(e,t,n,r)})):Ci(i,t,n,r)}function Ii(t,e,n,r){var i,o={};try{i=r.splits.fetchMany(e)}catch(t){return H()(e).call(e,(function(t){o[t]=ji})),Ct.a.resolve(o)}return h(i)?i.then((function(i){return Di(e,i,t,n,r)})):Di(e,i,t,n,r)}function Ci(t,e,n,r){var i={treatment:q,label:"definition not found",config:null};if(t){var o=JSON.parse(t),a=Ni.parse(o,r);if(i=a.getTreatment(e,n,Ri),h(i))return i.then((function(t){return t.changeNumber=a.getChangeNumber(),t.config=Object(v.e)(o,"configurations.".concat(t.treatment),null),t}));i.changeNumber=a.getChangeNumber(),i.config=Object(v.e)(o,"configurations.".concat(i.treatment),null)}return i}function Di(t,e,n,r,i){var o={},a=[];return H()(t).call(t,(function(t){var c=Ci(e.get(t),n,r,i);h(c)?a.push(c.then((function(e){o[t]=e}))):o[t]=c})),a.length>0?Ct.a.all(a).then((function(){return o})):o}function Li(t,e){var n=g()(t);if($e.a){var r=$e()(t);e&&(r=Qe()(r).call(r,(function(e){return qe()(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mi(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)H()(n=Li(Object(r),!0)).call(n,(function(e){tn(t,e,r[e])}));else if(ze.a)He()(t,ze()(r));else{var i;H()(i=Li(Object(r))).call(i,(function(e){Ke()(t,e,qe()(r,e))}))}}return t}var Pi=Object(m.b)("splitio-client:impression-tracker");var Fi=function(t){var e=t.get(t.constants.STORAGE).impressions,n=t.get(t.constants.SETTINGS),r=n.impressionListener,i=t.get(t.constants.INTEGRATIONS_MANAGER,!0),o=n.runtime,a=o.ip,c=o.hostname,s=n.version;return{track:function(t,n){var o=e.track([t]);if(h(o)&&o.catch((function(t){Pi.error("Could not store impression. Error: ".concat(t))})),r||i){var u={impression:Mi({},t),attributes:n,ip:a,hostname:c,sdkLanguageVersion:s};ke()((function(){i&&i.handleImpression(u);try{r&&r.logImpression(u)}catch(t){Pi.error("Impression listener logImpression method threw: ".concat(t,"."))}}),0)}}}},Gi=n(87),Ui=n.n(Gi);function Ki(t,e){var n=g()(t);if($e.a){var r=$e()(t);e&&(r=Qe()(r).call(r,(function(e){return qe()(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bi(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)H()(n=Ki(Object(r),!0)).call(n,(function(e){tn(t,e,r[e])}));else if(ze.a)He()(t,ze()(r));else{var i;H()(i=Ki(Object(r))).call(i,(function(e){Ke()(t,e,qe()(r,e))}))}}return t}var Hi=Object(m.b)("splitio-client:impressions-tracker");var Wi=function(t){var e=t.get(t.constants.STORAGE).impressions,n=t.get(t.constants.SETTINGS),r=n.impressionListener,o=t.get(t.constants.INTEGRATIONS_MANAGER,!0),a=n.runtime,c=a.ip,s=a.hostname,u=n.version,l=[];return{queue:function(t,e){l.push({impression:t,attributes:e})},track:function(){var t=l.length,n=Ui()(l).call(l,0,t),a=e.track(p()(n).call(n,(function(t){return t.impression})));if(h(a)&&a.then((function(){var e;Hi.debug(i()(e="Successfully stored ".concat(t," impression")).call(e,1===t?"":"s","."))})).catch((function(e){var n,r;Hi.error(i()(n=i()(r="Could not store impressions bulk with ".concat(t," impression")).call(r,1===t?"":"s",". Error: ")).call(n,e))})),r||o)for(var f=function(t){var e={impression:Bi({},n[t].impression),attributes:n[t].attributes,ip:c,hostname:s,sdkLanguageVersion:u};ke()((function(){o&&o.handleImpression(e);try{r&&r.logImpression(e)}catch(t){Hi.error("Impression listener logImpression method threw: ".concat(t,"."))}}),0)},v=0;v<t;v++)f(v)}}};function zi(t,e){var n=g()(t);if($e.a){var r=$e()(t);e&&(r=Qe()(r).call(r,(function(e){return qe()(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yi(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)H()(n=zi(Object(r),!0)).call(n,(function(e){tn(t,e,r[e])}));else if(ze.a)He()(t,ze()(r));else{var i;H()(i=zi(Object(r))).call(i,(function(e){Ke()(t,e,qe()(r,e))}))}}return t}var qi=Object(m.b)("splitio-client:event-tracker");var Vi=function(t){var e=t.get(t.constants.STORAGE).events,n=t.get(t.constants.INTEGRATIONS_MANAGER,!0);function r(t,e){var r,o,a,c,s,u=t.eventTypeId,l=t.trafficTypeName,f=t.key,p=t.value,h=t.timestamp,v=t.properties,d=i()(r=i()(o=i()(a=i()(c=i()(s='event of type "'.concat(u,'" for traffic type "')).call(s,l,'". Key: ')).call(c,f,". Value: ")).call(a,p,". Timestamp: ")).call(o,h,". ")).call(r,v?"With properties.":"With no properties.");return e?(qi.info("Successfully qeued ".concat(d)),n&&ke()((function(){var e=Yi({},t);t.properties&&(e.properties=Yi({},t.properties)),n.handleEvent(e)}),0)):qi.warn("Failed to queue ".concat(d)),e}return{track:function(t,n){var i=e.track(t,n);return h(i)?i.then(Zt()(r).call(r,null,t)):r(t,i)}}},Qi=Object(m.b)("splitio-client");var Ji=function(t){var e=t.get(t.constants.STORAGE),n=t.get(t.constants.COLLECTORS),r=Fi(t),o=Wi(t),a=Vi(t);function c(t,i,o){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Kn.TaskNames[a?"SDK_GET_TREATMENT_WITH_CONFIG":"SDK_GET_TREATMENT"],s=Kn.start(c,n),l=Ri(t,i,o,e);return h(l)?l.then((function(e){return u(e,i,t,o,s,r.track,a,"getTreatment".concat(a?"withConfig":""))})):u(l,i,t,o,s,r.track,a,"getTreatment".concat(a?"withConfig":""))}function s(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Kn.TaskNames[a?"SDK_GET_TREATMENTS_WITH_CONFIG":"SDK_GET_TREATMENTS"],s=Kn.start(c,n),l={},f=function(e){var n;return H()(n=g()(e)).call(n,(function(n){l[n]=u(e[n],n,t,i,!1,o.queue,a,"getTreatments".concat(a?"withConfig":""))})),o.track(),s(),l},p=Ii(t,r,i,e);return h(p)?p.then((function(t){return f(t)})):f(p)}function u(e,n,r,o){var a,c,s,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5?arguments[5]:void 0,f=arguments.length>6?arguments[6]:void 0,p=arguments.length>7?arguments[7]:void 0,h=t.get(t.constants.READY,!0)||t.get(t.constants.READY_FROM_CACHE,!0),v=_e(r),d=Oe(r);h||(e={treatment:q,label:"not ready"});var g=e,m=g.treatment,y=g.label,b=g.changeNumber,S=g.config,T=void 0===S?null:S;return Qi.info(i()(a=i()(c=i()(s="Split: ".concat(n,". Key: ")).call(s,v,". Evaluation: ")).call(c,m,". Label: ")).call(a,y)),K(t,n,y,p)&&(Qi.info("Queueing corresponding impression."),l({feature:n,keyName:v,treatment:m,time:Nn()(),bucketingKey:d,label:y,changeNumber:b},o)),u&&u(),f?{treatment:m,config:T}:m}return{getTreatment:c,getTreatmentWithConfig:function(t,e,n){return c(t,e,n,!0)},getTreatments:s,getTreatmentsWithConfig:function(t,e,n){return s(t,e,n,!0)},track:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1024,s=_e(e),u=Nn()(),l={eventTypeId:r,trafficTypeName:n,value:i,timestamp:u,key:s,properties:o};return Z(n,t,"track"),a.track(l,c)}}};var $i=function(t,e,n){var r="REDIS"!==t.get(t.constants.SETTINGS).storage.type,i=Ji(t),o=i.getTreatment,a=i.getTreatmentWithConfig,c=i.getTreatments,u=i.getTreatmentsWithConfig,l=i.track;function f(n,r,i,o){var a,c,s=Object(v.n)(o,"getTreatments"),u=e?n:P(n,o),l=s?function(t,e){if(z()(t)&&t.length>0){var n=[];if(H()(t).call(t,(function(t){var e=U(t);e&&n.push(e)})),n.length)return Object(v.r)(n)}return Y.error("".concat(e,": split_names must be a non-empty array.")),!1}(r,o):U(r,o),f=(a=i,c=o,Object(v.j)(a)||null==a?a:(T.error("".concat(c,": attributes must be a plain object.")),!1)),p=et(t);return nt(t,o),{valid:p&&u&&l&&!1!==f,key:u,splitOrSplits:l,attributes:f}}return i.getTreatment=function(t,e,n){var i=f(t,e,n,"getTreatment");return i.valid?o(i.key,i.splitOrSplits,i.attributes):r?q:Ct.a.resolve(q)},i.getTreatmentWithConfig=function(t,e,n){var i=f(t,e,n,"getTreatmentWithConfig");return i.valid?a(i.key,i.splitOrSplits,i.attributes):r?s()({},V):Ct.a.resolve(s()({},V))},i.getTreatments=function(t,e,n){var i=f(t,e,n,"getTreatments");if(i.valid)return c(i.key,i.splitOrSplits,i.attributes);var o,a={};return i.splitOrSplits&&H()(o=i.splitOrSplits).call(o,(function(t){return a[t]=q})),r?a:Ct.a.resolve(a)},i.getTreatmentsWithConfig=function(t,e,n){var i=f(t,e,n,"getTreatmentsWithConfig");if(i.valid)return u(i.key,i.splitOrSplits,i.attributes);var o,a={};return i.splitOrSplits&&H()(o=i.splitOrSplits).call(o,(function(t){return a[t]=s()({},V)})),r?a:Ct.a.resolve(a)},i.track=function(i,o,a,c,s){var u=e?i:P(i,"track"),f=n?o:$(o,"track"),p=O(a,"track"),h=x(c,"track"),v=I(s,"track"),d=v.properties,g=v.size;return et(t)&&u&&f&&p&&!1!==h&&!1!==d?l(u,f,p,h,d,g):!r&&Ct.a.resolve(!1)},i};var Xi=function(t){var e,n,r,o,a,c,s,u=t.get(t.constants.SETTINGS),l=Object(v.e)(u,"core.key",void 0),f=Object(v.e)(u,"core.trafficType",void 0);"localhost"===u.mode&&void 0===l?u.core.key="localhost_key":u.core.key=P(l,"Client instantiation");var p=[u.core.key];if(void 0!==f){var h=$(f,"Client instantiation");u.core.trafficType=h,p.push(h)}var d=$i(t,!0,p.length>1);return d.isBrowserClient=!0,d.getTreatment=Zt()(e=d.getTreatment).call(e,d,u.core.key),d.getTreatmentWithConfig=Zt()(n=d.getTreatmentWithConfig).call(n,d,u.core.key),d.getTreatments=Zt()(r=d.getTreatments).call(r,d,u.core.key),d.getTreatmentsWithConfig=Zt()(o=d.getTreatmentsWithConfig).call(o,d,u.core.key),d.track=(c=Zt()(a=d.track)).call.apply(c,i()(s=[a,d]).call(s,p)),d};var Zi=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var a,c=!1;function s(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];c||(a=ke()((function(){t.apply(void 0,i()(o).call(o,[s]))}),n))}function u(){clearTimeout(a),a=void 0,c=!0}return u.reset=function(){var t;clearTimeout(a),a=void 0,s.apply(void 0,i()(t=[e]).call(t,r))},t.apply(void 0,i()(r).call(r,[s])),u},to=function(t,e){return e=e||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],a=[],c={},s=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:s,headers:{keys:function(){return o},entries:function(){return a},get:function(t){return c[t.toLowerCase()]},has:function(t){return t.toLowerCase()in c}}}};for(var u in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),a.push([e,n]),c[e]=c[e]?c[e]+","+n:n})),n(s())},i.onerror=r,i.withCredentials="include"==e.credentials,e.headers)i.setRequestHeader(u,e.headers[u]);i.send(e.body||null)}))};var eo=n(123),no=n.n(eo);var ro=n(174),io=n.n(ro),oo=n(67),ao=n.n(oo);function co(){if("undefined"==typeof Reflect||!ao.a)return!1;if(ao.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(ao()(Date,[],(function(){}))),!0}catch(t){return!1}}function so(t,e,n){return(so=co()?ao.a:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(io()(Function).apply(t,r));return n&&de(i,n.prototype),i}).apply(null,arguments)}function uo(t){var e="function"==typeof no.a?new no.a:void 0;return(uo=function(t){if(null===t||!function(t){var e;return-1!==Hn()(e=Function.toString.call(t)).call(e,"[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return so(t,arguments,Te(this).constructor)}return n.prototype=pe()(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),de(n,t)})(t)}function lo(t){function e(){if("undefined"==typeof Reflect||!le.a)return!1;if(le.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(le()(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=Te(t);if(e()){var i=Te(this).constructor;n=le()(r,arguments,i)}else n=r.apply(this,arguments);return ye(this,n)}}var fo=function(t){ge(n,t);var e=lo(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Split Error";return Object(At.a)(this,n),(t=e.call(this,r)).message=r,t}return n}(uo(Error)),po=function(t){ge(n,t);var e=lo(n);function n(t){return Object(At.a)(this,n),e.call(this,t||"Split Timeout Error")}return n}(fo),ho=function(t){ge(n,t);var e=lo(n);function n(t,r){var i;return Object(At.a)(this,n),(i=e.call(this,t||"Split Network Error")).statusCode=r,i}return n}(fo),vo=Object(m.b)("splitio-services:service");function go(t){var e=t.url;return(window&&window.fetch||to)(e,t).then((function(t){if(!t.ok)throw{response:t};return t})).catch((function(n){var r,o,a=n.response,c="";if(a)switch(a.status){case 404:c="Invalid API key or resource not found.";break;default:c=a.statusText}else c=n.message;a&&403===a.status||vo[t.logErrorsAsInfo?"info":"error"](i()(r=i()(o="Response status is not OK. Status: ".concat(a?a.status:"NO_STATUS",". URL: ")).call(o,e,". Message: ")).call(r,c));throw new ho(c,a&&a.status)}))}var mo=go;function yo(t,e){var n=g()(t);if($e.a){var r=$e()(t);e&&(r=Qe()(r).call(r,(function(e){return qe()(t,e).enumerable}))),n.push.apply(n,r)}return n}function bo(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)H()(n=yo(Object(r),!0)).call(n,(function(e){tn(t,e,r[e])}));else if(ze.a)He()(t,ze()(r));else{var i;H()(i=yo(Object(r))).call(i,(function(e){Ke()(t,e,qe()(r,e))}))}}return t}var So=function(t,e,n){var r=t.core.authorizationKey,i=t.version,o=t.runtime,a=o.ip,c=o.hostname,s={},u={};return s.Accept="application/json",s["Content-Type"]="application/json",s.Authorization="Bearer ".concat(r),s.SplitSDKVersion=i,a&&(s.SplitSDKMachineIP=a),c&&(s.SplitSDKMachineName=c),bo(bo({headers:s,url:t.url(e)},u),n)};function To(t,e){var n=g()(t);if($e.a){var r=$e()(t);e&&(r=Qe()(r).call(r,(function(e){return qe()(t,e).enumerable}))),n.push.apply(n,r)}return n}function Eo(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)H()(n=To(Object(r),!0)).call(n,(function(e){tn(t,e,r[e])}));else if(ze.a)He()(t,ze()(r));else{var i;H()(i=To(Object(r))).call(i,(function(e){Ke()(t,e,qe()(r,e))}))}}return t}function _o(t,e){var n=g()(t);if($e.a){var r=$e()(t);e&&(r=Qe()(r).call(r,(function(e){return qe()(t,e).enumerable}))),n.push.apply(n,r)}return n}function Oo(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)H()(n=_o(Object(r),!0)).call(n,(function(e){tn(t,e,r[e])}));else if(ze.a)He()(t,ze()(r));else{var i;H()(i=_o(Object(r))).call(i,(function(e){Ke()(t,e,qe()(r,e))}))}}return t}function wo(t){var e=[],n=t.toJSON();return Object(v.d)(n,(function(t,n){e.push({name:n,delta:t})})),e}var xo=go;function Ao(t,e){return So(t,"/testImpressions/bulk",s()({method:"POST"},e))}function ko(t,e){var n=e.core.labelsEnabled,r=Object(v.g)(t.state(),"feature"),i=[];for(var o in r){var a;i.push({testName:o,keyImpressions:p()(a=r[o]).call(a,(function(t){var e={keyName:t.keyName,treatment:t.treatment,time:t.time,changeNumber:t.changeNumber};return n&&(e.label=t.label),t.bucketingKey&&(e.bucketingKey=t.bucketingKey),e}))})}return i}function No(t){function e(){if("undefined"==typeof Reflect||!le.a)return!1;if(le.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(le()(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=Te(t);if(e()){var i=Te(this).constructor;n=le()(r,arguments,i)}else n=r.apply(this,arguments);return ye(this,n)}}var jo=function(){function t(e){var n,r,i;Object(At.a)(this,t),this.storage=e,this.latency=Zt()(n=this.latency).call(n,this),this.count=Zt()(r=this.count).call(r,this),this.countException=Zt()(i=this.countException).call(i,this)}return Object(kt.a)(t,[{key:"latency",value:function(t){this.storage.metrics.track("".concat(this.metricType,".time"),t)}},{key:"count",value:function(t){var e;this.storage.count.track(i()(e="".concat(this.metricType,".status.")).call(e,t))}},{key:"countException",value:function(){this.storage.count.track("".concat(this.metricType,".exception"))}}]),t}(),Ro=function(t){ge(n,t);var e=No(n);function n(t){var r;return Object(At.a)(this,n),(r=e.call(this,t)).metricType="segmentChangeFetcher",r}return n}(jo),Io=function(t){ge(n,t);var e=No(n);function n(t){var r;return Object(At.a)(this,n),(r=e.call(this,t)).metricType="splitChangeFetcher",r}return n}(jo),Co=function(t){ge(n,t);var e=No(n);function n(t){var r;return Object(At.a)(this,n),(r=e.call(this,t)).metricType="mySegmentsFetcher",r}return n}(jo),Do=function(){function t(e){var n,r,i,o,a;Object(At.a)(this,t),this.storage=e,this.ready=Zt()(n=this.ready).call(n,this),this.getTreatment=Zt()(r=this.getTreatment).call(r,this),this.getTreatments=Zt()(i=this.getTreatments).call(i,this),this.getTreatmentWithConfig=Zt()(o=this.getTreatmentWithConfig).call(o,this),this.getTreatmentsWithConfig=Zt()(a=this.getTreatmentsWithConfig).call(a,this)}return Object(kt.a)(t,[{key:"ready",value:function(t){this.storage.metrics.track("sdk.ready",t)}},{key:"getTreatment",value:function(t){this.storage.metrics.track("sdk.getTreatment",t)}},{key:"getTreatments",value:function(t){this.storage.metrics.track("sdk.getTreatments",t)}},{key:"getTreatmentWithConfig",value:function(t){this.storage.metrics.track("sdk.getTreatmentWithConfig",t)}},{key:"getTreatmentsWithConfig",value:function(t){this.storage.metrics.track("sdk.getTreatmentsWithConfig",t)}}]),t}(),Lo=Object(m.b)("splitio-metrics"),Mo=function(t){var e=0,n=t.get(t.constants.SETTINGS),r=t.get(t.constants.STORAGE),o=function(){if(r.metrics.isEmpty()&&r.count.isEmpty())return Ct.a.resolve();Lo.info("Pushing metrics");var t,e,i,o=Kn.start(Kn.TaskNames.METRICS_PUSH),a=r.metrics.isEmpty()?null:mo(function(t,e){return So(t,"/metrics/times",s()({method:"POST"},Eo(Eo({},e),{},{logErrorsAsInfo:!0})))}(n,{body:Rt()((t=r.metrics,e=[],i=t.toJSON(),Object(v.d)(i,(function(t,n){e.push({name:n,latencies:t})})),e))})).then((function(){return r.metrics.clear()})).catch((function(){return r.metrics.clear()})),c=r.count.isEmpty()?null:mo(function(t,e){return So(t,"/metrics/counters",s()({method:"POST"},Oo(Oo({},e),{},{logErrorsAsInfo:!0})))}(n,{body:Rt()(wo(r.count))})).then((function(){return r.count.clear()})).catch((function(){return r.count.clear()}));return Ct.a.all([a,c]).then((function(t){return o(),t}))},a=function(){if(r.impressions.isEmpty())return Ct.a.resolve();var t=r.impressions.queue.length;Lo.info("Pushing ".concat(t," impressions"));var o=Kn.start(Kn.TaskNames.IMPRESSIONS_PUSH);return xo(Ao(n,{body:Rt()(ko(r.impressions,n))})).then((function(){e=0,r.impressions.clear()})).catch((function(n){var o,a;e?(Lo.warn(i()(o="Droping ".concat(t," impressions after retry. Reason ")).call(o,n,".")),e=0,r.impressions.clear()):(e++,Lo.warn(i()(a="Failed to push ".concat(t," impressions, keeping data to retry on next iteration. Reason ")).call(a,n,".")))})).then((function(){return o()}))},c=!1,u=!1;return{start:function(){c=Zi((function(t){return a().then((function(){return t()}))}),n.scheduler.impressionsRefreshRate),u=Zi((function(t){return o().then((function(){return t()}))}),n.scheduler.metricsRefreshRate)},flush:function(){return a()},stop:function(){c&&c(),u&&u()},collectors:{segmentChanges:new Ro(r),splitChanges:new Io(r),mySegments:new Co(r),client:new Do(r)}}},Po=go;function Fo(t,e){return So(t,"/events/bulk",s()({method:"POST"},e))}var Go=Object(m.b)("splitio-events"),Uo=function(t){var e=t.get(t.constants.SETTINGS),n=t.get(t.constants.STORAGE),r=function(){if(n.events.isEmpty())return Ct.a.resolve();Go.info("Pushing ".concat(n.events.state().length," queued events."));var t=Kn.start(Kn.TaskNames.EVENTS_PUSH),r=Rt()(n.events.toJSON()),i=function(){return t()};return n.events.clear(),Po(Fo(e,{body:r})).then(i).catch(i)},i=!1,o=!1,a=function(){return o=Zi((function(t){return r().then((function(){return t()}))}),e.scheduler.eventsPushRate)};return{start:function(){e.startup.eventsFirstPushWindow>0?i=ke()(a,e.startup.eventsFirstPushWindow):a()},flush:function(){return r()},stop:function(){i&&clearTimeout(i),o&&o()},flushAndResetTimer:function(){return Go.info("Flushing events and reseting timer."),o&&o.reset(),r()}}},Ko=go;function Bo(t){return"users="+encodeURIComponent(t)}var Ho=n(59),Wo=n.n(Ho);function zo(t){var e,n,r=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(p()(e=(n=r,atob(n)).split("")).call(e,(function(t){var e;return"%"+Wo()(e="00"+t.charCodeAt(0).toString(16)).call(e,-2)})).join(""));return JSON.parse(i)}function Yo(t,e){var n=g()(t);if($e.a){var r=$e()(t);e&&(r=Qe()(r).call(r,(function(e){return qe()(t,e).enumerable}))),n.push.apply(n,r)}return n}function qo(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)H()(n=Yo(Object(r),!0)).call(n,(function(e){tn(t,e,r[e])}));else if(ze.a)He()(t,ze()(r));else{var i;H()(i=Yo(Object(r))).call(i,(function(e){Ke()(t,e,qe()(r,e))}))}}return t}function Vo(t,e){return Ko(function(t,e){var n="/auth";if(e){var r=p()(e).call(e,Bo).join("&");r&&(n+="?"+r)}return So(t,n)}(t,e)).then((function(t){return t.json()})).then((function(t){if(t.token){var e=zo(t.token);if("number"!=typeof e.iat||"number"!=typeof e.exp)throw'token properties "issuedAt" (iat) or "expiration" (exp) are missing or invalid';var n=JSON.parse(e["x-ably-capability"]);return qo(qo({},t),{},{decodedToken:e,channels:n})}return t}))}function Qo(){return window&&"function"==typeof window.EventSource?window.EventSource:void 0}var Jo=function(){function t(e,n,r){Object(At.a)(this,t),this.baseMillis=n||t.DEFAULT_BASE_MILLIS,this.maxMillis=r||t.DEFAULT_MAX_MILLIS,this.attempts=0,this.cb=e}return Object(kt.a)(t,[{key:"scheduleCall",value:function(){var t=this,e=Math.min(this.baseMillis*Math.pow(2,this.attempts),this.maxMillis);return this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=ke()((function(){t.cb()}),e),this.attempts++,e}},{key:"reset",value:function(){this.attempts=0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=0)}}]),t}();Jo.DEFAULT_BASE_MILLIS=1e3,Jo.DEFAULT_MAX_MILLIS=18e5;var $o=Jo,Xo=function(){function t(e,n){var r,i;Object(At.a)(this,t),this.mySegmentsStorage=e,this.mySegmentsProducer=n,this.maxChangeNumber=0,this.segmentList=void 0,this.currentChangeNumber=-1,this.put=Zt()(r=this.put).call(r,this),this.__handleMySegmentUpdateCall=Zt()(i=this.__handleMySegmentUpdateCall).call(i,this),this.backoff=new $o(this.__handleMySegmentUpdateCall)}return Object(kt.a)(t,[{key:"__handleMySegmentUpdateCall",value:function(){var t=this;if(this.maxChangeNumber>this.currentChangeNumber){this.handleNewEvent=!1;var e=this.maxChangeNumber;this.mySegmentsProducer.synchronizeMySegments(this.segmentList).then((function(n){!1!==n&&(t.currentChangeNumber=Math.max(t.currentChangeNumber,e)),t.handleNewEvent?t.__handleMySegmentUpdateCall():t.backoff.scheduleCall()}))}}},{key:"put",value:function(t,e){t<=this.currentChangeNumber||t<=this.maxChangeNumber||(this.maxChangeNumber=t,this.handleNewEvent=!0,this.backoff.reset(),this.segmentList=e,this.mySegmentsProducer.isSynchronizingMySegments()||this.__handleMySegmentUpdateCall())}}]),t}(),Zo=function(){function t(e,n,r){var i,o,a;Object(At.a)(this,t),this.splitStorage=e,this.splitProducer=n,this.maxChangeNumber=0,this.splitsEventEmitter=r,this.put=Zt()(i=this.put).call(i,this),this.killSplit=Zt()(o=this.killSplit).call(o,this),this.__handleSplitUpdateCall=Zt()(a=this.__handleSplitUpdateCall).call(a,this),this.backoff=new $o(this.__handleSplitUpdateCall)}return Object(kt.a)(t,[{key:"__handleSplitUpdateCall",value:function(){var t=this;this.maxChangeNumber>this.splitStorage.getChangeNumber()&&(this.handleNewEvent=!1,this.splitProducer.synchronizeSplits().then((function(){t.handleNewEvent?t.__handleSplitUpdateCall():t.backoff.scheduleCall()})))}},{key:"put",value:function(t){t<=this.splitStorage.getChangeNumber()||t<=this.maxChangeNumber||(this.maxChangeNumber=t,this.handleNewEvent=!0,this.backoff.reset(),this.splitProducer.isSynchronizingSplits()||this.__handleSplitUpdateCall())}},{key:"killSplit",value:function(t,e,n){var r=this;this.splitStorage.killLocally(e,n,t).then((function(e){e&&r.splitsEventEmitter.emit(r.splitsEventEmitter.SDK_SPLITS_ARRIVED,!0),r.put(t)}))}}]),t}(),ta=/^control_/,ea=function(){function t(e,n){var r;Object(At.a)(this,t),this.EventSource=e,this.streamingUrl=n.url("/sse"),this.reopen=Zt()(r=this.reopen).call(r,this)}return Object(kt.a)(t,null,[{key:"getInstance",value:function(e){var n=Qo();if(n)return new t(n,e)}}]),Object(kt.a)(t,[{key:"setEventHandler",value:function(t){this.handler=t}},{key:"open",value:function(t){var e,n,r,o;this.close(),this.authToken=t;var a=p()(e=g()(t.channels)).call(e,(function(t){var e=ta.test(t)?"[?occupancy=metrics.publishers]":"";return encodeURIComponent(e+t)})).join(","),c=i()(n=i()(r=i()(o="".concat(this.streamingUrl,"?channels=")).call(o,a,"&accessToken=")).call(r,t.token,"&v=")).call(n,"1.1","&heartbeats=true");this.connection=new this.EventSource(c),this.handler&&(this.connection.onopen=this.handler.handleOpen,this.connection.onmessage=this.handler.handleMessage,this.connection.onerror=this.handler.handleError)}},{key:"close",value:function(){this.connection&&this.connection.close()}},{key:"reopen",value:function(){this.open(this.authToken)}}]),t}(),na="STREAMING_DISABLED",ra="STREAMING_PAUSED",ia="STREAMING_RESUMED";var oa=/control_pri$/;var aa=Object(m.b)("splitio-sync:sse-handler");function ca(t){var e,n,r,i,o,a=(e=t,n=-1,r=!0,i=-1,o=!0,{handleOpen:function(){e.emit("PUSH_CONNECT")},isStreamingUp:function(){return o&&r},handleOccupancyEvent:function(t,i,a){oa.test(i)&&a>n&&(n=a,o&&(0===t&&r?e.emit("PUSH_DISCONNECT"):0===t||r||e.emit("PUSH_CONNECT")),r=0!==t)},handleControlEvent:function(t,n,a){oa.test(n)&&a>i&&(i=a,t===na?e.emit("PUSH_DISABLED"):r&&(t===ra&&o?e.emit("PUSH_DISCONNECT"):t!==ia||o||e.emit("PUSH_CONNECT")),o=t===ia)}});return{handleOpen:function(){a.handleOpen()},handleError:function(e){var n=e;try{n=function(t){return Object(v.k)(t.data)&&(t.parsedData=JSON.parse(t.data)),t}(e)}catch(t){aa.warn("Error parsing SSE error notification: ".concat(t))}t.emit("SSE_ERROR",n)},handleMessage:function(e){var n;try{n=function(t){var e=JSON.parse(t.data);return e.parsedData=JSON.parse(e.data),e.name&&"[meta]occupancy"===e.name&&(e.parsedData.type="OCCUPANCY"),e}(e)}catch(t){return void aa.warn("Error parsing new SSE message notification: ".concat(t))}var r=n,i=r.parsedData,o=r.data,c=r.channel,s=r.timestamp;if(aa.debug("New SSE message received, with data: ".concat(o,".")),a.isStreamingUp()||"OCCUPANCY"===i.type||"CONTROL"===i.type)switch(i.type){case"SPLIT_UPDATE":t.emit("SPLIT_UPDATE",i.changeNumber);break;case"SEGMENT_UPDATE":t.emit("SEGMENT_UPDATE",i.changeNumber,i.segmentName);break;case"MY_SEGMENTS_UPDATE":t.emit("MY_SEGMENTS_UPDATE",i,c);break;case"SPLIT_KILL":t.emit("SPLIT_KILL",i.changeNumber,i.splitName,i.defaultTreatment);break;case"OCCUPANCY":a.handleOccupancyEvent(i.metrics.publishers,c,s);break;case"CONTROL":a.handleControlEvent(i.controlType,c,s)}}}}function sa(t){return e=hi.hash(t,0).toString(),btoa(e);var e}var ua=Object(m.b)("splitio-sync:push-manager");function la(t,e){if(n=ua,Qo()?"function"==typeof atob&&"function"==typeof btoa||(n.warn('"atob" and "btoa" functions for Base64 encoding are not available. Falling back to polling mode.'),0):(n.warn("EventSource API is not available. Falling back to polling mode."),0)){var n,r=new je.a,o=t.get(t.constants.READINESS).splits,c=t.get(t.constants.SETTINGS),u=t.get(t.constants.STORAGE),l=ea.getInstance(c),f=ca(r);l.setEventHandler(f);var p,h={},v=[],d=!1,m=new $o(_,c.scheduler.authRetryBackoffBase),y=new $o(l.reopen,c.scheduler.streamingReconnectBackoffBase),b=0;r.on("PUSH_DISCONNECT",w),r.on("PUSH_DISABLED",(function(){O(),r.emit("PUSH_DISCONNECT")})),r.on("SSE_ERROR",(function(t){var e,n;l.close(),n=!t.parsedData||400!==t.parsedData.statusCode&&401!==t.parsedData.statusCode?y.scheduleCall():m.scheduleCall();var o=t.parsedData&&t.parsedData.message;ua.error(i()(e="Fail to connect to streaming".concat(o?', with error message: "'.concat(o,'"'):"",". Attempting to reconnect in ")).call(e,n/1e3," seconds.")),r.emit("PUSH_DISCONNECT")}));var S=t.get(t.constants.PRODUCER),T=new Zo(u.splits,S,o);if(v.push(T),r.on("SPLIT_KILL",T.killSplit),r.on("SPLIT_UPDATE",T.put),e)r.on("MY_SEGMENTS_UPDATE",(function(n,r){var i=r.split("_")[2],o=h[i];if(o&&e[o]){var a=e[o].get(t.constants.MY_SEGMENTS_CHANGE_WORKER,!0);a&&a.put(n.changeNumber,n.includesPayload?n.segmentList?n.segmentList:[]:void 0)}}));else{var E=new Xo(u.segments,S);v.push(E),r.on("SEGMENT_UPDATE",E.put)}return s()(a()(r),{stop:function(){O(),w()},start:_,startNewClient:function(t,e){var n=sa(t),r=e.get(e.constants.STORAGE),i=e.get(e.constants.PRODUCER);h[n]||(h[n]=t,d=!0);var o=new Xo(r.segments,i);v.push(o),e.put(e.constants.MY_SEGMENTS_CHANGE_WORKER,o),ke()((function(){d&&(d=!1,_())}),0)},removeClient:function(t){var e=sa(t);delete h[e]}})}function _(){p=!1,ua.info("Connecting to push streaming.");var t=e?g()(e):void 0;Vo(c,t).then((function(n){if(!p){if(m.reset(),y.reset(),!n.pushEnabled)return ua.info("Streaming is not available. Switching to polling mode."),void r.emit("PUSH_DISCONNECT");if(!(t&&t.length<g()(e).length)){var i=n.decodedToken;l.open(n),function(t,e){b&&clearTimeout(b);var n=e-t-600;ua.info("Refreshing streaming token in ".concat(n," seconds.")),b=ke()(_,1e3*n)}(i.iat,i.exp)}}})).catch((function(t){var e;if(!p)if(l.close(),r.emit("PUSH_DISCONNECT"),401!==t.statusCode){var n=m.scheduleCall();ua.error(i()(e='Fail to authenticate for push notifications, with error message: "'.concat(t.message,'". Attempting to reauthenticate in ')).call(e,n/1e3," seconds."))}else ua.error('Fail to authenticate for push notifications, with error message: "'.concat(t.message,'".'))}))}function O(){p=!0,ua.info("Disconnecting from push streaming."),l.close(),b&&clearTimeout(b),m.reset(),y.reset()}function w(){H()(v).call(v,(function(t){return t.backoff.reset()}))}}var fa=Object(m.b)("splitio-producer:task"),pa=function(t,e){var n=Object(v.f)(t),r=!1;return{start:function(){var o;r||(fa.debug(i()(o="Starting ".concat(n," refreshing each ")).call(o,e)),r=Zi((function(e){fa.debug("Running ".concat(n)),t().then((function(){return e()}))}),e))},stop:function(){fa.debug("Stopping ".concat(n)),r&&r(),r=!1},isRunning:function(){return!!r}}};var ha=function(t,e){return t<1?e:new Ct.a((function(n,r){var i=ke()((function(){r(new po("Operation timed out because it exceeded the configured time limit of ".concat(t,"ms.")))}),t);e.then((function(t){clearTimeout(i),n(t)}),(function(t){clearTimeout(i),r(t)}))}))},va=go;function da(t,e){return So(t,"/splitChanges?since=".concat(e))}var ga=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=va(da(t,e)),a=n||i;return o=Kn.start(Kn.TaskNames.SPLITS_FETCH,!!a&&r,o),n&&(o=ha(t.startup.requestTimeoutBeforeReady,o)),o.then((function(t){return t.json().catch((function(t){throw new fo(t.message)}))}))},ma=function(t){var e=new Zn.a,n=!0,r=!1,i=void 0;try{for(var o,a=l()(t);!(n=(o=a.next()).done);n=!0){var c=o.value.matcherGroup.matchers,s=!0,u=!1,f=void 0;try{for(var p,h=l()(c);!(s=(p=h.next()).done);s=!0){var v=p.value,d=v.matcherType,g=v.userDefinedSegmentMatcherData;"IN_SEGMENT"===d&&e.add(g.segmentName)}}catch(t){u=!0,f=t}finally{try{s||null==h.return||h.return()}finally{if(u)throw f}}}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},ya=Object(m.b)("splitio-producer:split-changes");function ba(t){var e=Vt()(t).call(t,(function(t,e){if("ACTIVE"===e.status){t.added.push([e.name,Rt()(e)]);var n=!0,r=!1,i=void 0;try{for(var o,a=l()(ma(e.conditions));!(n=(o=a.next()).done);n=!0){var c=o.value;t.segments.add(c)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}else t.removed.push(e.name);return t}),{added:[],removed:[],segments:new Zn.a});return e.segments=wt(e.segments),e}var Sa=go;function Ta(t){return So(t,"/mySegments/".concat(_e(t.core.key)))}var Ea=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=Sa(Ta(t));return r=Kn.start(Kn.TaskNames.MY_SEGMENTS_FETCH,!!e&&n,r),e&&(r=ha(t.startup.requestTimeoutBeforeReady,r)),r.then((function(t){return t.json().catch((function(t){throw new fo(t.message)}))})).then((function(t){var e;return p()(e=t.mySegments).call(e,(function(t){return t.name}))}))},_a=Object(m.b)("splitio-producer:my-segments");var Oa=Object(m.b)("splitio-producer:mySegmentsHandler"),wa=function(t){var e=t.get(t.constants.SETTINGS),n=t.get(t.constants.STORAGE).splits,r=t.get(t.constants.READINESS),o=r.splits,a=r.segments,c=function(t){var e=t.getAll(),n=e[t.constants.SETTINGS],r=e[t.constants.READINESS],o=e[t.constants.STORAGE],a=e[t.constants.COLLECTORS],c=r.segments,s=!0,u=!0;function l(t){var e=o.segments.resetSegments(t);o.splits.usesSegments()&&(e||s)&&(s=!1,c.emit(c.SDK_SEGMENTS_ARRIVED))}return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return(r?new Ct.a((function(t){l(r),t()})):Ea(n,u,a).then((function(t){u=!1,l(t)}))).catch((function(r){var o;return r instanceof fo||ke()((function(){throw r}),0),u&&n.startup.retriesOnFailureBeforeReady>e?(e+=1,_a.warn(i()(o="Retrying download of segments #".concat(e,". Reason: ")).call(o,r)),t(e)):(u=!1,!1)}))}}(t),s=pa(l,e.scheduler.segmentsRefreshRate);o.on(o.SDK_SPLITS_ARRIVED,(function(){if(!f)return;var t=n.usesSegments();t!==s.isRunning()&&(Oa.info("Turning segments data polling ".concat(t?"ON":"OFF",".")),t?s.start():s.stop())})),n.usesSegments()?o.once(o.SDK_SPLITS_ARRIVED,p):ke()(p,0);var u=!1;function l(t){return u=!0,c(0,t).then((function(t){return u=!1,t}))}var f=!1;function p(){t.get(t.constants.READY,!0)||n.usesSegments()||a.emit(a.SDK_SEGMENTS_ARRIVED)}return{start:function(){f=!0,n.usesSegments()&&s.start()},stop:function(){f=!1,s.stop()},isRunning:function(){return f},isSynchronizingMySegments:function(){return u},synchronizeMySegments:l}},xa=Object(m.b)("splitio-producer:updater"),Aa=function(t){var e=t.get(t.constants.SETTINGS),n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getAll(),r=n[t.constants.SETTINGS],o=n[t.constants.READINESS],a=n[t.constants.STORAGE],c=n[t.constants.COLLECTORS],s=o.splits,u=!0,l=!0;return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;function o(o){ya.debug("Spin up split update using since = ".concat(o));var f=ga(r,o,u,c,e).then((function(t){u=!1;var e=ba(t.splits);return ya.debug("New splits ".concat(e.added.length)),ya.debug("Removed splits ".concat(e.removed.length)),ya.debug("Segment names collected ".concat(e.segments)),Ct.a.all([a.splits.addSplits(e.added),a.splits.removeSplits(e.removed),a.splits.setChangeNumber(t.till),a.segments.registerSegments(e.segments)]).then((function(){(o!==t.till||l)&&(l=!1,s.emit(s.SDK_SPLITS_ARRIVED))}))})).catch((function(e){var o;return e instanceof fo||(ke()((function(){throw e}),0),u=!1),ya.warn("Error while doing fetch of Splits. ".concat(e)),u&&r.startup.retriesOnFailureBeforeReady>n?(n+=1,ya.info(i()(o="Retrying download of splits #".concat(n,". Reason: ")).call(o,e)),t(n)):(u=!1,!1)}));return u&&a.splits.checkCache()&&s.emit(s.SDK_SPLITS_CACHE_LOADED),f}var f=a.splits.getChangeNumber(),p=h(f)?f.then(o):Ct.a.resolve(f);return p.then(o)}}(t),r=pa(c,e.scheduler.featuresRefreshRate),o=wa(t),a=!1;function c(){return a=!0,n().then((function(t){return a=!1,t}))}return{start:function(){xa.info("Starting BROWSER producer"),r.start(),o.start()},stop:function(){xa.info("Stopping BROWSER producer"),r.stop(),o.stop()},isRunning:r.isRunning,isSynchronizingSplits:function(){return a},synchronizeSplits:c,isSynchronizingMySegments:o.isSynchronizingMySegments,synchronizeMySegments:o.synchronizeMySegments}},ka=Object(m.b)("splitio-sync:sync-manager");var Na=Object(m.b)("splitio-client:cleanup"),ja=function(){function t(e){var n;Object(At.a)(this,t),this.storage=e.get(e.constants.STORAGE),this.settings=e.get(e.constants.SETTINGS),this.flushData=Zt()(n=this.flushData).call(n,this)}return Object(kt.a)(t,[{key:"start",value:function(){window&&window.addEventListener&&(Na.debug("Registering flush handler when unload page event is triggered."),window.addEventListener("unload",this.flushData))}},{key:"stop",value:function(){window&&window.removeEventListener&&(Na.debug("Deregistering flush handler when unload page event is triggered."),window.removeEventListener("unload",this.flushData))}},{key:"flushData",value:function(){this._flushImpressions(),this._flushEvents()}},{key:"_flushImpressions",value:function(){var t=this.storage.impressions;if(!t.isEmpty()){var e=this.settings.url("/testImpressions/beacon"),n=ko(t,this.settings);this._sendBeacon(e,n)||xo(Ao(this.settings,{body:Rt()(n)})),t.clear()}}},{key:"_flushEvents",value:function(){var t=this.storage.events;if(!t.isEmpty()){var e=this.settings.url("/events/beacon"),n=t.toJSON();this._sendBeacon(e,n)||Po(Fo(this.settings,{body:Rt()(n)})),t.clear()}}},{key:"_sendBeacon",value:function(t,e){if(navigator&&navigator.sendBeacon){var n=Rt()({entries:e,token:this.settings.core.authorizationKey,sdk:this.settings.version});return navigator.sendBeacon(t,n)}return!1}}]),t}(),Ra={};var Ia=function(t,e,n){var r,i=!!n,o=t.get(t.constants.SETTINGS),c=t.get(t.constants.READINESS),u=t.get(t.constants.STORAGE),l=t.get(t.constants.STATUS_MANAGER),f=c.gate,p=c.splits,h=c.segments,d=f.SDK_READY,g=i?void 0:Mo(t),m=i?void 0:Uo(t),y=i?void 0:new ja(t);switch(o.mode){case"producer":case"standalone":t.put(t.constants.COLLECTORS,g&&g.collectors),i?r=Ra[o.core.authorizationKey].shared(t):(r=function(t){var e={},n=t.get(t.constants.SETTINGS),r=u(!1,t),i=n.streamingEnabled?la(t,e):void 0,o=t.get(t.constants.PRODUCER);function a(){o.isRunning()?ka.info("Streaming couldn't connect. Continue periodic fetch of data."):(ka.info("Streaming not available. Starting periodic fetch of data."),Object(v.d)(e,(function(t){t.get(t.constants.PRODUCER).start()})))}function c(){o.isRunning()&&(ka.info("PUSH (re)connected. Syncing and stopping periodic fetch of data."),Object(v.d)(e,(function(t){t.get(t.constants.PRODUCER).stop()}))),s()}function s(){t.get(t.constants.PRODUCER).synchronizeSplits(),Object(v.d)(e,(function(t){t.get(t.constants.PRODUCER).synchronizeMySegments()}))}function u(t,n){var r=t?wa(n):Aa(n),u=n.get(n.constants.SETTINGS),l=Object(v.p)(_e(u.core.key));return n.put(n.constants.PRODUCER,r),e[l]&&ka.warn("A client with the same user key has already been created. Only the new instance will be properly synchronized."),e[l]=n,{start:function(){i?(t?o.isRunning()?r.start():r.synchronizeMySegments():(s(),i.on("PUSH_CONNECT",c),i.on("PUSH_DISCONNECT",a)),i.startNewClient(l,n)):r.start()},stop:function(){e[l]&&(delete e[l],i&&(i.removeClient(l),t||i.stop()),r.isRunning()&&r.stop())}}}return r.shared=Zt()(u).call(u,null,!0),r}(t),Ra[o.core.authorizationKey]=r);break;case"consumer":t.put(t.constants.READY_FROM_CACHE,!0)}if(e&&r&&!i){var b=e.sdkReadyTracker,T=e.splitsReadyTracker,E=e.segmentsReadyTracker;b.setCollectorForTask(g.collectors),f.once(d,b),p.once(p.SDK_SPLITS_ARRIVED,T),h.once(h.SDK_SEGMENTS_ARRIVED,E)}r&&r.start(),g&&g.start(),m&&t.put(t.constants.EVENTS,m)&&m.start(),t.put(t.constants.COLLECTORS,n);var _=s()(a()(l),Xi(t),{destroy:function(){return r&&r.stop(),g&&g.stop(),m&&m.stop(),Ct.a.all([g&&g.flush(),m&&m.flush()]).then((function(){c.destroy(),y&&y.stop(),u.destroy&&u.destroy(),t.put(t.constants.DESTROYED,!0),i||(S(o.core.authorizationKey),delete Ra[o.core.authorizationKey])}))}});return!i&&y.start(_.destroy),{api:_,metricCollectors:g&&g.collectors}};function Ca(t){var e=t.treatment;return lt()(t)?{conditionType:"WHITELIST",matcherGroup:{combiner:"AND",matchers:[{keySelector:null,matcherType:"WHITELIST",negate:!1,whitelistMatcherData:{whitelist:Object(v.k)(lt()(t))?[lt()(t)]:lt()(t)}}]},partitions:[{treatment:e,size:100}],label:"whitelisted ".concat(e)}:{conditionType:"ROLLOUT",matcherGroup:{combiner:"AND",matchers:[{keySelector:null,matcherType:"ALL_KEYS",negate:!1}]},partitions:[{treatment:e,size:100}],label:"default rule"}}var Da={emptyMock:1};function La(t){var e=g()(t);return e.length!==g()(Da).length?(Da=t,!0):Ir()(e).call(e,(function(e){var n,r,i=!Da[e],o=(n=Da[e],r=t[e],Object(me.a)(n)!==Object(me.a)(r)||("string"==typeof n?n!==r:n.treatment!==r.treatment||n.config!==r.config)),a=i||o;return a&&(Da=t),a}))}var Ma=function(t){var e=t.features||{};if(!La(e))return!1;var n={};return Object(v.d)(e,(function(t,e){var r=t,i=null;Object(v.j)(t)&&(r=t.treatment,i=t.config||i);var o={};null!==i&&(o[r]=i),n[e]={conditions:[Ca({treatment:r})],configurations:o}})),n},Pa=Object(m.b)("splitio-producer:offline");var Fa=function(t,e){var n=e.getAll(),r=n[e.constants.SETTINGS],i=n[e.constants.READINESS],o=n[e.constants.STORAGE];return function(){var e=[],n=null,a={};try{a=t(r)}catch(t){n=t,Pa.error("There was an issue loading the mock Splits data, no changes will be applied to the current cache. ".concat(t))}return!n&&a?(Pa.debug("Splits data: "),Pa.debug(Rt()(a)),Object(v.d)(a,(function(t,n){e.push([n,Rt()({name:n,status:"ACTIVE",killed:!1,trafficAllocation:100,defaultTreatment:"control",conditions:t.conditions||[],configurations:t.configurations,trafficTypeName:t.trafficTypeName})])})),Ct.a.all([o.splits.flush(),o.splits.addSplits(e)]).then((function(){i.splits.emit(i.splits.SDK_SPLITS_ARRIVED),i.segments.emit(i.segments.SDK_SEGMENTS_ARRIVED)}))):Ct.a.resolve()}},Ga=Zt()(Fa).call(Fa,null,Ma),Ua=function(t){var e=t.get(t.constants.SETTINGS),n=Ga(t);return pa(n,e.scheduler.offlineRefreshRate)};var Ka=function(t,e){var n=!e,r=t.get(t.constants.READINESS),i=t.get(t.constants.STORAGE),o=t.get(t.constants.STATUS_MANAGER);n&&ke()((function(){r.gate.emit(r.gate.SDK_READY)}),0);var c=n?void 0:Ua(t);return c&&c.start(),{api:s()(a()(o),Xi(t),{destroy:function(){return c&&c.stop(),r.destroy(),i.destroy&&i.destroy(),t.put(t.constants.DESTROYED,!0),!n&&S(),Ct.a.resolve()}}),metricCollectors:!1}};function Ba(t,e){var n=!1,r=!1;var i=function t(i){var o=new Ct.a((function(t,n){return i.then(t,(function(t){r?n(t):e(t)}))})),a=o.then;return o.then=function(e,i){var c=a.call(o,e,i);return"function"==typeof e&&(n=!0),"function"==typeof i?(r=!0,c):t(c)},o}(t);return i.hasOnFulfilled=function(){return n},i}var Ha=Object(m.b)("");function Wa(t){Ha.error(t)}function za(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.get(t.constants.READINESS).gate,r=0,i=!1,o=!1,c=n.SDK_READY,u=n.SDK_READY_FROM_CACHE,l=n.SDK_UPDATE,f=n.SDK_READY_TIMED_OUT;n.on("removeListener",(function(t){t===c&&r--})),n.on("newListener",(function(t){t!==c&&t!==f||(i?Ha.error("A listener was added for ".concat(t===c?"SDK_READY":"SDK_READY_TIMED_OUT"," on the SDK, which has already fired and won't be emitted again. The callback won't be executed.")):t===c&&r++)}));var p=h();function h(){var a=Ba(new Ct.a((function(s,u){n.once(c,(function(){r!==e||a.hasOnFulfilled()||Ha.warn("No listeners for SDK Readiness detected. Incorrect control treatments could have been logged if you called getTreatment/s while the SDK was not yet ready."),t.put(t.constants.READY,!0),i=!0,s()})),n.once(f,(function(e){t.put(t.constants.HAS_TIMEDOUT,!0),o=!0,u(e)}))})),Wa);return a}return n.once(u,(function(){Ha.info("Split SDK is ready from cache."),t.put(t.constants.READY_FROM_CACHE,!0)})),s()(a()(n),{Event:{SDK_READY:c,SDK_READY_FROM_CACHE:u,SDK_UPDATE:l,SDK_READY_TIMED_OUT:f},ready:function(){return o?i?Ct.a.resolve():Ba(Ct.a.reject("Split SDK has emitted SDK_READY_TIMED_OUT event."),Wa):p},__context:t})}var Ya=Object(m.b)("splitio-ga-to-split");var qa,Va=(qa={eventTypeId:{event:"eventAction",social:"socialAction"},eventValue:{event:"eventValue",timing:"timingValue"},eventProperties:{pageview:["page"],screenview:["screenName"],event:["eventCategory","eventLabel"],social:["socialNetwork","socialTarget"],timing:["timingCategory","timingVar","timingLabel"],exception:["exDescription","exFatal"]}},function(t){var e=t.get("hitType"),n=t.get(qa.eventTypeId[e]||"hitType"),r=t.get(qa.eventValue[e]),i={},o=qa.eventProperties[e];if(o)for(var a=0;a<o.length;a++)i[o[a]]=t.get(o[a]);return{eventTypeId:n,value:r,properties:i,timestamp:Nn()()}});var Qa=/^[^a-zA-Z0-9]+/,Ja=/[^-_.:a-zA-Z0-9]+/g;var $a=function(t,e,n){var r,o,a,c={prefix:"ga",identities:n.key&&n.trafficType?[{key:n.key,trafficType:n.trafficType}]:void 0};r="splitTracker",o=function n(r,o){Object(At.a)(this,n);var a=s()({},c,t,o);this.tracker=r;var u=function(t){if(!z()(t))return[];var e=Object(v.q)(t);return Qe()(e).call(e,(function(t){if(!t)return!1;var e=t.key,n=t.trafficType;return!(!Object(v.k)(e)&&!Object(v.i)(e)||!Object(v.k)(n))}))}(a.identities);if(0!==u.length){var l=u.length-a.identities.length;l&&Ya.warn("".concat(l," identities were discarded because they are invalid or duplicated. Identities must be an array of objects with key and trafficType.")),a.identities=u,Object(v.k)(a.prefix)||(Ya.warn("The provided `prefix` was ignored since it is invalid. Please check that you are passing a string object as `prefix`."),a.prefix=void 0);var f=r.get("sendHitTask");r.set("sendHitTask",(function(t){var n;if(f(t),!1!==a.hits&&!t.get("splitHit")){try{if(Qe()(a)&&!Qe()(a).call(a,t))return}catch(t){return void Ya.warn("GaToSplit custom filter threw: ".concat(t))}var r,o=Va(t);if(a.mapper){try{o=a.mapper(t,o)}catch(t){return void Ya.warn("GaToSplit custom mapper threw: ".concat(t))}if(!o)return}a.prefix&&(o.eventTypeId=i()(n="".concat(a.prefix,".")).call(n,o.eventTypeId)),o.eventTypeId=function(t){if(!Object(v.k)(t)||0===t.length)return t;var e=t.replace(Qa,"").replace(Ja,"_"),n=Wo()(e).call(e,0,80);return n.length<e.length&&Ya.warn("EventTypeId was truncated because it cannot be more than 80 characters long."),n}(o.eventTypeId),function(t){return!(!O(t.eventTypeId,"splitio-ga-to-split:mapper")||!1===x(t.value,"splitio-ga-to-split:mapper")||!1===I(t.properties,"splitio-ga-to-split:mapper").properties||t.timestamp&&!Object(v.i)(t.timestamp)||t.key&&!1===P(t.key,"splitio-ga-to-split:mapper")||t.trafficTypeName&&!1===$(t.trafficTypeName,"splitio-ga-to-split:mapper"))}(o)&&(o.key&&o.trafficTypeName?e.events.track(event):H()(r=a.identities).call(r,(function(t){var n=s()({key:t.key,trafficTypeName:t.trafficType},o);e.events.track(n)})))}})),Ya.info("Started GA-to-Split integration")}else Ya.warn("No valid identities were provided. Please check that you are passing a valid list of identities or providing a traffic type at the SDK configuration.")},a=window.GoogleAnalyticsObject||"ga",window[a]=window[a]||function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(window[a].q=window[a].q||[]).push(e)},window[a]("provide",r,o)},Xa=Object(m.b)("splitio-split-to-ga"),Za=function(){function t(e){if(Object(At.a)(this,t),"function"!=typeof t.getGa())return Xa.warn("`ga` command queue not found. No hits will be sent."),{};this.trackerNames=t.defaultTrackerNames,e&&("function"==typeof Qe()(e)&&(this.filter=Qe()(e)),"function"==typeof e.mapper&&(this.mapper=e.mapper),z()(e.trackerNames)&&(this.trackerNames=Object(v.r)(e.trackerNames)),this.impressions=e.impressions,this.events=e.events),Xa.info("Started Split-to-GA integration")}return Object(kt.a)(t,null,[{key:"defaultMapper",value:function(t){var e=t.type,n=t.payload;switch(e){case"IMPRESSION":return{hitType:"event",eventCategory:"split-impression",eventAction:"Evaluate "+n.impression.feature,eventLabel:"Treatment: "+n.impression.treatment+". Targeting rule: "+n.impression.label+".",nonInteraction:!0};case"EVENT":return{hitType:"event",eventCategory:"split-event",eventAction:n.eventTypeId,eventValue:n.value,nonInteraction:!0}}return null}},{key:"getGa",value:function(){return"undefined"!=typeof window?window[window.GoogleAnalyticsObject||"ga"]:void 0}},{key:"validateFieldsObject",value:function(t){return!(!t||!t.hitType)||(Xa.warn("your custom mapper returned an invalid FieldsObject instance. It must be an object with at least a `hitType` field."),!1)}}]),Object(kt.a)(t,[{key:"queue",value:function(e){var n=t.getGa();if(n){var r,i;if(!1===this.impressions&&"IMPRESSION"===e.type)return;if(!1===this.events&&"EVENT"===e.type)return;try{var o;if(Qe()(this)&&!Qe()(o=this).call(o,e))return;if(i=t.defaultMapper(e),this.mapper&&(!(i=this.mapper(e,i))||!t.validateFieldsObject(i)))return}catch(t){return void Xa.warn("SplitToGa queue method threw: ".concat(t,". No hit was sent."))}H()(r=this.trackerNames).call(r,(function(t){var e=t?"".concat(t,".send"):"send";i.splitHit=!0,n(e,i)}))}}}]),t}();Za.defaultTrackerNames=[""];var tc=Za,ec=function(t){var e,n=t.get(t.constants.SETTINGS),r=[];if(H()(e=n.integrations).call(e,(function(e){var i;switch(e.type){case"GOOGLE_ANALYTICS_TO_SPLIT":var o=t.get(t.constants.STORAGE),a=n.core;i=$a(e,o,a);break;case"SPLIT_TO_GOOGLE_ANALYTICS":i=new tc(e)}i&&i.queue&&r.push(i)})),0!==r.length)return{handleImpression:function(t){H()(r).call(r,(function(e){return e.queue({type:"IMPRESSION",payload:t})}))},handleEvent:function(t){H()(r).call(r,(function(e){return e.queue({type:"EVENT",payload:t})}))}}},nc=Object(m.b)("splitio"),rc=function(t,e){var n,r;return i()(n=i()(r="".concat(t.matchingKey?t.matchingKey:t,"-")).call(r,t.bucketingKey?t.bucketingKey:t,"-")).call(n,void 0!==e?e:"")};function ic(t){var e={},n={splitsReadyTracker:Kn.start(Kn.TaskNames.SPLITS_READY),segmentsReadyTracker:Kn.start(Kn.TaskNames.SEGMENTS_READY),sdkReadyTracker:Kn.start(Kn.TaskNames.SDK_READY)},r=new wn,o=_n(t);r.put(r.constants.SETTINGS,o),function(t){var e,n=!1;null==t?y.error("Factory instantiation: you passed a null or undefined api_key, api_key must be a non-empty string."):Object(v.k)(t)?t.length>0?n=t:y.error("Factory instantiation: you passed an empty api_key, api_key must be a non-empty string."):y.error("Factory instantiation: you passed an invalid api_key, api_key must be a non-empty string."),n&&(b[n]?(y.warn(i()(e="Factory instantiation: You already have ".concat(b[n]," ")).call(e,1===b[n]?"factory":"factories"," with this API Key. We recommend keeping only one instance of the factory at all times (Singleton pattern) and reusing it throughout your application.")),b[n]++):(b[n]=1,g()(b).length>1&&y.warn("Factory instantiation: You already have an instance of the Split factory. Make sure you definitely want this additional instance. We recommend keeping only one instance of the factory at all times (Singleton pattern) and reusing it throughout your application.")))}(o.core.authorizationKey);var a=Ge(),c=a(o.startup.readyTimeout);r.put(r.constants.READINESS,c);var s=za(r);r.put(r.constants.STATUS_MANAGER,s);var u=xe(r);r.put(r.constants.STORAGE,u);var l=ec(r);r.put(r.constants.INTEGRATIONS_MANAGER,l);var f="localhost"===o.mode?Ka:Ia,p=f(r,n),h=p.api,d=p.metricCollectors,S=at(u.splits,r),T=xn(o.core.key),E=rc(T,o.core.trafficType);return e[E]=h,nc.info("New Split SDK instance created."),{client:function(t,n){if(void 0===t)return nc.debug("Retrieving default SDK client."),h;if("function"!=typeof u.shared)throw"Shared Client not supported by the storage mechanism. Create isolated instances instead.";var i,c=P(t,"Shared Client instantiation");if(!1===c)throw"Shared Client needs a valid key.";if(void 0!==n&&!1===(i=$(n,"Shared Client instantiation")))throw"Shared Client needs a valid traffic type or no traffic type at all.";var s=rc(c,i);if(e[s])nc.debug("Retrieving existing SDK client.");else{var l=o.overrideKeyAndTT(c,i),p=new wn,v=a(l.startup.readyTimeout);p.put(r.constants.READY_FROM_CACHE,r.get(r.constants.READY_FROM_CACHE,!0)),p.put(r.constants.READINESS,v),p.put(r.constants.STATUS_MANAGER,za(p,-1)),p.put(r.constants.SETTINGS,l),p.put(r.constants.STORAGE,u.shared(l)),e[s]=f(p,!1,d).api,nc.info("New shared client instance created.")}return e[s]},manager:function(){return nc.info("Manager instance retrieved."),S},Logger:m.a,settings:o}}},function(t,e,n){"use strict";n.r(e);n(176);var r=n(119),i=n.n(r);var o=Array(),a=function(t,e,n){t.lpTag=t.lpTag||{};var a=t.lpTag;a.sdes=a.sdes||[],a.section=a.section||[];var c=a.section,s=t.location,u=(t.ux,t.gdchat);t._trfq=t._trfq||[];var l=t._trfq;new Promise((function(t,e){l.push(["cmdGetTrackingValues",function(e){var n="".concat(e.vtg,"|").concat(e.vg);a.sdes.push({type:"ctmrinfo",info:{socialId:n}}),splitioAttributes.visitorGuid=e.vtg,splitioAttributes.sessionGuid=e.vg,t(e)}])})).then((function(){return new Promise((function(t,e){u&&(u.managedLevel&&c.push("managedLevel:".concat(u.managedLevel)),u.vars&&Object.keys(u.vars).forEach((function(t){c.push("".concat(t,":").concat(u.vars[t]))}))),t(u)}))})).then((function(){return new Promise((function(e,n){if(s){if(s.hostname){var r=s.hostname.split("."),i="prod";if(r.length>=2){var o=r[r.length-2].split("-");o.length>=2&&(i=o[0])}if("dev"===i&&(t.license="5945340"),splitioAttributes.env=i,c.push("env:".concat(i)),r.length>=3){var a=r[r.length-3];c.push("subdomain:".concat(a)),splitioAttributes.subdomain=a}}if(s.pathname&&""!==s.pathname&&"/"!==s.pathname||(c.push("home"),splitioAttributes.path=""),c.push("path:".concat(s.pathname)),splitioAttributes.path=s.pathname,s.pathname){var u=s.pathname.split("/");if(u.length>=2){var l=u[1];l&&(c.push(l),splitioAttributes.context=l)}}/\bCHAT_ENABLE=(true|1)\b/i.test(s.search)&&c.push("chat_enable"),e(s)}}))})).then((function(){return new Promise((function(t,n){e&&(e.app_name&&(c.push("app:".concat(e.app_name)),splitioAttributes.app=e.app_name),e.pl_id&&(c.push("plid:".concat(e.pl_id)),o.push({plid:e.pl_id}),c.push("isgd:".concat(1===e.pl_id)),splitioAttributes.plid=e.pl_id),new Promise((function(t,n){setInterval((function(){e["cp.market"]&&t(e["cp.market"])}),100),setInterval((function(){n("Timed out getting market from utag")}),1e4)})).then((function(n){c.push("market:".concat(e["cp.market"])),splitioAttributes.market=e["cp.market"],o.push({market:e["cp.market"]});var r=e["cp.market"].split("-");if(2===r.length&&(c.push("lang:".concat(r[0])),splitioAttributes.lang=r[0]),e["cp.info_idp"]){var i=JSON.parse(e["cp.info_idp"]);i.e2s&&(i=i.e2s),splitioAttributes.shopper=i.info_shopperId,a.sdes.push({type:"ctmrinfo",info:{customerId:i.info_shopperId}}),a.sdes.push({type:"personal",personal:{firstname:i.firstname,lastname:i.lastname}})}t(n)})))}))})).then((function(){return function(t){var e;switch(t.env){case"dev":e="p920quvf2i1oppah0u6kichrhi8hnsn6ed79";break;case"test":e="d87lh4b0eoo7sts4efjk3k1l7h55vs05cafm";break;case"prod":e="qian243vmc5db0vgr9srj8m8ta9qo7kp4a0f"}var n,o,a,c=new i.a({app:"liveengage-tag",splitioOptions:{core:{authorizationKey:e}},subject:(n={},o=r.hivemindConstants.idTypes.VISITOR_GUID,a=t.visitorGuid,o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n),usePreload:!1});return c.ready.then((function(){return c.getCohorts({labels:["LiveEngage-Tag"],attributes:t})}))}(t.splitioAttributes).then((function(t){var e=t.cohorts;for(var n in e)c.push("".concat(n,":").concat(e[n].cohortId)),a.sdes.push({type:"service",service:{topic:n,category:e[n].cohortId,serviceId:e[n].eid}})}))})).then((function(){return new Promise((function(t){t(a.sdes.push({type:"ctmrinfo",info:{cstatus:JSON.stringify(o)}}))}))})).then(n)},c=function(t,e){t.lpTag=t.lpTag||{},void 0===t.lpTag._tagCount?(t.lpTag={wl:lpTag.wl||null,scp:lpTag.scp||null,site:t.license||"",section:lpTag.section||"",tagletSection:lpTag.tagletSection||null,autoStart:!1!==lpTag.autoStart,ovr:lpTag.ovr||{},_v:"1.10.0",_tagCount:1,protocol:"https:",events:{bind:function(t,e,n){lpTag.defer((function(){lpTag.events.bind(t,e,n)}),0)},trigger:function(t,e,n){lpTag.defer((function(){lpTag.events.trigger(t,e,n)}),1)}},defer:function(t,e){0===e?(this._defB=this._defB||[],this._defB.push(t)):1===e?(this._defT=this._defT||[],this._defT.push(t)):(this._defL=this._defL||[],this._defL.push(t))},load:function(t,e,n){var r=this;setTimeout((function(){r._load(t,e,n)}),0)},_load:function(t,n,r){var i=t;t||(i=this.protocol+"//"+(this.ovr&&this.ovr.domain?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site);var o=e.createElement("script");o.setAttribute("charset",n||"UTF-8"),r&&o.setAttribute("id",r),o.setAttribute("src",i),e.getElementsByTagName("head").item(0).appendChild(o)},init:function(){this._timing=this._timing||{},this._timing.start=(new Date).getTime();var e=this;t.attachEvent?t.attachEvent("onload",(function(){e._domReady("domReady")})):(t.addEventListener("DOMContentLoaded",(function(){e._domReady("contReady")}),!1),t.addEventListener("load",(function(){e._domReady("domReady")}),!1)),void 0===t._lptStop&&this.load()},start:function(){this.autoStart=!0},_domReady:function(t){this.isDom||(this.isDom=!0,this.events.trigger("LPT","DOM_READY",{t:t})),this._timing[t]=(new Date).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],hooks:lpTag.hooks||[],identities:lpTag.identities||[],ev:lpTag.ev||[]},lpTag.init()):t.lpTag._tagCount+=1},s=function(t,e,n){var r=t.createElement("div");r.setAttribute("id",e),r.className=n,t.body.appendChild(r)},u=function(t){s(t,"gdchat-fixed-bottom-left","gdchat-fixed-bottom-left"),s(t,"gdchat-fixed-bottom-right","gdchat-fixed-bottom-right")},l=n(175),f=n.n(l),p=function(t,e,n){if(n){var r=t.getElementsByClassName(e);[].forEach.call(r,(function(t){t.innerHTML=n}))}},h=function(t,e){if(t&&t.utilityChatEnabled&&t.target){var n=e.getElementById(t.target);if(n)n.innerHTML=f.a,p(n,"title",t.messages.ChatNow),p(n,"message",t.messages.Chat),p(n,"hour",t.messages.ChatHours),p(n,"online",t.messages.ChatNow),p(n,"offline",t.messages.ChatOffline),new MutationObserver((function(e){e.forEach((function(e){var n=e.target;p(n,"title",t.messages.ChatNow),p(n,"message",t.messages.Chat),p(n,"hour",t.messages.ChatHours),p(n,"online",t.messages.ChatNow),p(n,"offline",t.messages.ChatOffline)}))})).observe(n,{subtree:!0,childList:!0})}},v=function(t,e,n){return function(r){t.push(["cmdLogPageEvent",e,n,[["campaignId",r.campaignId],["engagementId",r.engagementId],["state",r.state],["engagementName",r.engagementName]]])}},d=function(t,e){t.events.bind({eventName:"OFFER_IMPRESSION",func:v(e,"impress","chat.offer.impress"),async:!0,triggerOnce:!1}),t.events.bind({eventName:"OFFER_CLICK",func:v(e,"click","chat.offer.click"),async:!0,triggerOnce:!1}),t.events.bind({eventName:"OFFER_TIMEOUT",func:v(e,"timeout","chat.offer.timeout"),async:!0,triggerOnce:!1}),t.events.bind({eventName:"OFFER_DECLINED",func:v(e,"declined","chat.offer.declined"),async:!0,triggerOnce:!1})},g=function(t,e){t.vars=t.vars||{},e&&(t.vars.enableHelpSearchContactTray=!!e.enableHelpSearchContactTray)},m=function(t,e,n){if(t.location.host){var r,i=t.location.host.split(".");if(i.length>=3&&(r=i[i.length-3]),r&&"cart"==r)new MutationObserver((function(r){r.forEach((function(r){n.getElementById("cart-chat")&&""==n.getElementById("cart-chat").innerHTML&&e.newPage(t.location.href)}))})).observe(n.getElementById("app"),{subtree:!0,childList:!0})}};window.utag_data=window.utag_data||{};var y=window.utag_data;window.gdchat=window.gdchat||{};var b=window.gdchat,S=window.ux,T=S&&S.eldorado&&S.eldorado.chat_data;window.license=b.site||"30187337",window.splitioAttributes={},g(b,T),a(window,y,(function(){c(window,document,license),window._trfq=window._trfq||[],d(window.lpTag,window._trfq),m(window,window.lpTag,document)})),u(document),h(T,document)}]);